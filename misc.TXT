#######################################################
#######################################################
New command in SPRE0025

uxpurdst : purge distribution history

# uxdat mmddyy 010104 yyyy
2004
# uxdat aaaajjmm 20041111 mmm
nov

uxpurctl : purge ctl and GJM
# uxpurctl AVALID X DA_US_U_05

To distribute Obj from command line:
uxdst res res=REF1 tmut=DA_US_U_02
uxdst node tmu=DA_US_U_02

To transfer Obj from command line
uxtra upr upr= (vupr=) tesp= (soc=) (node=) app/int/sim

# uxstr atm exp lan
# uxstr atm exp cal 
# ./uxstr atm exp
 Command : uxstr atm exp cycle=120 all

# ./uxend atm exp
 Command : uxend atm exp all

# ./uxend atm exp  cal
 Command : uxend atm exp cal

# ./uxend atm exp lan
 Command : uxend atm exp lan

(citation-TEST50):/apps/universe/TEST50/env # uxtim "HHMM" "0100" "HHMM" "-01h00"
0000
(citation-TEST50):/apps/universe/TEST50/env # uxtim "mm/dd/yyyy,HHMM" "01/05/2004,0100" "mm/dd/yyyy,HHMM" "-01h00"
01/04/2004,2300

The hour 2300 seems not right ;-)


#######################################################
#######################################################

Command used to show libraries used by binaries on different Unices:

4.8.2 Fonction analyse d'un exec
4.8.2.1 Lib utilisées par un executable
4.8.2.1.1 HP
Chatr nom_de_l'executable
4.8.2.1.2 SUN
Ldd nom_de_l'executable
4.8.2.1.2.1 Option
-s pour avoir plus d'infos
4.8.2.1.3 AIX
Dump -H nom_de_l'executable
4.8.2.1.4 Dec
Grep libux cuxxm
Odump -D cuxxm
4.8.2.1.5 Linux (linux 02)
Ldd
4.8.2.1.6 Unixware
Ldd ou dump -Lv
4.8.2.1.7 Ps 
Penser à également utiliser la commande file …
4.8.2.2 Autre fonction à utliser
4.8.2.2.1 SUN
/usr/ccs/bin/nm
4.8.2.2.1.1 Fonction
A priori cette fonction donne la liste des fonctions contenues dans une bibliothèque.


#######################################################
#######################################################
statistics uproc:
that would be a uproc inside the maintenance sessions: IU_STAT_D
Every night it adds a line in a file, called:
company_${S_NOEUD}.stat

I think that by default it is written in the directory $UXLEX

#######################################################
#######################################################
Specific Env loaded for special uprocs through U_ANTE_UPROC

FI1*****

S_PROCEXE: specify the uproc name for its Env, which is unique for each uproc.

$UXDIR_ROOT/env/X_FI1.env	#For each uproc with name FI1*****
$UXDIR_ROOT/env/X_F_.env	#For each uproc launched within MU F*****

To test launch 2 dummy uprocs.
One with a name FI1***
One with names something else.
If the first one failed, it means the env file is missing.

#######################################################
#######################################################
Cluster:

Logical nodes (Packages) can be swithced between the physical nodes.
(Phycical) node1	node2  
		\	/	
		 \     /
(Logical)	Package1 (Hard drive & IP address)
		Package2
		Package3


#######################################################
#######################################################
To control core size:

Please check the configuration file: /etc/security/limits
You may find a line like the following:

*               soft    core            0

This line will limit the core size to 0 for all users.
Please modify it accordingly. This modification will have affect system wide.


The "ulimit" command can also change the limit. However it will work only for the current shell.

...........
 ulimit

Control the resources available to a process started by the shell, on systems that allow such control.

SYNTAX
      ulimit [-acdfHlmnpsStuv] [limit]

OPTIONS

   -a   All current limits are reported. 

   -c   The maximum size of core files created. 

   -d   The maximum size of a process's data segment. 

   -f   The maximum size of files created by the shell.
        (This is the default option) 

   -H   Change and report the hard limit associated with a resource. 

   -l   The maximum size that may be locked into memory. 

   -m   The maximum resident set size. 

   -n   The maximum number of open file descriptors. 

   -p   The pipe buffer size. 

   -s   The maximum stack size. 

   -S   Change and report the soft limit associated with a resource. 

   -t   The maximum amount of cpu time in seconds. 

   -u   The maximum number of processes available to a single user. 

   -v   The maximum amount of virtual memory available to the process. 

If limit is given, it is the new value of the specified resource. Otherwise, the current value of the soft limit for the specified resource is printed, unless the `-H' option is supplied.

When setting new limits, if neither `-H' nor `-S' is supplied, both the hard and soft limits are set.

Values are in 1024-byte increments, except for `-t', which is in seconds, `-p', which is in units of 512-byte blocks, and `-n' and `-u', which are unscaled values.

The return status is zero unless an invalid option is supplied, a non-numeric argument other than unlimited is supplied as a limit, or an error occurs while setting a new limit.

`ulimit' is a BASH builtin command.
......................
On AIX, 
LDR_CNTRL is an environment variable used on AIX systems to override the default 256MB data segment allocated to a process.
If the default is used and the ulimit output is set to ¿unlimited¿ then there can be memory reallocation issues.

The solution (to be confirmed) would be to set the variable to 0x40000000 (meaning 1GB)
   # ulimit -a
   time(seconds)        Illimité
   file(blocks)         Illimité
   data(kbytes)         Illimité
   stack(kbytes)        32768
   memory(kbytes)       32768
   coredump(blocks)     2097151
   nofiles(descriptors) 2000

   # echo $LDR_CNTRL
   MAXDATA=0x40000000

export LDR_CNTRL=MAXDATA=0x40000000

export LDR_CNTRL=MAXDATA=0x40000000
start_process
unset LDR_CNTRL

LDR_CNTRL=MAXDATA=0x40000000          
meaning 1 Gigabyte

LDR_CNTRL=MAXDATA=0x80000000
2 GB

LDR_CNTRL=MAXDATA=0x40000000
http://publib.boulder.ibm.com/infocenter/tivihelp/v2r1/index.jsp?topic=/com.ibm.itame3.doc_5.1/am51_perftune113.htm

For $U6, put the following in UVC.
MAXDATA=0x40000000

#######################################################
On AIX, the following error could be from lack of memory. IO crash with core.
<< 2012-08-13 07:00:14 18940166/uxioserv /u_io_create_thread /000000000 - u_io_create_thread - System error 11 : thread launch type 0 failed (unable to create new thread), thread_number 49

One way to fix it is to increase the ulimit -d, for example to 512000.
.................................
<< 2012-09-30 09:05:00 17301640/uxioserv        /u_traite_req_client /000000000 - Memory error: (requete) malloc failed (32774 bytes)
<< 2012-09-30 09:05:00 17301640/uxioserv        /u_getport_c         /000000000 - ERROR: cannot find the port number for Company : [CGPROD] node : [ASIPR1    ], server [IO] area [X]
<< 2012-09-30 09:05:00 17301640/uxioserv        /u_io_callsrv_connect/000000000 - u_get_servname(CGPROD, X, IO) returns error
<< 2012-09-30 09:05:00 18219114/uxord           /uxord               /000000000 - After recv: IO server stopped, shutdown engine, before restart attempt
<< 2012-09-30 09:05:00 17301640/uxioserv        /u_trt_req_srt_snsess/000000000 - cnx creation failed
<< 2012-09-30 09:05:00 17301640/uxioserv        /u_io_create_thread  /000000000 - u_io_create_thread - System error 11 : thread launch type 0 failed (unable to create new thread), thread_number 17

For this issue, it failed at malloc. The IO can not allocate more memory. Usually it is related to UXMAXFD and ulimit.
In this one, it is trying to create a new thread. 

It may not related to this. This is to change a stack size within a thread, which has already been created.
U_IO_THREAD_STACK_SIZE="value"
export U_IO_THREAD_STACK_SIZE
#######################################################
#######################################################
Supervision,  

On Unix

1. First: use the right library:
/apps/qa/AVALID/exec/lib
lrwxrwxrwx    1 root     root           15 Jul 28 19:36 libuxspv.so -> libuxspv_com.so

2. Define the variable in the uxsetenv
UXSPV_MSGJOB=/tmp/test_spv.sh
export UXSPV_MSGJOB

3. Create the script: (the log could be the info sent to OVO, etc.... )
# cat test_spv.sh
echo $* >> /tmp/test_spv.log

4. The generated log
# cat test_spv.log
	...
UNIV Completed JOB IU_MAINT IU_MAINT_T U_DA_US_U_ 2004/08/13 10:17 0001352 0000171 AVALID X
UNIV Aborted JOB TEST DA_US_U_05 2004/08/13 11:11 0001353 0000000 AVALID X


For Windows:

1. Shutdown the Dollar Universe Company
2. Replace the uxspv.dll with uxspv_com.dll 
3. Put the following in u_spv_job.bat

echo %* >> u_spv_job.log 

4. Place this file, u_spv_job.bat, into C:\WINDOWS\system32
For Win x64, the file should be in C:\WINDOWS\SysWOW64

Or define these for the location:
UXSPV_MSGJOB=C:\universe\VITPRD\mgr\U_SPV_JOB.bat
UXSPV_MSGLOG=C:\universe\VITPRD\exp\log\uxspvjob.log

5. Restart the Company.

If only switch the DLL file, but no u_spv_job.bat in C:\WINDOWS\system32, the launcher will hang after one launch. 
One cmd.exe process hangs in the system after each launch, and the launcher will not do anything else unless the cmd.exe got killed or the batch file is present in the system32. In another word, the launcher seems to hang after launching a job; the job will complete.


On Windows : enabling ITO ; OVO integration
The Openview integration is built through the uxspv_ito.dll library.

In order to implement the communication with the OVO instance, please follow this procedure :

- Stop Dollar Universe (or at least the launcher in every areas and make sure that not jobs are executing anymore).
- Backup the %UXEXE%\uxspv.dll under %UXEXE%\uxspv_no_sup.dll
For example:
cd /d %UXEXE%
copy uxspv.dll uxspv_no_sup.dll

- Replace the %UXEXE%\uxspv.dll with %UXEXE%\uxspv_ito.dll
For example:
cd /d %UXEXE%
copy uxspv_ito.dll uxspv.dll

- Restart the Dollar Universe company (or the stopped Dollar Universe engines).


For Unix,
copy or link the  libuxspv_ito.sl on top of libuxspv.sl  

The libuxspv_ito will call the opcmsg command to send status to HPOV.
The library libuxspv_ito is used by the Launcher, uxjobend and uxjobinit.

#######################################################
#######################################################
2- Here is a quick note about how to troubleshoot Dollar Universe Manager for OVO 8.11:

 A.- Requirements

Dollar Universe Manager 3.0 or higher

B- Turn the OVO trace mode on in order to see the OVO messages sent through the opcmsg command :

Set the U_ITO_TRACE set to Y in the uxsetenv* files and restart the Dollar Universe company.

The messages will be displayed in the launcher's log and job log.

 C.- Get some information about the OVO agent :

opcagt -type -verbose

D.- Test the opcmsg command manually :

/opt/OV/bin/OpC/opcmsg application="UNIV_Scheduler UNVADV" object="JobStatus" msg_text="UNIV ABORTED JOB G_TEST Y_G01_0 2004/08/31 10:30 0017403 QCL500 X 0015702 G01_SES_0 0004292 LO Uhpux00001" msg_grp="UNIV_Scheduler"

(UNVADV is the comany name)

 E.- Turn the trace mode of the OVO agent on and get additional messages :

/var/opt/OV/log/OpC/opcerror

 F.- List the templates assigned to the agent :

opctemplate

 G.- File containing the messages sent to the OVO agent :

/var/opt/OV/tmp/OpC/msgagtq

 H.- File containing the messages sent to the OVO central node :

/var/opt/OV/share/tmp/OpC/mgmt_sv/msgmgrq

#######################################################
#######################################################
===rsync=== 

By default for RedHat linux, rsync is alreadily configured for inetd.d. So, just launch the rsync command.
The "/" behind the src and dest does matter!

rsync -av --delete src/ dest/

-a : archive, including all of the direcotriy structure
-v : verbose
-b : the same as --backup
--delete : if a file is deleted from the src/, rsync will delete it in the dest/ also.

===remotely:
rsync -a -e ssh source/ username@remotemachine.com:/path/to/destination/


#######################################################
#######################################################
===Hard Link===
A hard link is a file name.

ln a b

To check how many hard link a file have :
stat filename

Now, a and b are two names for the same file, as you can verify by seeing that they reside at the same inode. 

ls -i a
  232177 a
ls -i b
  232177 b


#######################################################
#######################################################
===cp -al===
-a : archive
-l : create hard link


#######################################################
#######################################################
===smbmount=== Only work on Linux
To access Windows share from Linux;
To use unix tools against Windows share.

sudo su
smbmount //support4/Answers /data/home/zwa/Answers -o username=zwa,workgroup=ORSYP

This will do the same thing:
mount -t cifs //calpmzwa/Backup_support2 /home/zwa/mnt/ -o username=zwa,workgroup=ORSYP,password='mar999%!&'

===smbumount===
smbumount /data/home/zwa/Answers



#######################################################
#######################################################
=== To get address for $U 4.3 ===
Please send us the result of the following command:
%UXEXE%/uxethadr

#######################################################
#######################################################
=== MPE ===
-- Reorganization
-1- With a MPE connection and the Dollar Universe environment, stop the company :
!UXMGR/SHUTDOWN
-2- Check is the company is well stopped :
showjob
If some jobs remains alive stop them with the abortjob command.
-3- Once the company is well stopped, start a POSIX session :
sh
-4- Check that your environment is well loaded :
echo $UXMGR
Should return you the patch of your mgr directory (if it does not, please load you environment)
-5- Launch the reorganization script :
!UXMGR/ux_vrf_rgz_rst
-6- Check if you have any error messages.
-7- Exit the Posix environment
exit
-8- Restart your Dollar Universe company.

-- Environment
Loading the environment in the POSIX mode :
. /UNIVERSE/MHGPRD/mgr/uxsetenv

Loading the environment in the MPE mode :
(In the  /UNIVERSE/MHGPRD/ directory)
UXENVMPE

-- Patch MPE recommended : 
In case they did not apply any patch (90% chances) :
\\support2\windata\14_50_Patches\v500\PRERELEASE\mpe\mandatory\SPRE0021D.tar

#######################################################
#######################################################
=== ICS trace mode ===
- Stop the ics
- Update the uxsetenv_ics_ksh and uxsetenv_ics_csh by adding the following lines

export U_ICS_LOG=/your_partition/icslog.log
export U_ICS_TRACE/your_partition/icstrace.log

N.B: the uxsetenv* are located in the mgr directory of the ICS installation.

- Restart the ICS server
- Try to launch a job
- If the ICS fails again, please send us these two files (icslog.log and icstrace.log)

#######################################################
#######################################################
=== error messages of reorg while the Company is up ===
<< 2004-08-20 13:15:52 0009000/uxlnmlod        /UXNL_ApiTbl         /134840523 - Fonc = 1 , Table = TBL_SYSTEM , Parent = TBL_SYSTEM
<< 2004-08-20 13:15:52 0009000/uxlnmlod        /UXNL_ApiTbl         /134840523 - Fonc = 1 , Table = LNM_FILE_DEV , Parent = TBL_SYSTEM
<< 2004-08-20 13:15:52 0009000/uxlnmlod        /UXNL_ApiTbl         /134840523 - Fonc = 1 , Table = LNM_RESSOURCES , Parent = TBL_SYSTEM
<< 2004-08-20 13:15:52 0009000/uxlnmlod        /UXNL_ApiTbl         /134840523 - Fonc = 1 , Table = LNM_QCL500 , Parent = TBL_SYSTEM
<< 2004-08-20 13:15:52 0009005/uxrstfic        /create_inet_com     /135888915 - 61525 - Address already in use

The last line is the real error message!

For Windows, if the reorg launched with the Company started, there may not be any messges written in the universe.log, and the reorg.log will be all successful.
#n######################################################
#######################################################
=== Windows routing config

route print 


route -p add 0.0.0.0 mask 0.0.0.0 192.168.1.1 metric 1 if 0x20003

This sample command uses the -p option to add a persistent route (i.e., 0.0.0.0) that will still be in place, even after a reboot, to all destinations. This persistent route will use the 192.168.1.1 gateway with the highest priority (i.e., metric 1) on interface 0x20003 (i.e., wireless network). 

#######################################################
#######################################################
uxjobinit & uxjobend  : used in the u_batch

uxjobinit: will copy the uproc script to $U_TMP_PATH; and to inform the IO server that the uproc script has been launched into the system and change the status of a job from PENDING into EXECUTING.
If the $U_TMP_PATH is not accessible, it will have "File open error" from uxjobinit.

uxjobend: inform the IO server the RESEXE (return code of the uproc script). 

uxjobinit -> U_ANTE_UPROC -> uproc script -> U_POST_UPROC -> uxjobend

The RESEXE is set with the return code of the uproc script and can be captured withing the U_POST_URPOC.
=======================================================
Job submission process:


===Within the Dollar Universe Company:

Once the a job is created from a Dollar Universe Company, a record is written into the u_fmsb50.dat file. The launcher will check the file.

If DQM is not used, it will create a sub uxord process to handle the job.
Otherwise the launcher will connect to the DQM TCP port, and transfer the job to DQM. DQM will spawn a sub process to handle the job.

Then a record will be writen into the u_fmcx50.dat file. The job will be in PENDING status for now.


===Into the OS with u_batch

The DQM will su to the proper user (both of the DQM and uxord processes are owned by root) and launch the job to the OS with the $UXEXE/u_batch. The u_batch is considered as an envelope.


The following is abstracted from result of pstree -acl

  |-uxdqmsrv) GCO210 X DA_US_U_05
  |   `-uxdqmsrv) GCO210 X DA_US_U_05
  |       `-sh) -c ...
  |           `-su) - univa -c ...
  |               `-ksh) -c ...
  |                   `-u_batch) /apps/du/GCO210/exec/u_batch univa 001 GCO210 M2 SYS_BATCH ...
  |                       `-sh) /apps/du/GCO210/exp/upr/SLEEP300.000
  |                           `-sleep) 300

with pstree -aAcUupl: and replace "/040" with space: %s/\\040/ /g

  +-uxord,5503 TST530 X casdlsup06
  ¦   +-uxord,19637 TST530 X casdlsup06
  ¦       +-sh,19639 -c su - univa -c '/apps/du/530/TST530/exec/u_batch "univa" "001" "TST530" "CASDLSUP06" "20090902          00000000001397437 00" "AX/apps/du/530/TST530/mgr" "/apps/du/530/TST530/exp/upr/SLEEP3000.0
  ¦           +-su,19640 - univa -c/apps/du/530/TST530/exec/u_batch "univa" "001" "TST530" "CASDLSUP06" "20090902          00000000001397437 00" "AX/apps/du/530/TST530/mgr" "/apps/du/530/TST530/exp/upr/SLEEP3000.000" "139
  ¦               +-bash,19641,univa -c/apps/du/530/TST530/exec/u_batch "univa" "001" "TST530" "CASDLSUP06" "20090902          00000000001397437 00" "AX/apps/du/530/TST530/mgr" "/apps/du/530/TST530/exp/upr/SLEEP3000.000" "1394811"
  ¦                   +-u_batch,19661 /apps/du/530/TST530/exec/u_batch univa 001 TST530 CASDLSUP06 20090902          00000000001397437 00 AX/apps/du/530/TST530/mgr /apps/du/530/TST530/exp/upr/SLEEP3000.000 1394811
  ¦                       +-SLEEP3000.000,19669 /apps/du/530/TST530/exp/upr/SLEEP3000.000
  ¦                           +-sleep,19670 3000

  +-uxdqmsrv,30567 FLS530 X casdlsup06
  ¦   +-uxdqmsrv,12935 FLS530 X casdlsup06
  ¦       +-sh,12936 -c su - univa -c '/apps/du/530/FLS530/exec/u_batch 'univa' '001' 'FLS530' 'CASDLSUP06' 'SYS_BATCH' 'AX/apps/du/530/FLS530/mgr' 'S_FLS530_PROCX:ONLINE.000' '0088086' <&- >> /apps/du/530/FLS530/exp/
  ¦           +-su,12937 - univa -c/apps/du/530/FLS530/exec/u_batch univa 001 FLS530 CASDLSUP06 SYS_BATCH AX/apps/du/530/FLS530/mgr S_FLS530_PROCX:ONLINE.000 0088086 <&- >> /apps/du/530/FLS530/exp/log/XCASDLSUP06ONLINE.00
  ¦               +-bash,12938,univa -c/apps/du/530/FLS530/exec/u_batch univa 001 FLS530 CASDLSUP06 SYS_BATCH AX/apps/du/530/FLS530/mgr S_FLS530_PROCX:ONLINE.000 0088086 <&- >> /apps/du/530/FLS530/exp/log/XCASDLSUP06ONLINE.0088086
  ¦                   +-u_batch,12958 /apps/du/530/FLS530/exec/u_batch univa 001 FLS530 CASDLSUP06 SYS_BATCH AX/apps/du/530/FLS530/mgr S_FLS530_PROCX:ONLINE.000 0088086
  ¦                       +-ONLINE.000,12966 /apps/du/530/FLS530/exp/upr/ONLINE.000
  ¦                           +-uxrgz,12967 du 530 FLS530 exec uxrgz uni soc=FLS530 node=casdlsup06 exp dyn

u_batch will run in the following order:

uxjobinit -> U_ANTE_UPROC -> uproc script -> U_POST_UPROC -> uxjobend -> Launcher -> IO to update the record status.

uxjobinit

1. Will copy the uproc script to $U_TMP_PATH;
2. Inform the IO server that the uproc script has been launched into the
system. The IO will change the status of a job from PENDING into EXECUTING.
3. If the $U_TMP_PATH is not accessible, it will have "File open error" from uxjobinit.
4. If the IO server is not available at this time, uxjobinit will complain in the universe.log.


Then, the all of the required environment variable will be prepared.

U_ANTE_UPROC

Uproc Script : set the return code

U_ANTE_UPROC


uxjobend

completion instruction run after the uxjobend run. If there is no completion instruction, the uxjobend probably did not run.
inform the IO server the RESEXE (return code of the uproc script).
The IO will then change the status of the job.

The RESEXE is set with the return code of the uproc script and can be captured withing the U_POST_URPOC.

If a job is completed after the Dollar Universe Company shutdown and before its restart, it will be in ABORTED status.
If a job is completed after the Dollar Universe Company restarted, the proper status will show.

#######################################################
#######################################################
uxalrjob: From SPRE0025 , to replace uxspvjob and uxsurjob?
 To launch a script U_ALR_JOB after a uproc has run more than cerntain second.
It can be launched in the U_ANTE_URPOC or within the uproc script.
   The syntax for the uxalrjob command is :
   - sur Windows   : %UXEXE%\uxalrjob.exe N
   - sur UNIX      : $UXEXE/uxalrjob N 
   - sur VMS       : $ @UXEXE:uxalrjob N

   N being the maximum execution time in seconds for a uproc. The seconds will not be converted into minutes, so better then uxspvjob. 

   The U_ALR_JOB script is launched by default and is located in the UXMGR directory (U_ALR_JOB.bat on Windows). Be sure to : chmod +x. 

The output of the U_ALR_JOB is not in the job log, since the U_ALR_JOB is launched by the launcher or the DQM, it does not have the environment variables to access the job log and history trace.

   The script name can be defined by setting the U_ALR_JOB variable.
Some job info is availabel to the U_ALR_JOB as arguments, $1 - $9. just echo $* to check them.

$1:  Session name
$2:  Session number
$3:  Uproc name
$4:  Uproc number
$5:  MU
$6:  NSEQ (Launch number)
$7:  Launch date or Processing date
$8:  Number of seconds specified in the uxalrjob command.


   If the file U_ALR_JOB isn't found, a message is written in the history trace 
   indicating a submission error for this script.  In this case and if the environment 
   variable, U_ALR_JOB_CANCEL, is set to Y in the launcher's environment then the 
   job is stopped.  
Even the variable U_ALR_JOB_CANCEL is defined to Y in the uxsetenv, if the U_ALR_JOB exists, the job won't be affected by U_ALR_JOB_CANCEL.

The following screenshots could explain why the U_ALR_JOB does not have the environment. In the following test, a sleep 3000 is inserted both into the U_SPV_UPROC and U_ALR_JOB.


This the U_SPV_UPROC :

1. The U_SPV_UPROC has not launched yet.

  |-uxdqmsrv) MNT500 X DA_US_U_02
  |   `-uxdqmsrv) MNT500 X DA_US_U_02
  |       `-sh) -c ...
  |           `-su) - univa -c ...
  |               `-ksh) -c ...
  |                   `-u_batch) /apps/du/MNT500/exec/u_batch univa 001 MNT500 DA_US_U_02 ...
  |                       `-40940-2.001) /apps/du/MNT500/app/upr/40940-2.001
  |                           |-sleep) 70
  |                           `-uxspvjob) 30

2. Launched. The U_SPV_UPROC is launched from a sub processes. That's why it can get all of the environment.

  |-uxdqmsrv) MNT500 X DA_US_U_02
  |   `-uxdqmsrv) MNT500 X DA_US_U_02
  |       `-sh) -c ...
  |           `-su) - univa -c ...
  |               `-ksh) -c ...
  |                   `-u_batch) /apps/du/MNT500/exec/u_batch univa 001 MNT500 DA_US_U_02 ...
  |                       `-40940-2.001) /apps/du/MNT500/app/upr/40940-2.001
  |                           |-sleep) 70
  |                           `-uxspvjob) 30
  |                               `-U_SPV_UPROC) /apps/du/MNT500/mgr/U_SPV_UPROC  ...
  |                                   `-sleep) 3000

########################################################################################

For uxalrjob:

1. The U_ALR_JOB has not launched yet.

  |-uxdqmsrv) MNT500 X DA_US_U_02
  |   `-uxdqmsrv) MNT500 X DA_US_U_02
  |       `-sh) -c ...
  |           `-su) - univa -c ...
  |               `-ksh) -c ...
  |                   `-u_batch) /apps/du/MNT500/exec/u_batch univa 001 MNT500 DA_US_U_02 ...
  |                       `-40940-1.001) /apps/du/MNT500/app/upr/40940-1.001
  |                           `-sleep) 40



2. The U_ALR_JOB launched from an independent process series. That's why it doesn't get the environment.

  |-uxdqmsrv) MNT500 X DA_US_U_02
  |   `-uxdqmsrv) MNT500 X DA_US_U_02
  |       `-sh) -c ...
  |           `-su) - univa -c ...
  |               `-ksh) -c ...
  |                   `-u_batch) /apps/du/MNT500/exec/u_batch univa 001 MNT500 DA_US_U_02 ...
  |                       `-uxjobend) 1



  |-uxord) MNT500 A DA_US_U_02
  |   `-U_ALR_JOB) -x /apps/du/MNT500/mgr/U_ALR_JOB \040\040\040\040\040\040\040\040\040\040 ...
  |       `-sleep) 3000

#######################################################
#######################################################
uxspvjob from SPRE0021D
This command allows you to supervise the running time of a uproc and to launch
the script UXMGR/U_SPV_UPROC once this time has elapsed.  The creation and
actions performed by the U_SPV_UPROC script are defined by the user in the
UXMGR directory.

 The syntax of the uxspvjob command is :
 - On Windows machines : %UXEXE%\uxspvjob.exe N
 - On UNIX : $UXEXE/uxspvjob  N  &   ( detached run)
 N is the maximum allowed elapsed time in seconds.

 You can insert this call at the beginning of the uproc script or in the U_ANTE_UPROC
 script if you want to declare the maximum elapsed time for every uproc. In this case,
 the environment of the command uxspvjob is that of the Uproc which calls it.
 The %UXEXE%\U_SPV_UPROC must be a .bat or a .cmd on all Windows machines.

 The command uxspvjob takes the time as an input, and converts it into the
next
 integer in minutes, as illustrated :
 5s -> 1 min
 58s -> 1 min
 67s -> 2 min

Note, the seconds is round up to minutes, so the following script:

$UXEXE/uxspvjob 30 &
sleep 40

is the same as:

$UXEXE/uxspvjob 60 &
sleep 40

So, the $UXMGR/U_SPV_UPROC won't be provoked.

Note that after the $UXMGR/U_SPV_UPROC is submitted, the original uproc will continue to run until the end. If the U_SPV_UPROC is also sending output to the job log. The job log could have the information from both the uproc and the U_SPV_UPROC mixed together.

#######################################################
#######################################################
uxsurjob : to terminate a job after a specified time. Available before 20C
uxsurjob NB_SEC $S_NUMPROC
NB_SEC: (in seconds) the maximum time a job can live
$S_NUMPROC: Uproc ID number on UNIX

ex:
uxsurjob 3600 $S_NUMPROC

If this command is inserted in the Uproc script,  the Uproc will be interrupted after one hour's execution.

#######################################################
#######################################################
To get average running time used of a uproc:
In the uxsetenv, set :
U_GET_STAT_AVG=Y

Then in the uproc script, specify:
echo $S_STAT_AVG

The variable output will be the average time of the uproc

#######################################################
#######################################################
uxlst sta to check elapsed time of a job.
# uxlst sta
 Command : uxlst sta mu=* ses=* upr=* full

 SESSION    UPROCS     MU          ELAPSED       CPU            PAGE FAULTS
 ---------- ---------- ----------  -----------   -----------    -----------
            BKPDATA    DA_US_U_02     00:04:10      00:00:00    000000000


The statistic info is stored in u_fseu50.dta. The uxlst sta command gives the average values for ELAPSED and CPU.
#######################################################
#######################################################
Please try to use the command:
uxerausr
to remove all of the users and recreate them; then check if this issue remains.

1. Please back up all of the users first:
$UXEXE/uxext adm user=* output=output_usr.ext

2. Clear all of the existing users
$UXEXE/uxerausr all

3. If needed, please use the following command to restore the backup
$UXEXE/uxins adm user=* input=~/sup_user.ext



The following is a brief description of the command:
#######################################################
UXERAUSR

"uxerausr must be use within the Universe environment, with the company started.
   USE THIS COMMAND WITH CARE. It will ERASE the users.
   You should execute a 'uxext adm usr' to backup the users before using this command!!"

The user root is not deleted with uxerausr.  The user 'root' must have the rights to be able to create new users. (it already does by default).
The use of the command uxerausr is not supported if the user root does not exist.
#######################################################

#######################################################
#######################################################
HDP works based on with MU dependencies and MU type.

{son, father}

MU-A depend on MU-B
A1: son
A2: son
B: father

{A, } : a "father" to see all "sons"

launch a job on father, all son will also launch the job
launch a job on B, A1 and A2 will also launch the job


{ ,B} : a "son" to see his "father"

? launch a job on son, the father will also launch the job
? launch a job on A1, B will also launch the job


{A,B} : a "son" to see all "cousins"; peer to peer

? Launch a job on one son, all other son will also lunch the job.
? Launch a job on A1, A2 will also lunch the job.

1. Build the MU dependency structure.
2. assign {A }, { B} or {AB} on to a uproc session.
3. the uproc will only run in the sons or the father  

In V6, HDP display as {M }, no "," in { } as before.
#######################################################
#######################################################
razfic fmpi
In case you have some issue with some engines status, I would recommend you to reinitialize this file.
This manipulation will reinitialize the status of the engines and not impact your production.


To do so, please load the Dollar Universe environment and log on as the Dollar Universe administrator.
(More information regarding the User & Environment is available at the bottom of this e-mail.)
-.- Stop your Dollar Universe Company:
${UXMGR}/uxshutdown

-.- Check that your company is well stopped:
Type the following unix command:
ps -ef | grep ux | grep -v cuxxm | grep -v grep
No uxioserv processes should remain alive for this company.

-.- Launch the following commands
$UXMGR/ux_raz_fic u_fmpi50 X

-.- Restart your Dollar Universe Company
${UXMGR}/uxstartup

#######################################################
#######################################################
raz_fic_dyn

Note: please shutdown the company before run the script.

$UXMGR/ux_raz_fic u_fmcm50 X
$UXMGR/ux_raz_fic u_fmcx50 X
$UXMGR/ux_raz_fic u_fmer50 X
$UXMGR/ux_raz_fic u_fmev50 X
$UXMGR/ux_raz_fic u_fmfu50 X
$UXMGR/ux_raz_fic u_fmhs50 X
$UXMGR/ux_raz_fic u_fmlc50 X
$UXMGR/ux_raz_fic u_fmlp50 X
$UXMGR/ux_raz_fic u_fmph50 X
$UXMGR/ux_raz_fic u_fmpi50 X
$UXMGR/ux_raz_fic u_fmsb50 X
$UXMGR/ux_raz_fic u_fmsp50 X
$UXMGR/ux_raz_fic u_fmtp50 X
$UXMGR/ux_raz_fic u_fseu50 X
$UXMGR/ux_raz_fic u_fecl50 X
$UXMGR/ux_raz_fic u_fecd50 X
$UXMGR/ux_raz_fic u_fppf50 X
$UXMGR/ux_raz_fic u_fmpf50 X
rm -f $UXDEX/*.dump
rm -f $UXDEX/*.jnl
rm -f $UXLEX/X*
${UXMGR}/ux_vrf_rgz_rst > ${UXLEX}/reorg.log 2>&1


%UXEXE%\uxrazfic u_fmcm50 X
%UXEXE%\uxrazfic u_fmcx50 X
%UXEXE%\uxrazfic u_fmer50 X
%UXEXE%\uxrazfic u_fmev50 X
%UXEXE%\uxrazfic u_fmfu50 X
%UXEXE%\uxrazfic u_fmhs50 X
%UXEXE%\uxrazfic u_fmlc50 X
%UXEXE%\uxrazfic u_fmlp50 X
%UXEXE%\uxrazfic u_fmph50 X
%UXEXE%\uxrazfic u_fmpi50 X
%UXEXE%\uxrazfic u_fmsb50 X
%UXEXE%\uxrazfic u_fmsp50 X
%UXEXE%\uxrazfic u_fmtp50 X
%UXEXE%\uxrazfic u_fseu50 X
%UXEXE%\uxrazfic u_fecl50 X
%UXEXE%\uxrazfic u_fecd50 X
%UXEXE%\uxrazfic u_fppf50 X
%UXEXE%\uxrazfic u_fmpf50 X
del %UXDEX%\*.dump
del %UXDEX%\*.jnl
del %UXLEX%\X*
%UXMGR%\ux_vrf_rgz_rst > %UXLEX%\reorg.log 2>&1


For uproc, session and task

%UXEXE%\uxrazfic u_fupr50 X
%UXEXE%\uxrazfic u_frup50 X
%UXEXE%\uxrazfic u_fmse50 X
%UXEXE%\uxrazfic u_fmta50 X
%UXEXE%\uxrazfic u_fmpl50 X

For outage:
u_fmfm50.dta


For 600,
It would be:

$UXEXE/uxrazfic u_fmph60 X
$UXEXE/uxrazfic u_fmcx60 X
$UXEXE/uxrazfic u_fmfu60 X
$UXEXE/uxrazfic u_fmsb60 X
$UXEXE/uxrazfic u_fmsp60 X
$UXEXE/uxrazfic u_fmtp60 X
$UXEXE/uxrazfic u_fmhs60 X
$UXEXE/uxrazfic u_fmpi60 X

$UXEXE/uxrazfic u_fmcm60 X
$UXEXE/uxrazfic u_fmcx60 X
$UXEXE/uxrazfic u_fmer60 X
$UXEXE/uxrazfic u_fmev60 X
$UXEXE/uxrazfic u_fmfu60 X
$UXEXE/uxrazfic u_fmhs60 X
$UXEXE/uxrazfic u_fmlc60 X
$UXEXE/uxrazfic u_fmlp60 X
$UXEXE/uxrazfic u_fmph60 X
$UXEXE/uxrazfic u_fmpi60 X
$UXEXE/uxrazfic u_fmsb60 X
$UXEXE/uxrazfic u_fmsp60 X
$UXEXE/uxrazfic u_fmtp60 X
$UXEXE/uxrazfic u_fseu60 X
$UXEXE/uxrazfic u_fecl60 X
$UXEXE/uxrazfic u_fecd60 X
$UXEXE/uxrazfic u_fppf60 X
$UXEXE/uxrazfic u_fmpf60 X

%UXEXE%\uxrazfic u_fmph60 X
%UXEXE%\uxrazfic u_fmcx60 X
%UXEXE%\uxrazfic u_fmfu60 X
%UXEXE%\uxrazfic u_fmsb60 X
%UXEXE%\uxrazfic u_fmsp60 X
%UXEXE%\uxrazfic u_fmtp60 X
%UXEXE%\uxrazfic u_fmhs60 X
%UXEXE%\uxrazfic u_fmpi60 X

%UXEXE%\uxrazfic u_fmcm60 X
%UXEXE%\uxrazfic u_fmcx60 X
%UXEXE%\uxrazfic u_fmer60 X
%UXEXE%\uxrazfic u_fmev60 X
%UXEXE%\uxrazfic u_fmfu60 X
%UXEXE%\uxrazfic u_fmhs60 X
%UXEXE%\uxrazfic u_fmlc60 X
%UXEXE%\uxrazfic u_fmlp60 X
%UXEXE%\uxrazfic u_fmph60 X
%UXEXE%\uxrazfic u_fmpi60 X
%UXEXE%\uxrazfic u_fmsb60 X
%UXEXE%\uxrazfic u_fmsp60 X
%UXEXE%\uxrazfic u_fmtp60 X
%UXEXE%\uxrazfic u_fseu60 X
%UXEXE%\uxrazfic u_fecl60 X
%UXEXE%\uxrazfic u_fecd60 X
%UXEXE%\uxrazfic u_fppf60 X
%UXEXE%\uxrazfic u_fmpf60 X

Online reorg only:
$UXEXE/uxrgz UNI SOC= NODE= EXP/SIM/INT/APP  ALL/DYN/FILE_NM= 
default: DYN

offline reorg
$UXEXE/unireorg
#######################################################
Only job records,

Please note that after this procedure the current execution, history trace, future launch and event wait records will be removed. All of the launches generated from scheduled tasks will be automatically recreated.

(a)	Prerequisites
You need to load the Dollar Universe environment and log on as the Dollar Universe administrator.

(b)	Stop your Dollar Universe Company
${UXMGR}/uxshutdown

(c)	Check that your company is well stopped
Type the following unix command:
ps -ef | grep ux | grep -v cuxxm | grep -v grep
No uxioserv processes should remain alive for this company.

(d)	Launch the following commands

$UXMGR/ux_raz_fic u_fmhs50 X
$UXMGR/ux_raz_fic u_fmph50 X
$UXMGR/ux_raz_fic u_fmcx50 X
$UXMGR/ux_raz_fic u_fmfu50 X
$UXMGR/ux_raz_fic u_fmsb50 X
$UXMGR/ux_raz_fic u_fmsp50 X
$UXMGR/ux_raz_fic u_fmtp50 X
$UXMGR/ux_raz_fic u_fmpi50 X
${UXMGR}/ux_vrf_rgz_rst > ${UXLEX}/reorg.log 2>&1

(e)	Restart your Dollar Universe Company
${UXMGR}/uxstartup


%UXEXE%\uxrazfic u_fmhs50 X
%UXEXE%\uxrazfic u_fmph50 X
%UXEXE%\uxrazfic u_fmcx50 X
%UXEXE%\uxrazfic u_fmfu50 X
%UXEXE%\uxrazfic u_fmpi50 X
%UXEXE%\uxrazfic u_fmsb50 X
%UXEXE%\uxrazfic u_fmsp50 X
%UXEXE%\uxrazfic u_fmtp50 X
%UXMGR%\ux_vrf_rgz_rst > %UXLEX%\reorg.log 2>&1


$UXMGR/ux_raz_fic u_fmsb50 X
$UXMGR/ux_raz_fic u_fmsp50 X
$UXMGR/ux_raz_fic u_fmtp50 X

%UXEXE%\uxrazfic u_fmsb50 X
%UXEXE%\uxrazfic u_fmsp50 X
%UXEXE%\uxrazfic u_fmtp50 X

%UXEXE%\uxrazfic u_fmcx50 X
%UXEXE%\uxrazfic u_fmfu50 X

$UXMGR/ux_raz_fic u_fmcx50 X
$UXMGR/ux_raz_fic u_fmfu50 X

%UXEXE%\uxrazfic u_fmhs50 X
%UXEXE%\uxrazfic u_fmph50 X

$UXMGR/ux_raz_fic u_fmhs50 X
$UXMGR/ux_raz_fic u_fmph50 X

u_ftru50.dta contains the HDP definition. After dump, it should be aviable in FLS. Use it to create necessary MUs.

#######################################################
$UXMGR/ux_raz_fic u_frrv50 

To reinitialize the resource data files:

resource definitions
$UXMGR/ux_raz_fic u_frra50   <-- no need to do this file
$UXMGR/ux_raz_fic u_frre50

For V6, u_frra60 does not exist anymore; and frrv60 is in every area. 

dynamic resource data 
$UXMGR/ux_raz_fic u_frrv50
$UXMGR/ux_raz_fic u_fmqr50
$UXMGR/ux_raz_fic u_fmeq50 
$UXMGR/ux_raz_fic u_fmqp50 
#######################################################
razfic on VMS
There is no razfic on VMS, just simply shutdown $U, delete the data files, and restart. the date files will be recreated.
#######################################################
-- Reorganization on Windows
To do so, please load the Dollar Universe environment and log on as the Dollar Universe administrator.
(More information regarding the User & Environment is available at the bottom of this e-mail.)
-.- Stop your Dollar Universe Company:
%UXMGR%\uxshutdown

-.- Check that your company is well stopped:
In the Windows services panel or through a netstat please check if your
 Univer$e <Company Name>_IO_<area> services are well stopped.

-.- Launch the following commands
%UXMGR%\ux_vrf_rgz_rst > %UXLEX%\reorg.log 2>&1

-.- Check the error message you get in the reorg.log file.
Send the log file to the support.

-.- Restart your Dollar Universe Company
%UXMGR%\uxstartup


-- Reinitialization :
In case this issue need to be quickly fixed we would recommend you to reinitialize the u_fmhs file :
To do so, please load the Dollar Universe environment and log on as the Dollar Universe administrator.
(More information regarding the User & Environment is available at the bottom of this e-mail.)
-.- Stop your Dollar Universe Company:
%UXMGR%\uxshutdown

-.- Check that your company is well stopped:
In the Windows services panel or through a netstat please check if your
 Univer$e <Company Name>_IO_<area> services are well stopped.

-.- Launch the following commands
The impact of this manipulation will be the deletion of all the previous history traces of your production.
%UXEXE%\uxrazfic u_fmph50 X
%UXEXE%\uxrazfic u_fmhs50 X

-.- Restart your Dollar Universe Company
%UXMGR%\uxstartup


-- Reorganization on Unix
Please load the Dollar Universe environment and log on as the Dollar Universe administrator.
(More information regarding the User & Environment is available at the bottom of this e-mail.)
-.- Stop your Dollar Universe Company:
${UXMGR}/uxshutdown

-.- Check that your company is well stopped:
Type the following unix command:
ps -ef | grep ux | grep -v cuxxm | grep -v grep
No uxioserv processes should remain alive for this company.

-.- Launch the following commands
${UXMGR}/ux_vrf_rgz_rst > ${UXLEX}/reorg.log 2>&1
(ksh synthax)

-.- Check the error message you get in the reorg.log file.
In case you have some error message please send the log file to the support.

-.- Restart your Dollar Universe company
${UXMGR}/uxstartup

#######################################################
#######################################################
Reporter server will listen on a TCP port. When the reporter uproc was launched, it will connect to the reporter server. Then, the reporter server will connect to different IO server to gather info from different nodes.

Since the reporter server is on the node itowc03 and it will try to connect to the IO server on itomco00 to gather information, you need to add the proxy for the admin user from the node itowc03.

On node itomco00, the proxy should be modified as the following:
1. Load the Dollar Universe Environment
2. $UXEXE/setproxy REP itowtc03 "*" admin univa
3. $UXEXE/lstproxy
4. $UXEXE/loadproxy_io itomco00 FDXP01 X
5. restart the Dollar Universe Company
6. restart the reporter server

For each new node you need to get report, you have to follow the 2 steps:
1.  add a proxy entry on the new node to allow the connection from the reporter server on itowc03
2. add a "REN"  license entry for the new node in the /ReporterServer/mgr/u_fali01.txt file

#######################################################
#######################################################
Three things to watch out during creating a uproc
1. never use the "sudo su -c" in the uproc script to changed users. Instead, create a $U user to launch it or use a provoked task to change the user. 
2. use "#!/bin/ksh" specify the shell in the scrpit
3. alwasy use "exit" to explicitly specify the return code.

#######################################################
#######################################################
Engine User

In the uxlnmSCHD2O.dat, the engine user must exist in the Dollar Universe Company and in the system.

/TABLE="LNM_SCHD2O"/NAME="S_USER_AUTOMATE"/VALUE="uniesos"

Otherwise, the engines can not be started.

<< 2004-09-07 16:33:08 0018176/uxstratm        /uni_getuai          /134710259 - getpwnam
<< 2004-09-07 16:33:08 0018176/uxstratm        /U_UATM              /134448490 - %UNI_-E-U_ATMAFFERR, Unsuccessful

#######################################################
#######################################################
 Creating a launch via the uxordre command on a disabled task creates a suspended launch by default ;
 if the logical name U_WRITE_HELD'AREA' is set to 'N', no launch is created.

1. Shutdown the Company

2. Add the following the following line at the bottom of the file:
/TABLE="LNM_AVALID"/NAME="U_WRITE_HELDX"/VALUE="N"

3. Restart the Company.

# ./uxordre upr=a0 mu=da_us_u_05
(This task has been disabled)

If you do not want the disabled launches to be displayed, and don't want to lose a launch, when the task is enabled, you can use the following configuration :
U_WRITE_HELD'area'=N
U_HOLD_IM'area'=Y

For example :
/TABLE="LNM_TEST50"/NAME="U_WRITE_HELDX"/VALUE="N"
/TABLE="LNM_TEST50"/NAME="U_HOLD_IMX"/VALUE="Y"


In $U V6, a task has 3 status enabled, simulated and disabled. If the task is in simulated mode, it will create launch in disabled mode. If you enable the task from the simulated status, it will not create the same launch again. 
In V6, all created launches are displayed.

#######################################################
#######################################################
Lauches creating by CAL
CAL checks each task at the end of its launch window. If a task is disabled, when it is enabled again, a new launch will not be created  until the next launch window end.

So the first launch may have to be created manually.

#######################################################
#######################################################

-- Disable the CDJ UNIX
==========================================================================
If you do not use the Graphic Job Monitor you have the possibility to disable the CDJ server:
-.- Define the U_CDJ_DISABLE variable in the uxsetenv files :
(These files are located in the zzz/mgr/ directory)
- uxsetenv and uxsetenv_ksh
U_CDJ_DISABLE=Y;export U_CDJ_DISABLE
- uxsetenv_csh:
setenv U_CDJ_DISABLE Y
-.- Comment the startup of the cdj server out :
Comment out the following lines of the ${UXMGR}/uxstartup_gen file (usually around line 100) :
nohup $UXEXE/uxcdjsrv  $SOCIETE X $NOEUD  >$UXLEX/uxcdjsrv.log 2>&1 &
nohup $UXEXE/uxcdjsrv  $SOCIETE S $NOEUD  >$UXLSI/uxcdjsrv.log 2>&1 &
nohup $UXEXE/uxcdjsrv  $SOCIETE I $NOEUD  >$UXLIN/uxcdjsrv.log 2>&1 &
nohup $UXEXE/uxcdjsrv  $SOCIETE A $NOEUD  >$UXLAP/uxcdjsrv.log 2>&1 &

-.- Get the modification taken in account (You can also wait until the next stop/restart of Dollar Universe).
- Then please reload your environment
In Korn Shell or Bourne Shell (ksh or sh) :
. zzz/mgr/uxsetenv
Warning the space between the dot and the slash is mandatory.
In C-Shell (csh) :
source zzz/mgr/uxsetenv_csh
- Stop and restart Dollar Universe
${UXMGR}/uxshutdown
${UXMGR}/uxstartup

#######################################################
#######################################################
-- Turn the CDJ trace mode on (UNIX)
==========================================================================
The traces did not provide us enough information, please turn the CDJ trace mode on.
-.- Define the U_CDJ_LOG and U_SG_LOG variables in the uxsetenv files :
(These files are located in the zzz/mgr/ directory)
- uxsetenv and uxsetenv_ksh
U_CDJ_LOG=${UXLEX}/trace_cdj_srv.log;export U_CDJ_LOG

#U_SG_LOG is on the client side.
U_SG_LOG=${UXLEX}/trace_cdj_client.log;export U_SG_LOG
- uxsetenv_csh:
setenv U_CDJ_LOG ${UXLEX}/trace_cdj_srv.log
setenv U_SG_LOG ${UXLEX}/trace_cdj_client.log

-.- Get the modification taken in account
- Then please reload your environment
In Korn Shell or Bourne Shell (ksh or sh) :
. zzz/mgr/uxsetenv
Warning the space between the dot and the slash is mandatory.
In C-Shell (csh) :
source zzz/mgr/uxsetenv_csh
- Stop and restart Dollar Universe
${UXMGR}/uxshutdown
${UXMGR}/uxstartup

Then please redo the same manipulation and then send us the result of the uxtrace procedure or the following logs
(${UXLEX}/trace_cdj_srv.log, ${UXLEX}/trace_cdj_client.log universe.log uxcdjsrv.log and uxioserv.log)
==========================================================================
-- Turn the CDJ trace mode on (WIN)
==========================================================================
The traces did not provide us enough information, please turn the CDJ trace mode on.

We will consider that you will put the log in the exp\log directory of your Dollar Universe company which is located in :
c:\Universe\QCL500\exp\log
You will need to customize this variable if necessary.

-.- Define the U_CDJ_LOG and U_SG_LOG variables in the uxsetenv and the def file :
- uxsetenv.bat (located in the zzz/mgr/directory)
set U_CDJ_LOG=c:\Universe\QCL500\exp\log\trace_cdj_srv.log
set U_SG_LOG=c:\Universe\QCL500\exp\log\trace_cdj_client.log

- UNIVERSE.def and <Dollar Universe Company Name>.def
U_CDJ_LOG        c:\Universe\QCL500\exp\log\trace_cdj_srv.log
U_SG_LOG         c:\Universe\QCL500\exp\log\trace_cdj_client.log

-.- Get the modification taken in account
- Stop and restart Dollar Universe

Then when this issue reoccurs, please send us the result of the uxtrace procedure and the following logs
c:\Universe\QCL500\exp\log\trace_cdj_srv.log c:\Universe\QCL500\exp\log\trace_cdj_client.log

#######################################################
#######################################################

-- Turn the cluster mode on
==========================================================================
-.- Define the U_CLUSTER variable in the uxsetenv files :
(These files are located in the zzz/mgr/ directory)
- uxsetenv and uxsetenv_ksh
U_CLUSTER=Y;export U_CLUSTER
- uxsetenv_csh:
setenv U_CLUSTER Y

-.- Get the modification taken in account
- Then please reload your environment
In Korn Shell or Bourne Shell (ksh or sh) :
. zzz/mgr/uxsetenv
Warning the space between the dot and the slash is mandatory.
In C-Shell (csh) :
source zzz/mgr/uxsetenv_csh
- Stop and restart Dollar Universe
${UXMGR}/uxshutdown
${UXMGR}/uxstartup

#######################################################
#######################################################

-- Trun on the audit trail mode
==========================================================================
-.- Define the U_LOG_TRANS variable in the uxsetenv files :
(These files are located in the zzz/mgr/ directory)
- uxsetenv and uxsetenv_ksh
U_LOG_TRANS=Y;export U_LOG_TRANS
- uxsetenv_csh:
setenv U_LOG_TRANS Y

-.- Get the modification taken in account
- Then please reload your environment
In Korn Shell or Bourne Shell (ksh or sh) :
. zzz/mgr/uxsetenv
Warning the space between the dot and the slash is mandatory.
In C-Shell (csh) :
source zzz/mgr/uxsetenv_csh
- Stop and restart Dollar Universe
${UXMGR}/uxshutdown
${UXMGR}/uxstartup

-.- The effects
After turning on the audit trace option, a uxiotrns.log will be created in the log directory of each area.
==========================================================================

#######################################################
#######################################################
The following error are generted only when new jobs are lunched:

<< 2004-09-19 05:41:01 0062900/uxlst           /u_get_alias_srv     /000000000 - file /dld01/dev/projet/m_v500/uxsrc/srvio/u_get_servname.c/line 362 : error reading /opt/app/universe/KAER50/mgr/uxsrsrv.alias file
<< 2004-09-19 05:41:01 0052308/uxjobend        /u_get_alias_srv     /000000000 - file /dld01/dev/projet/m_v500/uxsrc/srvio/u_get_servname.c/line 362 : error reading /opt/app/universe/KAER50/mgr/uxsrsrv.alias file
<< 2004-09-19 05:41:01 0038714/uxjobinit       /u_get_alias_srv     /000000000 - file /dld01/dev/projet/m_v500/uxsrc/srvio/u_get_servname.c/line 362 : error reading /opt/app/universe/KAER50/mgr/uxsrsrv.alias file
<< 2004-09-19 05:41:02 0038720/uxset           /u_get_alias_srv     /000000000 - file /dld01/dev/projet/m_v500/uxsrc/srvio/u_get_servname.c/line 362 : error reading /opt/app/universe/KAER50/mgr/uxsrsrv.alias file

It could be caused by inproperly loaded Environment. Let them do the following test. Then the problem is gone.
1. Please shutdown the Dollar Universe Company
2. Load the Environment
3. Restart the Company
4. Please create a testing uproc with script:
exit 0
5. Launch the uproc, and check if there are new error messages generated?

##################################################################
##################################################################
On HPUX, during $U installation, sometimes the disk space check will fail even there is enough space available. To disable the check, define :
UXVRFSIZE=N 
export UXVRFSIZE

in the environment

##################################################################
##################################################################
Clustered Dollar Universe Company (the same Company name, different Node name on the same physical host) can not be configured to use DQM on one of them and others not. They have to all use DQM or all not use DQM. 
The Launcher will detect the link /etc/UNIVERSE_DQM_[CompanyName] at its startup. If the link exists, it will use DQM and try to connect it on its own IP (Cluster mode). If no DQM for this instance, all launches will be failed. 
However, they can use a different DQM server for each Company. With the $U_CLUSTER defined, the DQM server will only listen on its own IP, instead of *.DQM. Hence, the uxsrsrv.alias and /etc/services do not need to be modified.

##################################################################
##################################################################
To install Publisher, first edit the installation scripts (3 of them) to add the path to java commands. It also requires X-server.
The Publisher including : server, batch client and the GUI.

It use the licenses: DOC in u_fali02.txt and DEN in u_fali01.txt both in the Publisher/mgr directory.

It will use ICS.

# lstproxy

SIO proxy file : /apps/du/QCL500/mgr/u_ioproxy.dta (5 def)

SYSTEM  U_NODE        GROUPNAME            USERNAME              UNIVERSE_USERNAME
----------------------------------------------------------------------------------
DOC     *             *                    *                     univa
REP     DA_US_U_05    *                    univa                 univa
UNX     *             *                    *                     *SAME (*)
W32     *             *                    *                     univa
WEB     *             *                    *                     univd

The result will be HTML or RTF files.
The Publisher GUI is better installed on a Windows node.

Publisher server contact different nodes and company through ICS. It is necessary to define all of the nodes in the uxsrsrv.sck file of the ICS.
The target node is read from the node table of the reference node. If the target node is not defined in the default reference node, change the reference node to one that has the target node defined in its node table. The reference node need to be defined in the uxsrsrv.sck file of ICS, or even the uxsrxrv.sck file of the Publisher.
##################################################################
##################################################################
The script to relink the library link the binaries :
$daal
durlk

To see it, check "alias"

##################################################################
##################################################################
The following message means the uxdqmsrv could not find the port to listen. Possible reason the uxsrsrv.alias file is not matching to the /etc/services; e.g. the alias used in the uxsrsrv.alias is not found in the /etc/services file.
<< 2004-10-04 15:12:11 0006474/uxdqmsrv        /_get_port_nb        /000000000 - Pid 6474 : Soc QCL500 : Node support5 : Esp X : Srv 4 > SckId 0

##################################################################
##################################################################
...........uxset step nn
The command uxset step defines recovery steps within the uproc's procedure. These steps may provide checkpoints from which the procedure may be restarted after an incident, without re-executing the entire uproc.

To restart an aborted jobs, the mechanism that take into account $S_NUMJALON, has to be implemented in the uproc.  
e.g.

When relaunching the job from step 3, the uproc will be start with the variable $S_NUMJALON=3, and hence, the "while" loop will run directly from STEP3()

##################################################################
##################################################################
Recommended patches on VMS: 

After SPRE0021D:

FX24150: internal script on VMS can not be opened or editted from a remote node.

FX24037 and FX24148. 

FX24033a: If you use uxordre or are using VMS cluster, please also install the FX24033a

FX24034 : If you are using the VT interface, please install the FX24034.

If in doubt, just apply all of the mandatory patches on the ftp site.

##################################################################
##################################################################
For VMS SPRE0021D, if the external script is not saved in the same physical disk as SYS$LOGIN (U_TMP_PATH), the external script will be delted after editting. 

U_TMP_PATH on VMS (SYS$LOGIN ) 

On VMS, the Temporary directory of Dollar Universe is in SYS$LOGIN.

SYS$LOGIN definition  (in french sorry) :

Quelques noms logiques "système": 

SYS $ LOGIN pointe sur le répertoire par défaut au login


GANAC1 $ SHOW LOGICAL SYS$LOGIN
SYS$LOGIN = "DISK$USER:[E231]" 
(LNM$JOB_810898B0)

So, we think that the IO Agent uses the SYS$LOGIN of the Company startup user.
If you change the SYS$LOGIN of this user using the right DISK, it should work (I guess).

You can change the SYS$LOGIN of the user used to start Dollar Universe from MC AUTHORIZE.
Change the SYS$LOGIN to point on the same DISK than external scripts.
It should work after.

##################################################################
##################################################################
The ownership of a uproc script  after transfer and distribution between UNIX and UNIX.

local upr tranfer, e.g. from A->X, is done by ./cuxxmuproc, which has the ownership of the user who started it.
zwa       5609     1  1 14:43 pts/0    00:00:00 ./cuxxmuproc MNT500 DA_US_U_02 A
So the resulted upr will have 
-rwxr-xr-x    1 zwa      da              7 Oct 12 14:44 333.000

IO will update the data file related to the upr and cuxxmuproc will create the uproc script file under $UXPEX

When doing the uproc tranfer from a remote node, the IO will create the records and the uxcmdsrv will create the uproc script file under $UXPEX.

If the transfer is done from a remote UNIX node, the new ownership will determined by the uxcmdsrv process? The original ownership is not kept even with SPRE0025.

However, the ownership of a uproc after transfer should not be significant, since the uproc is supposed to be modified first in the APP then transfered to other area.

With SPRE0025, the original uproc script ownership is kept after distribution from UNIX to UNIX.

To have the set uid bit for the following process, in V500, to have the univa own all uprocs script, no mater how you creat it,  create remotely (uxcmdsrv), or create locally (cuxxmuproc), distribution (uxech).




#############################################################################
#############################################################################
Dynamic will only work on newly created records. Old records will not be touched.
If the variable , U_TRACE_PURGE=Y, is defined, the log of the dynamic purge will be writtin into the ord log.

When the variables  are set, the unchecked TIME OVERRUN and unchecked disabled launch not within the "keeping days" are deleted.
U_PURGE_NOLAUNCH
U_PURGE_DISABLE 

Added the following entry in the uxsetenv file:

U_DYNAMIC_PURGE=Y
export U_DYNAMIC_PURGE
U_RETENTION_DELAY=010:00:00
export U_RETENTION_DELAY
U_RETENTION_DELAY_COMPLETED=003:00:00
export U_RETENTION_DELAY_COMPLETED
U_RETENTION_DELAY_ABORTED=005:00:00
export U_RETENTION_DELAY_ABORTED
U_RETENTION_DELAY_REFUSED=007:00:00
export U_RETENTION_DELAY_REFUSED
U_RETENTION_DELAY_TIME_OVERRUN=006:00:00
export U_RETENTION_DELAY_TIME_OVERRUN
U_RETENTION_DELAY_SUSPENDED=000:00:00
export U_RETENTION_DELAY_SUSPENDED


Modified the system time to 07/22/2004.
Created 3 launches:
TIME_OVERRUN
COMPLETED
ABORTED

--modified the system date to 07/26/2004, the COMPLETED job got removed.
--modified the system date to 07/27/2004, The ABORTED job got removed.
--modified the system date to 07/28/2004, The TIME_OVERRUN job got removed.

...........To check if the online purge is enabled.

Normally, the date of the purge is saved in the ¿fmsb¿ for each terminated job (Completed, Aborted, Refused..). I checked quickly in v500. In the u_fmsb file for a terminated job and if the online purge is activated, you will find at the end of the record:

 

PSSSSSSYYYYMMDDHHMMSS_________

 

Where :

-          P is a code on one character seems Purge (this code is used also for the SPV functionality)

-          SSSSSS is the number of second. Used, I think, only for the SPV

-          YYYYMMSSHHMMSS the date and the hour of purge. At this date, the Launcher will purge this job from sb. This date should be the same than another one in the same record (53 characters from the beginning of the line), this date is used by the launcher during its ¿fifo¿ algorithmic.

-          _______ 9 blanks just before the end of the record (line).


#############################################################################
#############################################################################
IU_RTS on VMS, 

Hi, I am testing IU_RTS on VMS. It seems to run but I have the following concerns:
1) It looks like only the functional engines are stopped: cal exc laun. What about the IOserver, CDJ server, and others?


The VMS configuration is a bit more complicated than the unix one.
On a VMS cluster, it's not possible to shutdown the exchanger for example.
On a VMS cluster, there is no simple way to stop all the IO servers.
This explains why only the engines are stopped :(


2) This may be a result of not shutting down all engines: I got the message
"U_FMCX50.001 File currently locked by another user"
for several files.
What is the impact of this ?


If no Windows client accesses the VMS when the IU_RTS is running, the access error message should not appear.

This should be fixe in the next release of the IU0022X on VMS. This release of the IU_RTS will allow the definition of a S_STANDALONE_IO variable to Y and then force the stop of the IO servers (only to be used in a non cluster environment).

But to make everything simple, the VT interfaces do not use the IO servers on VMS but access directly the datafiles through RMS. Therefore, even if the IO server are shutdowned, different files may still be locked :(

If a file is locked, it's reorganization is skipped.


3) Areas: do we need to schedule this uproc in all 4 areas?

Yes you need to schedule the uproc in the used areas.

##################################################################
##################################################################
To set variable in Windows

set s=10
echo %s%
##################################################################
##################################################################
uxset var will carry over the variables defined during the launch one step to the next uproc in a session. 

Note: Even the variable values are modified within the first uproc, the second uproc still get the values defined during the launch of the session. 

uxset parm : to pass the execution results to the next uproc within the session. the transfered parm can be accessed with $1, $2, under UNIX,%1% for Windows, or S_P1, ..., S_P30 with Dollar Universe form.

e.g. 
Within the 1st Uproc:
var1=10
var2=test
$UXEXE/uxset parm "$var1"  "$var2"

In the 2nd uproc, 
echo "parm 1 is " $1
echo "parm 2 is " $2

Result:
parm 1 is  10
parm 2 is  test

Another example:
Sorry, we could not check customers' scripts. Nevertheless, we have built a demo session to show you how to use the "uxset var" and "uxset parm" commands. Please insert the uprocs and the session for case 39791 and launch them to check the result. 

1. uxset var
In the 3 uprocs, 2 variables are defined : var1 and var2.

Within the first uproc, 
var1=999  
var2=init_var2

In the second and third uprocs,
var1=0 
var2=""

A "uxset var" is issued within the 39791-1, so, in the job log of 39791-2, the var1=999 and var2=init_var2. The variables have been transfered from 39791-1 to 39791-2. There is no "uxset var" in 39791-2, therefore in the job log of 39791-3, the var1=0 and var2="". To pass the var1=999 and var2=init_var2 to 39791-3, please put a "uxset var" in 39791-3.

2. uxset parm
The uxset parm commands are issued in 39791-1, the execution result of var1 and var2 are transfered as parameters. In 39791-2, the parameters are read with $1 and $2.


For Windows:


D:\du\510\standard\TST511\exec>uxshw upr app upr=UXSET_VAR*
 Command : uxshw upr app upr=UXSET_VAR* vupr=* partage

 TYPE  | upr

 ITEMS | upr          : UXSET_VAR1
       | vupr         : 001
       | class        :
       | clfil        :
       | label        : uxset var, uxset parm, test
       | dom          : I
       | appl         : U_
       | upt          : CL_INT
       | fperiod      : n
       | memo         : n
       | nbper        : 0
       | incclass          : (  )
       | launchvar         : (
                          [
                          varname      : var1
                          vvalue       : 11
                          vtype        : Q
                          vformat      :
                          valmin       : 0
                          valmax       : 99
                          ]


                          [
                          varname      : var2
                          vvalue       : sss
                          vtype        : T
                          vformat      : 100
                          valmin       :
                          valmax       :
                          ]

                        )
       | depcon            : (  )
       | inccon            : (  )
       | rescon            : (  )
       | termins           : (  )
       | formula           : (  )
       | sap_xbp2          : (  )
       | sap_xbp2_step     : (  )
       | sap_xbp2_step_pr  : (  )
       | sap_xbp2_step_ar  : (  )
       | sap_pchain        : (  )
       | sap_ipack         : (  )
       | ftp_get           : (  )
       | ftp_put           : (  )
       | script       :

==================================================


set var1=0
set var2=t

echo var1=0
echo var2=t

%UXEXE%\uxset var
%UXEXE%\uxset parm %var2%

echo %UXEXE%\uxset var
echo %UXEXE%\uxset parm %var2%

set resexe=0
==================================================


 TYPE  | upr

 ITEMS | upr          : UXSET_VAR2
       | vupr         : 001
       | class        :
       | clfil        :
       | label        : uxset var, uxset parm test
       | dom          : I
       | appl         : U_
       | upt          : CL_INT
       | fperiod      : n
       | memo         : n
       | nbper        : 0
       | incclass          : (  )
       | launchvar         : (
                          [
                          varname      : var1
                          vvalue       : 22
                          vtype        : Q
                          vformat      :
                          valmin       : 0
                          valmax       : 99
                          ]


                          [
                          varname      : var2
                          vvalue       : aaa
                          vtype        : T
                          vformat      : 100
                          valmin       :
                          valmax       :
                          ]

                        )
       | depcon            : (  )
       | inccon            : (  )
       | rescon            : (  )
       | termins           : (  )
       | formula           : (  )
       | sap_xbp2          : (  )
       | sap_xbp2_step     : (  )
       | sap_xbp2_step_pr  : (  )
       | sap_xbp2_step_ar  : (  )
       | sap_pchain        : (  )
       | sap_ipack         : (  )
       | ftp_get           : (  )
       | ftp_put           : (  )
       | script       :

==================================================
echo var1 is : %var1%
echo var2 is S_P1: %S_P1%

set resexe=0
==================================================

D:\du\510\standard\TST511\exec>uxshw ses app ses=UXSET_VAR*
 Command : uxshw ses app ses=UXSET_VAR* vses=* lst

 TYPE  | ses

 ITEMS | ses          : UXSET_VAR
       | vses         : 001
       | list         :
                      | upr  : UXSET_VAR1
                      | upr  : UXSET_VAR2
       |




##################################################################
##################################################################
In a MS WORD doc, use ctrl-shift-n to become "Normal" font from a style ,e.g. "Heading 2"

##################################################################
##################################################################
...........changing OS time
For Dollar Universe itself, you only need to stop and restart the launcher and calculator.

However, for your scheduled tasks, it may have different impacts.
When changing the time to the future, you may have some TIME OVERRUNs.

When changing the time to some time ago, you may have to update the calendar also.

For example, the time was changed to 2005 and you want to change it back to 2004.
After you changed it to 2005, restarted the LAN and CAL, the new launches was recalculated for 2005.
After you changed it back to 2004, restarted the LAN and CAL, no new launches will be scheduled since the existing launches are for 2005. Therefore, until 2005, no new launches will be scheduled.

To force the calculator to recalculate the launches, you can update the calendar it used, e.g. to modify a holiday. Please note that if you have multiple calendars defined, make sure you update the right one.

..........."outage days" in calendar

You may see one message per outage task.

<< 2004-12-06 18:33:10 0012371/uxcal           /GACALC32            /134450698 - %UNI_-E-U_EGACALC3209,  Year out of Calen

The message appears in the following 3 situations:
1. after defining the first outage day;
2. the current outage day is removed;
3. there are no outage days defined.

To avoid this error message, you can define a outage day in far future and then add the real outage days in near future.

...........GCO 2.1 SP1 light client
The light client has to have the same Company name as the monitored nodes. Even it use the same TCP ports, it can not get remote USER list and can not update remote objects, like uprocs.

...........Dollar Universe users on VMS
Have to be in upper case; they have to match with the system users

#######################################################
#######################################################
...........resource
resource can be associated with processing date, MU, SOC and AREA

When specify PDATE in the resource name:
# uxshw res res=TEST1
 Command : uxshw res res=TEST1 esp=* mu=* pdate=* tsoc=* inf partage

 TYPE  | res

 ITEMS | res          : TEST1
       | label        :
       | fname        : TEST_!DTRAIT!                                             
       | dir          :                                                           
       | nature       : log
       | freq         : 30
       | unlock
       | qt1          : 10
       | qt2          : 10
       | clear
       |

#
You can lock the resource only for a specific processing date.

# uxhld res res=TEST1 lock pdate=20050104
 Command : uxhld res res=TEST1 lock pdate=20050104

# uxhld res res=TEST1 lock pdate=20050104
 Command : uxhld res res=TEST1 lock pdate=20050104

The launch for 20050104 will be in EVENT WAIT. But the same uproc launched with another processing date will COMPLETE.

A logical resource could be locked based on processing date. Please check the following example:
1. Defining the resource:

# uxshw res res=TEST1
 Command : uxshw res res=TEST1 esp=* mu=* pdate=* tsoc=* inf partage

 TYPE  | res

 ITEMS | res          : TEST1
       | label        :
       | fname        : TEST_!DTRAIT!
       | dir          :
       | nature       : log
       | freq         : 30
       | unlock
       | qt1          : 10
       | qt2          : 10
       | clear
       |

#

Please note the name of the resource is : TEST_!DTRAIT!

2. Then define this resource as a dependency of a uproc with "daily" functional period:

# uxshw upr app upr=38319-1
 Command : uxshw upr app upr=38319-1 vupr=* partage

 TYPE  | upr

 ITEMS | upr          : 38319-1
       | vupr         : 001
       | class        :
       | clfil        :

       | label        : sleep duration;var1;var2;return_code

       | dom          : A
       | appl         : P1
       | fperiod      : d
       | memo         : o
       | nbper        : 0
       | incclass     : (  )
       | launchvar    : (
                          [
                          varname      : duration
                          vvalue       : 0
                          vtype        : Q
                          vformat      :
                          valmin       : 0
                          valmax       : 999999999999
                          ]


                          [
                          varname      : var1
                          vvalue       : 0
                          vtype        : Q
                          vformat      :
                          valmin       : 0
                          valmax       : 999999999999
                          ]


                          [
                          varname      : var2
                          vvalue       :
                          vtype        : T
                          vformat      : 255
                          valmin       : 0
                          valmax       : 999999999999
                          ]


                          [
                          varname      : return_code
                          vvalue       : 0
                          vtype        : Q
                          vformat      :
                          valmin       : 0
                          valmax       : 999999999999
                          ]

                        )
       | depcon       : (  )
       | inccon       : (  )
       | rescon       : (
                          condno       : 01
                          res          : TEST1
                          pdate        : ( , , )
                          mu           : same
                          all
                          expected
                          nofatal
                          attrib       :
                          value        :

                          qt1          : 10
                          qt2          : 0
                          unlock
                          noverif
                        )
       | termins      : (  )
       | formula      : ( =C01 )
       | script       :

==================================================
echo "duration is " $duration
echo "var1 is " $var1
echo "var2 is " $var2
echo "#CMD# sleep $duration"
sleep $duration
exit $return_code

==================================================


#

3. Lock the resource for a specific processing date. The launch with this processing date will be in EVENT WAIT. But the launch of the same uproc with a different processing date will complete

# uxhld res res=TEST1 lock pdate=20050104


4. The quotas of 20050104 is all "0", but, on other days, the quotas are untouched.

# uxshw res res=TEST1 full pdate=20050104
 Command : uxshw res res=TEST1 full pdate=20050104 esp=* mu=* tsoc=* partage

Query Res:  TEST1    ????
Use of resource quotas
Resource: TEST1    20050104 Mode:  Exec: EXCL
--------------------------------------------------------------------------------
  Quotas maxi   Auto. Alloc.   Man. Alloc.     Remainder
 0010   0010    0000   0000    0010   0010    0000   0000
#

# uxshw res res=TEST1 full pdate=20050103
 Command : uxshw res res=TEST1 full pdate=20050103 esp=* mu=* tsoc=* partage

Query Res:  TEST1    ????
Use of resource quotas
Resource: TEST1    20050103 Mode:  Exec:
--------------------------------------------------------------------------------
  Quotas maxi   Auto. Alloc.   Man. Alloc.     Remainder
 0010   0010    0000   0000    0000   0000    0010   0010
#


5. To see all of the resource events:

# uxshw res res=TEST1 full
 Command : uxshw res res=TEST1 full esp=* mu=* pdate=* tsoc=* partage

Query Res:  TEST1    *
Use of resource quotas
Resource: TEST1    20050102 Mode:  Exec: EXCL
--------------------------------------------------------------------------------
  Quotas maxi   Auto. Alloc.   Man. Alloc.     Remainder
 0010   0010    0000   0000    0010   0010    0000   0000
Use of resource quotas
Resource: TEST1    20050103 Mode:  Exec:
--------------------------------------------------------------------------------
  Quotas maxi   Auto. Alloc.   Man. Alloc.     Remainder
 0010   0010    0000   0000    0000   0000    0010   0010
Use of resource quotas
Resource: TEST1    20050104 Mode:  Exec: EXCL
--------------------------------------------------------------------------------
  Quotas maxi   Auto. Alloc.   Man. Alloc.     Remainder
 0010   0010    0000   0000    0010   0010    0000   0000
#

6. It can be released as the following
# uxrls res res=TEST1 clear pdate=20050104


For more detailed information, please check the "Command Manual" and the "Reference Manual".

7. To purge
The command uxpre allows you to purge the records for a specific processing date :
# uxpre res res=* app  pdate=20050212
 Command : uxpre res res=* app pdate=20050212

# uxshw res full res=*
 Command : uxshw res full res=* esp=* mu=* pdate=* tsoc=* partage

Query Res:  * * * * *
Use of resource quotas
Resource: TC39007R02     Mode: EXCL Exec:
--------------------------------------------------------------------------------
  Quotas maxi   Auto. Alloc.   Man. Alloc.     Remainder
 0000   0000    0000   0000    0000   0000    0000   0000
Use of resource quotas
Resource: TC39007U01    20050213 Mode: EXCL Exec:
--------------------------------------------------------------------------------
  Quotas maxi   Auto. Alloc.   Man. Alloc.     Remainder
 0000   0000    0000   0000    0000   0000    0000   0000



The command uxpre allows you to purge the records for every processing dates :
# uxpre res res=* app  pdate=*
 Command : uxpre res res=* app pdate=*


##################################################################
##################################################################
For resource, the lock and clear operations are not compatible with quotas.

##################################################################
##################################################################
Resource reservation can reserve specific quotas of a resource on a specific processing date on a specific MU.
It can be done from both GUI and command line.

To make a reservation on a specific pdate 
uxrsv res res=TEST1 app pdate=01112005 mu=DA_US_U_02 upr=38462-1 vupr=001 qt1=10 qt2=10

To remove the reservation
uxcnr res res=TEST1 app pdate=01112005 mu=DA_US_U_02 upr=38462-1 vupr=001

The following shows 3 reservations on resource FI1_MW_BVPROD.
1). for uproc  FI1MWBBVPD on MU CL_BVPRD, qt1=99999, qt2=0
2). upr TST_RMDEP, mu CASDLSUP06 , qt1=33, qt2=0
3). upr TST_DEP, mu CASDLSUP06 , qt1=100, qt2=0

$ grep -a FI1_MW_BVPROD u_fmqp50.dta
FI1_MW_BVPROD                                 X        0001X          000CL_BVPRD  FI1MWBBVPD000999900000000000000000020100801203555                                                                                                                                                                                                                                                                                                            
FI1_MW_BVPROD                                          0001X          000CASDLSUP06TST_RMDEP 000003300000000000000000020100812175657                                                                                                                                                                                                                                                                                                            
FI1_MW_BVPROD                                          0002X          000CASDLSUP06TST_DEP   000010000000000000000000020100813112429                                                                                                                                                                                                                                                                                                            

To check for resource reservation.
uxshw res res=FI1_MW_BVPROD rsv

##################################################################
##################################################################
To display or clean job parameters
 $UXEXE/uxcleprm $S_SOCIETE X $S_NOEUD TEST

##################################################################
##################################################################
from SPRE0025, the same as uxresnod, just work on data files on remote node.
- uxclenod (new tool) follows the same principle as uxresnod but can be used to purge remote nodes
   and only accepts one argument : the node to be purged (ex : uxclenod toto) ; uxclenod uses the
   Dollar Universe environment currently loaded (variables S_SOCIETE, S_CODNOEUD and S_ESPEXE) ;
   if the specified node is not present in the node table then no purging occurs.

##################################################################
##################################################################
The fecl is the order to distribute. The fecd is the actual data to be transfered.

# cat u_fecl50.dta
                                                        2005020217414320361231235959000020                                                      000000                                                  
EMDA_US_U_05000019EVENEXECA00P1DA_US_U_02A00U_DA_US_U_05000001     DA_US_U_0238969-1   00000100001920050202173546T     DA_US_U_05          000   00002700000000000000D                                  

(The above line is a remote dependence, event generated from 38969-1 on DA_US_U_02, needs to send to 111 on DA_US_U_05. It will not show in the "Exchange Data" window)

EMDA_US_U_05000020UPROCS  A00          A00U_ 000000000000023     DA_US_U_0200000002020050202174143T     DA_US_U_05          000   00002800000000000000D                                                 

(This line is a uproc distribution request. It will show in the "Exchange Data" window)


EMDA_US_U_05000038SIDBATCHX00  DA_US_U_02X00U_DA_US_U_05000001     DA_US_U_0238969-2   00000100003820050204185453T     DA_US_U_05          000   00004600000000000000D                                 

(This line is for cross nodes session. It won't show in the "Exchange Data" window. session header: 38969-2 on DA_US_U_02, want to pass to the uproc 38969-3 on DA_US_U_05)
##################################################################
##################################################################
Default GCO2.1+SP1 with the following variables:

U_GCO_CONSOLE     YES     (GUI "light")

This will not allow local node to be shown in the GJM.
To use GCO2.1 with a full company, comment it out or change to NO

##################################################################
##################################################################
The following record from ctl means the job has been COMPLETED, then its event was manually changed to EXECUTING status.

 N6UCR_UU   N6UCR_UUR6 ARBORVB01  COMPLETED             02/15/2005 1351 02/15/2005 1402 Operator     EXECUTING    arborvb01  MPS_BATCH                       4492   100 0611198 5013744 02/04/2005 arborprd     000  000  01  3849848

The following means a relaunch of an ABORTED job, then it becames COMPLETED.

            38974-1    DA_US_U_02 ABORTED               02/17/2005 1433 02/17/2005 1433 Operator     RECOVERED    DA_US_U_02 SYS_BATCH                       1521   100         0013507 02/17/2005 univa        000  001  00  0017563

##################################################################
##################################################################
No command is available to display class events, it can only be check through the Motif interface; or through the data file: u_fmlc

##################################################################
##################################################################
In the $UXDQM/uxstartdqm, 

UXB_NBQUE_MAX="20"
export UXB_NBQUE_MAX

limit the total number of queues that can be created.

UXB_NBJOB_MAX="200"
export UXB_NBJOB_MAX

limit the total number of jobs that all queues can have.

##################################################################
##################################################################
The launchvar will not work for uxordre, it is not documented with the "uxordre help". So, you can not update the variables defined in the provoked task.
However, you can send the provoked task some parameters from command line, for example:

In V533 document, it shows the "launchvar" is available for uxordre.
# uxordre app upr=39865-1 vupr=001 mu=DA_US_U_02 param=0,sss,01/01/2005

Then, with in the uproc, you can access the parameters with $1, $2, and $3,

Please check the following job log.

==================================================
##################################################
==================================================

C00-SUPPORT-SITE DEBUT
C00-SUPPORT-SITE WSPGM-CODNOEUD DA_US_U_02
_!================================================
_!**
$!** PROCEDURE .. : 39865-1
$!** VERSION .....: 001
$!** EXECUTION .. : 0013922
_!**
$!** PROCESS DATE : 03/08/2005
_!**
_!------------------------------------------------
$!** PARAM  S_P01 = 0
$!** PARAM  S_P02 = sss
$!** PARAM  S_P03 = 01/01/2005
_!------------------------------------------------
_!**  VARIABLES
duration            :0
return_code         :0
int                 :0
txt                 :
date                :01/31/2004
_!================================================
The value of $int is  0
The value of $txt is
The value of $date is  01/31/2004
duration is  0
$1 is : 0
$2 is : sss
$3 is : 01/01/2005
#CMD# sleep 0

==================================================
##################################################
==================================================

#############################################################################
#############################################################################
<< 2005-02-25 10:25:23 0006092/UniServLnm      /UXSR_ServerMain     /000000000 - Echec des 6000 attentes d'evenement sur OpeThread
<< 2005-02-25 10:25:23 0006092/UniServLnm      /write_inet_com      /135888923 - Unknown error
	...
	...
<< 2005-02-25 23:19:37 0006092/UniServLnm      /UXSR_ServerMain     /000000000 - Echec des 6000 attentes d'evenement sur OpeThread
<< 2005-02-25 23:19:37 0002184/uxordre         /                    /134461002 - %UNI_-E-U_UENV0201, This node is unknown

After the above error, the LNM server dies, that's why "This node is unknown". 
This issue exists since v4.3, the cause is unknown and no solution. The LNM will be removed later and use IO instead. AS400 is already doing this way.

#############################################################################
#############################################################################
If the "CREATE" "DISPLAY" appear twice in the security.txt file, it will not allow either create or display of an object, for example the MU:

# --------------------------------------------------------------
#                      Management Unit Object
MANAGEMENT_UNIT=*
+
CREATE
DISPLAY
CREATE
DISPLAY
UPDATE
DELETE_OBJ
DISTRIBUTE
MANAGE_EXCHANGEDATA
USE_AS_PREREQUISITE
USE_TO_DISTRIBUTE_TO
USE_WITHIN_LAUNCH
USE_WITHIN_HDP
USE_WITHIN_TASK
USE_WITHIN_SESSION
#
# --------------------------------------------------------------

Not from command line or GUI.

#######################################################
==No so sure==
DQM shutdown need the shared memory to work, for example to find the node name. In the uxshutdown, the uxstpdqm command

/etc/UNIVERSE_DQM_${SOCIETE}/uxstpdqm ${SOCIETE} X

do not have a node name as a parameter. So it search shared memory for nodename definition. In a cluster environment, if the shared memory is not loaded, the command could shutdown the dqm server of another node. 

##################################################################
##################################################################
Form SPRE0025
 The rights on the Dollar Universe job logs can be set using a mask.
 In order to use this mask, the set effective user id must be set on the uxjobinit file.
 The root account should own uxjobinit.
 chown root $UXEXE/uxjobinit
 chmod u+s $UXEXE/uxjobinit

 To define the mask, set and export the U_MASK_LOG variable in the three $UXMGR/uxsetenv* files.
 The usage of this variable is similar to the U_MASK_UPR variable. Once the variable is set it is
 complementary with the existing rights. (Please refer to the Dollar Universe documentation for details).
 For example if you want to create the job logs with a 660 mask :
    - Add the following lines to the files $UXMGR/uxsetenv and $UXMGR/uxsetenv_ksh  :
      U_MASK_LOG="o-rwx"
      export U_MASK_LOG
    - Add the following line in the file $UXMGR/uxsetenv_csh
      setenv U_MASK_LOG "o-rwx"

 Dollar Universe needs to be stopped in order to make both modifications.

##################################################################
##################################################################
The UXRIGHT patch is :
Pre SPRE0025: FX22450B
After SPRE0025: FX22450C

##################################################################
##################################################################
FYI we had the following issue with Fedex :
Some function of the shell script were not executed with the following error message :
/var/universe/FDXP01/exp/upr/IU_RTS_V3.000[30]: /tmp/sh19073.1: cannot create

In this specific case, it was the eval function that was not executed :
eval uxio_${areacode}=`echo $nb_io`

This issue is due to a bug of the Sun Operating System.
The following sun patches correct this issue :

> >Please make sure you have following patch for solaris 8.
> >
> >Patch-ID# 110662-14
> >Keywords: unix98 ksh expand newline character pty ownership 
> >arithmetic
> >Synopsis: SunOS 5.8: ksh patch
> >Date: May/14/2004
> >
> >Please makes ure you have following patch for solaris 9.
> >
> >Patch-ID# 112964-07
> >Keywords: ksh vi control z fg
> >Synopsis
##################################################################
##################################################################
to expend the ending year of the general calendar.

%UXEXE%\uxadd  cal app mu=\" 00\" since=2010 before=2020

to define a Holiday

%UXEXE%\uxupd cal app  mu=\" 00\" dsince=08/20/2020 dbefore=08/20/2020 to=H attr=all

To extract model calendar:
uxext cal model output=/tmp/cal_model.txt

Only a model calendar can be distributed

To insert general CAL
%uxexe%\uxins cal  cible=" 00"   mu=" 00" input=EXP_cal.bin exp
##################################################################
##################################################################
Online reorganization:
D:\>%UXEXE%\uxrgz UNI  soc=MNT500  exp all

Work on Windows with SPRE0025 + FX24293
Does not exist for V500 on Linux
For V510 on Linux does not work yet, IO server in EXP crash .
##################################################################
##################################################################
On Linux, for V5.1  and V500+FX24293, the following variable is enabled for communicating with Windows cluster setttings

U_CLUSTER_NODE_DISABLED=Y
export U_CLUSTER_NODE_DISABLED

If the variable is not set, the Linux $U Company won't be able to start with error:

<< 2005-05-04 17:49:33 0016971/                /u_io_srv_main       /000000000 - Error opening IO server A service
<< 2005-05-04 17:49:33 0016971/                /u_io_srv_main       /000000000 - u_listen error : Errno syserror 98: Address already in use
<< 2005-05-04 17:49:33 0016967/                /u_io_proxy_load     /000000000 - U_IO_PROXY_FILE not defined (warning, proxies disabled)
<< 2005-05-04 17:49:33 0016967/                /u_io_srv_main       /000000000 - Error opening IO server X service
<< 2005-05-04 17:49:33 0016967/                /u_io_srv_main       /000000000 - u_listen error : Errno syserror 98: Address already in use
<< 2005-05-04 17:49:37 0016998/                /UXCMDSRV            /000000001 -  FD acquis (256,256)
<< 2005-05-04 17:49:37 0016998/uxcmdsrv        /create_inet_com     /135888915 - 31015 [??????] - Address already in use

#######################################################
u_fmlp50 contains the EVENT information. If it is damaged, if razifc_dyn maybe necessary.
The counter is in the first line of this file.
In the Versign case 48934, after razfic dyn, the counter came back as 00004xx. Still do not know why.

#######################################################

05-04-13 00:01:01 0005000/UniServOrd      /u_io_callsrv        /000000000 - u_connect error : (WinSock) : Connection refused (host [10.233.40.211])
<< 2005-04-13 00:01:01 0005000/UniServOrd      /CALL_UXIOSRV        /000000000 - (file O:\dev\projet\m_v500\uxsrc\os\u_uxiodf_11885_clo.c/line 919) u_io_callsrv(on osasprod01,ONETEL,A) returns -1


Could you please declare and export the following variable in the uxsetenv file. 
export U_RES_AVAIL_AREAS=X 
With this variable set and taken into account (after a restart of Dollar Universe)
the resources will be dealt with only for the X area.

#######################################################
To list execution history
uxlst hcx 

#######################################################
FX24284 est spécifique à la mise en place de TimeZone différents. Le readme.txt fourni est par contre vide.
Je te le copie dans ton répertoire sur transit. ok?

Pour info, procédure type:
- création une UG
- définir  Time Zone = +3 
uxsettz mu=BEP03_000N decal=+3

Pour que tu vois au niveau de l'interface, il faut définir:

- dans SOCIETE.def sous Windows: une ligne "U_TZ_MU YES"
- dans le terminal sous UNIX, avant de lancer l'interface, "export U_TZ_MU=YES"

#######################################################
        Pour une upgrade : 
uxupgrade.ksh  <Company_name>  <Company_mgr_dir_path> [NO_CONFIRMATION]  [NO_VRFY_ALL_COMP_STATUS]
        Pour un retour arrière sur une upgrade : 
uxupgrade.ksh REMOVE  <Company_name>  <Company_mgr_dir_path>  [NO_CONFIRMATION]  [NO_VRFY_ALL_COMP_STATUS]
#######################################################
HP-UX 10.20 is not supported by HP many more
http://www.hp.com/workstations/risc/standard/operating/hpux1020_transition/index.html
#######################################################
On HP-UX 10.20 , if the following errors appear:


# ./UNIVERSE
[1]     19261 
# Warning: Missing charsets in String to FontSet conversion 
Warning: Cannot convert string "-dt-interface user-medium-r-normal-s*-*-*-*-*-*-*-*-*" to type FontSet 

[1] +  Done                    ./UNIVERSE
#

........... The Answer is:
Dollar Universe uses the following MOTIF libraries :

libX11               libXm                libXt

 

In order to prevent this, we recommend the usage of the version 1.2 of Motif (Release X11R5)

To do so please make sure that 

- X11R5 is used

- libX11.sl targets libX11.1 or libX11.2 of the X11R5 release.

 

Same thing for libXm.sl
.................................
As necessary resources for a user of interface Motif, it needs:

1. the following MOTIF libraries: libX11, libXt and libXm (execpt Linux: libXp and libXaw). By default, Dollar Universe expects to find these libraries in /usr/lib. If, however, they are located elsewhere, it will be necessary to create a symbolic link in /usr/lib pointing to their actual address.
2. Compatibility packages must be installed on the 64 bits Linux, whatever the processor.

Accroding to your result of rpm -qa, it seems that the compatibility package x86_64 hasn't been installed. Please check with your system administrator for the installation. 

They may have the following error:
[root@lxx0095 exec]# ./UNIVERSE EN
./cuxxm: error while loading shared libraries: libXaw.so.7: cannot open shared object file: No such file or directory


[root@lxx0095 exec]# ./UNIVERSE EN
./cuxxm: error while loading shared libraries: libXaw.so.7: wrong ELF class: ELFCLASS64

one compatibility package to install
yum install compat-glibc.x86_64
#######################################################
#######################################################
For Windows GCO, if the registry for each profile are removed. They will be recreated automatically when restarting the GCO.
For example if the node name shows in GCO does not match the real node name, it has to be removed from the registry and the good one will be recreated.

#######################################################
#######################################################
If an optional task stays in EVENT WAIT during its launch window, it will be removed at the end of the launch window. So, there won't be any record about the launch of the optional task. The only sign would be that the next uproc in the session wonly got launched after the Optional task's launch window. 

#######################################################
An optional task is still considered even it is disabled. If disabled, and the concerned job running within the optional task window, the job won't run, since the optiontal task is disabled.
Provoked tasks and optional tasks are disabled in the same way as scheduled tasks.
The optional task is taken into account even if it is disabled.

#######################################################
Optional task & time shift

During the test, Dollar Universe gives good performance! :)

The following is my test.

The optional depends on 2 uprocs.
When it is launched in its launch window; it stays in EVENT WAIT for the 1st dependency. 
Then, shift time back (out of the launch window), and restart launcher, the optional task stay in EVENT WAIT, even the first event arrives at this time. 
Then, shift time back to the launch window, and restart the launcher, the event is considered, the Optional tast is now waiting for the second event.


#######################################################
#######################################################
java.lang.OutOfMemoryError, for WCO or Publisher

The issue is not from Dollar Universe WCO or ICS; it is from the web server. With default configuration, the web server does not allocated enough memory to run the Jave application.

For example, by the following in the environment and restart the Tomcat web server, the web server has 128M - 512M memory allocated.
CATALINA_OPTS="-Xms128m -Xmx512m"; export CATALINA_OPTS


Please check with your system administrator, and increase the memory allocation to the web server; then check if this issue remains.

#######################################################
#######################################################
On Windows, when $U submission account is using the local system account, the useralias.txt file needs the following entry:
NT_AUTHORITY        SYSTEM         mdt511a

for French OS
AUTORITE_NT   SYSTEM   sfoadmin


#######################################################
#######################################################
To disable DQM on Unix, just 
1. shutdown
2. remove the link /etc/UNIVERSE_DQM_${S_SOCIETE}
3. restart
#######################################################
#######################################################
On all Unix
When distributing user table, Dollar Universe needs to create some temporary files in the remote $UXEXE directory. After applying the uxright script, the $UXEXE will become 555. Unless the remote uxech process is running under root, the user table distribution can not be completed.

In the remote universe.log file, the following error will show up:

<< 2005-09-27 15:24:49 1876170/uxech           /DFADME32            /134578284 - %UNI_-F-U_EU_SGDS0102, Fatal error writing extraction file, please check its address


Some sample temporary files look like the following:
       129 -rw-rw-rw-   1 root     other      50535 Nov  1 10:22 USERS_TABLE_20051101_102241.SAV
       132 -rw-rw-rw-   1 root     other      50535 Nov  1 10:24 USERS_TABLE_20051101_102419.SAV

#######################################################
#######################################################
When accessing the Unix node from a GCO, the useralias.txt definitions will not be considered on the Unix node. Instead, you will have to define the Windows user directly in the Unix proxy settings.

For example in this case, you can add a line to make the proxy looks like the following:

SIO proxy file : /scheduler/NHDHHS/mgr/u_ioproxy.dta (2 def)

SYSTEM  U_NODE        GROUPNAME            USERNAME              UNIVERSE_USERNAME
----------------------------------------------------------------------------------
UNX     *             *                    *                     *SAME (*)
W32     *             *                    Paul.K.Landry         nhdhhsa 
W32     *             *                    *                     *SAME (*)

#######################################################
#######################################################

Make sure :
- you are using Windows XP
- the port number of the Dollar Universe company are defined in the services file. (located by default in %SystemRoot%\system32\drivers\etc)
- everybody has a read access on the services file.

Check the presence of the following error messages in the Dollar Universe log file (%UXLEX%\universe.log):
<< 2005-10-06 14:40:01 0003692/UniServio       /u_getport_c         /000000000 - ERROR: cannot find the port number for Company : [PSL511] node : [FRLPMJSM], server [IO] area [X]
<< 2005-10-06 14:40:01 0003692/UniServio       /u_set_paramserv     /000000000 - u_get_servname(service [IO], company [PSL511], area [X]) failed : -1
<< 2005-10-06 14:40:01 0003692/UniServio       /uxunisrvio          /000000000 - Error initializing IO server X for company "PSL511", port number not found
<< 2005-10-06 14:40:36 0003516/UniServio       /u_getport_c         /000000000 - ERROR: cannot find the port number for Company : [PSL511] node : [FRLPMJSM], server [IO] area [X]
<< 2005-10-06 14:40:36 0003516/UniServio       /u_set_paramserv     /000000000 - u_get_servname(service [IO], company [PSL511], area [X]) failed : -1
<< 2005-10-06 14:40:36 0003516/UniServio       /uxunisrvio          /000000000 - Error initializing IO server X for company "PSL511", port number not found

Create a FixServices.reg file containing :
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters]
"DataBasePath"=hex(2):25,00,53,00,79,00,73,00,74,00,65,00,6d,00,52,00,6f,00,\
  6f,00,74,00,25,00,5c,00,53,00,79,00,73,00,74,00,65,00,6d,00,33,00,32,00,5c,\
  00,64,00,72,00,69,00,76,00,65,00,72,00,73,00,5c,00,65,00,74,00,63,00,00,00
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Save the file and double click on it.

Restart the Dollar Universe company and confirm that the issue has been fixed.

#######################################################
<< 2006-01-06 19:43:17 0019275/uxord           /uxord               /137068571 - %UNI_-I-TEXTUXXM000502,   STOPPED
<< 2006-01-06 19:43:39 0019262/uxcal           /uxcal               /137068571 - %UNI_-I-TEXTUXXM000502,   STOPPED

The above log generated by running the uxend command to stop the engines.
#######################################################
The following error message normally means the Dollar Universe node name, for example the upper or lower case issue.
D:\UNIVERSE\UNVADV\exec>UXLST atm exp 
Command : uxlst atm exp all partage 

Error extracting object 
Error during operation on Launcher 
command in error!! 

If they also have this:
<< 2008-03-31 14:27:19 0006588/uxstratm        /U_UATM              /134460970 - %UNI_-E-U_EATM3451, Error opening Engine control file
<< 2008-04-02 11:06:43 0012692/Dollar_Universe /GAIOPI34            /134460970 - %UNI_-E-U_EATM3451, Error opening Engine control file

It could means that the fmpi is not good or the idx is broken, for example:
04/03/2008  12:12 AM             3,875 BUILTIN\Administrators u_fmpi50.dta
04/03/2008  12:12 AM            24,747 BUILTIN\Administrators u_fmpi50.idx_inv


#######################################################
On Windows GCO, sometimes the Calendar shows up blank, a grid issue? 
Another symptom: in WB citrix environment, the Calandar can not be opened, and shows this error message:
CopyFile failed(U:\Apps\Universe\WBDEV1\exec\msflxgrd.ocx)

Here is how to fix it. 

Close GCO GUI
Open a cmd window 
load $U envir (uxsetenv)
execute command :
regsvr32 %uxexe%\msflxgrd.ocx

#######################################################
On Windows (not happens on Unix for the moment), if you found the following error message in the universe.log :

<< 2006-02-15 12:21:20 0001604/UniServord /u_getserv_c_43 /000000000 - ERROR: cannot find the port number for Company : [COSMOT] node : [wks1177], server [11] area [A]

or the same for any others area, it means that Dollar Universe is trying to access at the PMP service and this one is not reachable (or existing).

It happens only after an upgrade in 512. (It works fine with a new 512 installation)

The solution is :

Set U_PMP_DISABLE at Y in the uxsetenv.bat and the two .def
The messages appears again if you set it only in the .def or uxsetenv.bat

This solution will be included in 5.2.1.

........... In fact, the issue exist with V512 fresh installation too.

If the above variable is not defined, the "uxset" will not work.
For example, if the following is used in the uproc script:

%UXEXE%\uxset step 00
echo "step 00"
%UXEXE%\uxset msg "lllooo"

The following error messags will show in the universe.log:

<< 2006-04-21 17:35:51 0004880/LaunchApp       /u_getserv_c_43      /000000000 - ERROR: cannot find the port number for Company : [TST511] node : [USSDMDA007], server [11] area [X]

<< 2006-04-21 17:35:51 0003120/UniServord      /u_getserv_c_43      /000000000 - ERROR: cannot find the port number for Company : [TST511] node : [USSDMDA007], server [11] area [X]

<< 2006-04-21 17:35:51 0003120/UniServord      /u_getserv_c_43      /000000000 - ERROR: cannot find the port number for Company : [TST511] node : [USSDMDA007], server [11] area [X]

<< 2006-04-21 17:35:51 0004672/uxjobinit       /u_getserv_c_43      /000000000 - ERROR: cannot find the port number for Company : [TST511] node : [USSDMDA007], server [11] area [X]

<< 2006-04-21 17:35:51 0004120/uxset           /GAAPIUSR            /134452570 - %UNI_-E-U_EGAI21B3206, Mandatory data

<< 2006-04-21 17:35:51 0005376/uxset           /GAAPIUSR            /134452570 - %UNI_-E-U_EGAI21B3206, Mandatory data

<< 2006-04-21 17:35:51 0003120/UniServord      /u_getserv_c_43      /000000000 - ERROR: cannot find the port number for Company : [TST511] node : [USSDMDA007], server [11] area [X]


And in the job log,  

UXSET UxCmd_LoadUniverse Failed


#######################################################
U_SEL_SINCE
The environment variable impact command like uxlst, uxdlt evt ... The commands will be automatically add a "SINCE" filter, even the command itself does not support a "SINCE" in its syntax.

In uxsetenv, Cisco implemented :
szSinceDate=$($UXEXE/uxtim "mm/dd/yyyy HHMM00" "$(date '+%m/%d/%Y %H%M')" "-006h00")
U_SEL_SINCE="${szSinceDate}"
export U_SEL_SINCE

The variable value is like:
02/21/2006 081500

The result is that the events before the value will not be deleted.
#######################################################
This message shows up when trying to start DQM.
<< 2006-02-22 16:41:09 0001304/uxdqmsrv        /UxosInitServerBatch /134709667 - %UNI_-I-UXOS_InvJobMax, New Maximum job limit less than old one

This happens when uninstall a V512 Company, and use the same Company and Node name for a new V500 node. This could be caused by the shared memory of V512, which could give DQM data file a different formate or bigger job limit? 
#######################################################
Now about:
<< 2006-03-01 19:14:34 0021030/uxdqmsrv        /UXOS_DemLocal_DQM_un/000000000 - RetWait -1 = waitpid ( Pid 7431 , Stat 1 ,

ABR asked MAM from where this message comes from?
Actually, DQM tries to "resynchronize" a job by its pid (waitpid command) and the pid does not exist anymore. Then, this message is written in universe.log. The pid checked is the pid of the son of DQM used to follow the submitted job.

Usually, this message appears during the start procedure of DQM, when it tries to "resynchronize" all jobs were launched before the stop of DQM. 
DQM did try to synchronize with an execution (in other words: get its current system status) and in the above case it failed.
This happens for example following a DQM restart if the job is not running anymore (and the Pid mentioned in the mail not existing on the system anymore)
It¿s more of an information than an error.
#######################################################
To use U_ANTE_UPROC to bypass the real uproc script and launch only the IU_EXIT0.ksh in the $UXMGR
#!/usr/bin/ksh

case ${S_ESPEXE} in
  A)    S_CMD_UPROC=${UXMGR}/IU_EXIT0.ksh
        MSG="Exétion àide dans l'espace d'application"
        export MSG ;;
  I)    MSG=" Exétion àide dans l'espace d.intéation"
        export MSG
        if grep -x ${S_PROCEXE} $UXMGR/list_uprocs_KO
          then
            echo "===> Uproc INCIDENTE sur requete <==="
            S_CMD_UPROC=${UXMGR}/IU_EXIT1.ksh
          else
            S_CMD_UPROC=${UXMGR}/IU_EXIT0.ksh
        fi ;;
  S)    MSG="Espace de simulation: test de l'Uproc"
        export MSG ;;
  X)    S_CMD_UPROC=${UXMGR}/IU_EXIT0.ksh
        MSG="Exétion àide"
        export MSG ;;
esac

#######################################################
How GJM will kill an executing job: 
1. the GJM will contact the IO server on the server side.

2. the launcher (main process) will kill the job, or the DQM server (main process) will kill the job if DQM is used.

3. the job is killed with a SIGTERM signal.

4. the kill is launched on the group process of the job, that is the UXORD/DQM process associated to the job ; it is not launched on the running UPROC script.


The uxend command use the same steps to stop a job as the GJM.

When the uxend stops an engine, it goes through the following steps.
1). When a uxend atm command is executed, the engine status data file is updated; 
2). the engine targeted by the command wakes up and then stops; 
3). assuming the process is running on a UNIX system, the process corresponding to the engine makes an exit.
4). the engines do not receive a kill signal when they are stopped. 

#######################################################
# uxlst prv help
Calculates the forecast workload for the indicated period.

uxlst PRV
[SOC]=        format:6c      default:S_COMPANY
[NODE]=       format:10c     default:S_NOEUD
[EXP | SIM | INT | APP]      default:S_ESPEXE
[SES]=        format:10c *
UPR=          format:10c *
MU=           format:10c *
DSINCE=       format:U_FMT_DATE
DBEFORE=      format:U_FMT_DATE
TSINCE=hhmmss
TBEFORE=hhmmss
[OUTPUT]=file_name

#######################################################
uxjobinit and uxjobend need to access the shared memory files too. The following are from the universe.log
<< 2006-03-16 08:23:03 0018260/uxjobinit       /UXIO_SetShmLnm      /134840379 - /etc/UNIVERSE_UNIV50_gmvitori
   2006-03-16 08:23:03 0018260/uxjobinit       /UXIO_SetShmLnm      /000000013 - Permission denied
<< 2006-03-16 08:23:03 0018262/uxjobend        /UXIO_SetShmLnm      /134840379 - /etc/UNIVERSE_UNIV50_gmvitori
   2006-03-16 08:23:03 0018262/uxjobend        /UXIO_SetShmLnm      /000000013 - Permission denied
<< 2006-03-16 08:23:18 0018329/uxjobinit       /UXIO_SetShmLnm      /134840379 - /etc/UNIVERSE_UNIV50_gmvitori
   2006-03-16 08:23:18 0018329/uxjobinit       /UXIO_SetShmLnm      /000000013 - Permission denied
<< 2006-03-16 08:23:18 0018331/uxjobend        /UXIO_SetShmLnm      /134840379 - /etc/UNIVERSE_UNIV50_gmvitori
   2006-03-16 08:23:18 0018331/uxjobend        /UXIO_SetShmLnm      /000000013 - Permission denied
<< 2006-03-16 08:23:35 0018390/uxjobinit       /UXIO_SetShmLnm      /134840379 - /etc/UNIVERSE_UNIV50_gmvitori
   2006-03-16 08:23:35 0018390/uxjobinit       /UXIO_SetShmLnm      /000000013 - Permission denied
<< 2006-03-16 08:23:35 0018392/uxjobend        /UXIO_SetShmLnm      /134840379 - /etc/UNIVERSE_UNIV50_gmvitori
   2006-03-16 08:23:35 0018392/uxjobend        /UXIO_SetShmLnm      /000000013 - Permission denied
##################################################################
##################################################################
How to update a Windows Dollar Universe node from the version 5.0 to the version 5.1.[/b]


-- Warnings
A cold backup of the Dollar Universe and DQM directories should be done before updating the Dollar Universe node.

-- Procedure
1). Check the patch level of the 5.0 Dollar Universe node.
2). Apply the service pack SPRE0025 if not already applied.
(More information in the readme file included in the service pack)
3). Upgrade the node with the DUS512 kit.
(More information available in the readme file included in the kit)
4). Apply the FX24380
(More information available in the readme file included in the patch)
5). Set U_PMP_DISABLE to Y in the uxsetenv.bat and the two .def to disable the PMP service 

-- Maintenance procedures
Usage of the IU_RTS is not recommended with the 5.1 version of Dollar Universe, please use the on-line reorganization and on-line backup instead (More information in the Administrator's Guide).
Usage of the IU_PUR is not recommended with the 5.1 version of Dollar Universe, please use the continuous purge instead (More information in the Administrator's Guide).[/u]

##################################################################
##################################################################
Certain SUN patch does not allow to fork a new process for ssh
When running a script that issue a ssh command from command line, the script is working fine. However, when running the script within $U, the ssh fails with the following error. The work around is to save the ssh into a separate scrpit and call the script within the original script. The script for ssh should not contain the line #!/bin/ksh

or can try the "ssh -n"
...........
+ /usr/local/bin/ssh -x -oBatchMode=yes -oStrictHostKeyChecking=no -i /opt/bea/pioneer/batch/.ssh/pioneer_request -lweblogic fpfiv01.prod.fedex.com
+ 1> /opt/bea/pioneer/batch/ins2nex.tmp
##sleep 240
wait $!
+ wait
Pseudo-terminal will not be allocated because stdin is not a terminal.^M
Killed by signal 15.^M
...........

letter from Fedex:
issue:
  The SUN OS was patched with the latest SUN patch bundle.(included a significant number of security enhancements). A job that used SSH was failing when $U called the job, but not when run manually. 

Resolution:
On research/trial-and-error the $U issue turned out to be not $U but the OS patch bundle that disallowed the forking of a process (SSH) from a parent process (insight2nex.sh). The parent was changed to call a sub process (script that called SSH as a valid process), to get the file from the insight server. This corrected the issue.

We have made these changes as a work around. We took out the ssh command line and put it in a script alone and removed the #!/bin/ksh from the first line, with the #!/bin/ksh line the script will hang:


 [univa@csmap01:FDXP01]$cat insight2nex-ssh.sh 
/usr/local/bin/ssh  -x -oBatchMode=yes -oStrictHostKeyChecking=no -i /opt/bea/pioneer/batch/.ssh/pioneer_request -lweblogic fpfiv01.prod.fedex.com

The original script now calls the above script like this: 
	...
	...
echo "Getting file from insight server." | tee -a ${logfile} 
#${CALL_SSH} -x -oBatchMode=yes -oStrictHostKeyChecking=no -i ${sshdir}/pioneer_request -lweblogic ${ivserver} > ${tempfile} | tee -a ${logfile} 
${workdir}/insight2nex-ssh.sh > ${tempfile} | tee -a ${logfile} 
This is working but it works without this step from the command line but not in a $U uproc.

	...
	...
##################################################################
##################################################################
The DQM log can not be used by DQM server anymore if it has been renamed/removed, even a file with the same name is created. The server is counting on the old file descriptor. The DQM server has to been restarted. The same is true for all other engine logs. 
##################################################################
##################################################################
The tool to take video on desktop operation.
http://www.brothersoft.com/Multimedia_Graphics_Screen_Capture_CamStudio_3944.html

##################################################################
##################################################################
Queue SYS_BATCH 
      JobLim 999
      Dynamic priority of +1 every 120 seconds
      Base priority 0
      Execution priority 20
      Maximum job retention period 0 seconds
      Maximum priority 200
      JobQue 1 , JobExe 1 , JobHld 0
    Jobname         User           Entry         Prio       Stat     Date
XBDGPRDBDGPUSA1DP000root           0367          0100     Executing 20060405 06:00        

Scan over

The following are internal parameter to the queue.
   Base priority 0
   Maximum priority 200
This is to effect the nice value in the system. If it can be 0 - 255. 
      Execution priority 20

With 0, the sub-DQM will have the same nice value as the main DQM process.
With 255, the nice value will be the lowest.
##################################################################
##################################################################
To test if a job can be run in $U, without a tty, try the folloing:

1. add a sleep 300 in the  script

2. launch it in background:

script.ksh &

3. exit the current terminal, so the tty associated to the process will end

4. Open a new ternal and check if the script can complete. After this, the process will look like this:

# ps -ef | grep sleep
gmu      13297     1  0 15:50 ?        00:00:00 sleep 300
##################################################################
##################################################################
When the system swap space used up, the following symptoms show up.

1. The launch failed to wakeup.
2. DQM failed to create sub-processes, and the following error shows in the universe.log:

<< 2006-04-23 23:49:01 0005088/uxdqmsrv        /UXDQM_CrtlJobBatch  /134709683 - %UNI_-I-UXOS_CrtJobFailed, Failed to create job
   2006-04-23 23:49:01 0005088/uxdqmsrv        /UXDQM_CrtlJobBatch  /000000012 - fork
<< 2006-04-23 23:49:01 0005088/uxdqmsrv        /UXDQM_CrtPrcJob_UNIX/134709683 - retour incidente de UXos_CrtJobBatch
<< 2006-04-23 23:50:00 0008063/uxdqmsrv        /UXDQM_CrtPrcJob_UNIX/134709683 - %UNI_-I-UXOS_CrtJobFailed, Failed to create job
   2006-04-23 23:50:00 0008063/uxdqmsrv        /UXDQM_CrtPrcJob_UNIX/000000012 - fork
<< 2006-04-23 23:50:01 0008063/uxdqmsrv        /UXDQM_CrtPrcJob_UNIX/134709683 - %UNI_-I-UXOS_CrtJobFailed, Failed to create job
   2006-04-23 23:50:01 0008063/uxdqmsrv        /UXDQM_CrtPrcJob_UNIX/000000012 - fork
<< 2006-04-23 23:51:00 0008063/uxdqmsrv        /UXDQM_CrtPrcJob_UNIX/134709683 - %UNI_-I-UXOS_CrtJobFailed, Failed to create job
   2006-04-23 23:51:00 0008063/uxdqmsrv        /UXDQM_CrtPrcJob_UNIX/000000012 - fork

When launching with uxord:
<< 2011-07-14 11:00:04 0007244/uxord           /ADDJOB              /000000000 - Numproc 5031989 Numentry 0 GASNDJ_STATUS 134709683 GASNDJ_IOSB_01 12
<< 2011-07-14 11:00:04 0007244/uxord           /GAB39A41            /134458554 - %UNI_-E-U_EGASNDJ3302, Error-Job submission
<< 2011-07-14 11:00:04 0007244/uxord           /UXOS_CrtPrcJob      /134709683 - %UNI_-I-UXOS_CrtJobFailed, Failed to create job
   2011-07-14 11:00:04 0007244/uxord           /UXOS_CrtPrcJob      /000000012 - fork

##################################################################
##################################################################

When Dollar Universe is installed on a Windows node in C:, this issue will occur.
When the Company first time started the IO server will create the universe.log, which will be owned by the local system account. If then, you use a Windows user, for example univa as the user service log on account, and create a launch with univa, the following error message will show in the job log.

Log File DOLLAR UNIVERSE, : Permission denied

The reason is the windows user, univa, does not have right to write in the universe.log file.

##################################################################
##################################################################
To detect the No. of CPU 
Linux

cat /proc/cpuinfo|grep processor|wc .l
Solaris
psrinfo -v|grep "Status of processor"|wc -l
AIX
lsdev -C|grep Process|wc -l
HP/UX
ioscan -C processor | grep processor | wc -l
Tru64
/usr/sbin/psrinfo -v|grep "Status of processor"|wc -l

##################################################################
##################################################################
When using NIS to resolve usernames :

extract of the universe.log

"<< 2005-10-05 10:43:56 0009251/uxord           /uni_getuai          /134710259 - getpwnam
   2005-10-05 10:43:56 0009251/uxord           /uni_getuai          /000000004 - Interrupted system call
<< 2005-10-05 10:43:56 0009251/uxord           /GAB39A41            /134458554 - %UNI_-E-U_EGASNDJ3302, Error-Job submission"

The submission user is not recognized when using NIS

Here is an extract of SPRE0021D readme file 

"15882 : On some UNIX :
         This service pack sets the existence control for "User" to nonfatal, for use by the
         functions getpwnam and getpwuid. This will not function on HP-UX if NIS is used.
         In this case you must declare the variable U_NIS_ENABLE to ' Y ' or ' O ' in the
         uxsetenv, uxsetenv_ksh and uxsetenv_csh files.
         Problem corrected."

SPRE0021D is included in SPRE0025.

-Can you stop $U and implement the variable U_NIS_ENABLE to Y in uxsetenv* files and then restard $U.


It can also be?

<< 2006-05-15 01:30:06 0017620/uxord           /uni_getuai          /134710259 - getpwnam
   2006-05-15 01:30:06 0017620/uxord           /uni_getuai          /000000002 - No such file or directory
<< 2006-05-15 01:30:06 0017620/uxord           /GAB39A41            /134458554 - %UNI_-E-U_EGASNDJ3302, Error-Job submission


##################################################################
##################################################################
This error message is caused by the 

uxshw upr exp upr=* 

when one of the uprocs without uproc script.

<< 2006-05-25 14:26:06 0008044/uxshw           /u_view_file         /000000000 - system('cat /apps/du/511/TST511/temp/U_TMP_00001F6C') returns error 256
<< 2006-05-25 14:26:06 0008044/uxshw           /u_view_file         /000000000 - system('cat /apps/du/511/TST511/temp/U_TMP_00001F6C') returns error 256

##################################################################
##################################################################
If you launch a lot of commands in Dollar Universe at the same time, the IO server can be overload
and some of these commands can be aborted with the following error message (in this example, we used the uxlst upr command):

no such memory
Syntax file error = 1215060
no such memory
Defaults file error = 1215060
In ' the current line '
Line : 1181588
Error : uxlst upr : uxlst does not exist in the vocabulary

This problem is linked to the system resources but we can configure the behaviour of the IO server connection.

To solved the issue :

The system issue can be solved adding following variables :

"U_CONNECT_ITER_INTERVAL at 2000"
"U_CONNECT_ITER_NBMAX at 5"

U_CONNECT_ITER_NBMAX Number of retries if a connection to the IO server fails
U_CONNECT_ITER_INTERVAL Interval between the connection retries to the IO server. (seconds on UNIX and milliseconds on Windows)

That means that the clients of the IO server will try 5 times to connect itself to the server if problem appears, with a break of 2000 milliseconds between them.

These values can be changed if they are not sufficient.

If you are using a GCO to connect to a remote node, you need to set these variables on the client. 

##################################################################
##################################################################
Some time very old EVENT WAIT records (several months) show in the execution history. This is because the event wait jobs were deleted from the expected launch window. They can not be deleted from the job Monitor (they will be recreated from the expected launches). Then the EVENT WAIT records will remain in the execution history forever; dynamic purge will not purge them.  
They can be purged with the uxpurge (used in old IU_PUR). Please be aware that you need to define some environment variables for the retention delay. Otherwise, all records will be removed. Please check the command manual for the variables.

Another workaround is to implement the new online purge. Besides the dynamic purge, it will perform a cyclical purge, which is not completely based on the future launch database. 

##################################################################
##################################################################
The TCP trace variable to define: 
U_TCP_LOG=utcplog.log
U_FICH_TCP_ERR=$UXLEX/ufichtcperr.log      
U_FICH_TCP_LOG=$UXLEX/ufichtcplog.log 
U_FICH_CLI_ERR=$UXLEX/ufichclierr.log 
U_FICH_CLI_LOG=$UXLEX/ufichclilog.log
like U_TCP_LOG you should valorize them with a filename (one for each variable is suitable)
##################################################################
##################################################################
##################################################################
##################################################################
online reorg use $UXEXE/uxrgz, check the tip&trick 
With Dollar Universe v5.1 or with Dollar Universe V500 + SPRE0025 + FX24334B/C 
It is still recommended to shutdown and run offline reorg once a month.
##################################################################
##################################################################
When put 2 XML files uxdesktop.dta and uxconfigdesktop.dta in to the $UXROOT_DIR, the default desktop will be replaced by the definititon in the 2 XML files.
This is new in GCO 2.3, from V521.

Sample files:

...........uxconfigdesktop.dta
<AUTHORIZATION>
	<PROFILE name="PROFADM">
		<USER name="tst521a">
			<NODE name="DA_US_U_02"/>
			<NODE name="DA_US_U_05"/>
			<NODE name="TEST1"/>
		</USER>
	</PROFILE>
</AUTHORIZATION>

...........uxdesktop.dta
<PROFILE name="PROFADM" user="*"> 
	<EXPLORER expand="Y">
		<FOLDER name="Citrix Servers" expand="Y" >
			<NODE name="*ALL" expand="N">
				<FOLDER name="Work" expand="N">
					<AREA name="application" expand="N">
						<OBJECT name="uproc"/>
						<OBJECT name="session"/>
						<OBJECT name="task"/>
						<OBJECT name="calendar"/>
						<OBJECT name="job_event"/>
						<OBJECT name="resource_event"/>
						<OBJECT name="class_event"/>
						<OBJECT name="launch"/>
						<OBJECT name="execution"/>

					</AREA>
				</FOLDER>
			</NODE>
		</FOLDER>
	</EXPLORER>
</PROFILE>


##################################################################
##################################################################
In V513, tools are available to reorg and reinitialize the DQM data files.
RNING: The DQM data files check operation and reorganization must be 
          done with DQM server stopped.

Script $UXDQM/ux_chk_dqm: 
   This script will check the coherence of both DQM data files using 
   the uxchkdqm detailed below. DQM must be stopped before the 
   execution of this script.
Syntax:  
   $UXDQM/ux_chk_dqm  [COMPANY] [AREA]

Script $UXDQM/ux_init_dqm: 
   This script will initialize both DQM data files using the uxchkdqm 
   binary detailed below DQM must be stopped before the execution of 
   this script.
Syntax:
   $UXDQM/ux_init_dqm  [COMPANY] [AREA]

Binary $UXDQM/uxchkdqm: 
   Checks the DQM data files coherence and may initialize the 
   DQM job file, depending on the outcome of the check.
         
Syntax:   
   $UXDQM/uxchkdqm  DMP_QUE_FILE  DMP_JOB _FILE  [INIT]
Where:
   DMP_QUE_FILE  : Mandatory argument. Name of the Queues file 
                  (please refer to the UXOS_DMP_QUE variable)
   DMP_JOB_FILE  : Mandatory argument. Name of the Jobs file  
                  (please refer to the UXOS_DMP_DTA variable).
   INIT :  optional argument. If present the DQM jobs file will be initialized
##################################################################
##################################################################
nscd 
/usr/sbin/nscd - name service cache daemon
If this daemon is disabled, the gethostbyname system function could be impacted.
had 2 case on Sun, with sub-interface(may not rleated), the gethostbyname could not resolve the IP of the $U nodename.

or

Just let the name resolving process check the /etc/hosts first.

/etc/nsswitch.conf
hosts:     dns files 

##################################################################
##################################################################
The recover option has to be used together with the "status=A". It only used to show the ABORTED status of a recovered job. For example, if a job has been relaunched and completed, the following command will not show it: 

# uxlst ctl exp full status=A upr=C50719-1
 Command : uxlst ctl exp full status=A upr=C50719-1

SESSION     UPROC      MU         STATE                 START      AT   END        AT      MODIFICATIONS          NODE       QUEUE                           JOB    PRI SESSNO  PROCNO  PDATE      USERNAME     VSES VUPR STP NSEQ
--------------------------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

It will be displayed with the recover option:

# uxlst ctl exp full status=A upr=C50719-1 recover
 Command : uxlst ctl exp full status=A upr=C50719-1 recover

SESSION     UPROC      MU         STATE                 START      AT   END        AT      MODIFICATIONS          NODE       QUEUE                           JOB    PRI SESSNO  PROCNO  PDATE      USERNAME     VSES VUPR STP NSEQ
--------------------------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
            C50719-1   DA_US_U_05 ABORTED               06/14/2006 0952 06/14/2006 0952 Operator     RECOVERED    DA_US_U_05 SYS_BATCH                       1931   100         0001879 06/14/2006 univa        000  000  00  0001840
#


# uxlst ctl exp full upr=C50719-1
 Command : uxlst ctl exp full upr=C50719-1 status=*

SESSION     UPROC      MU         STATE                 START      AT   END        AT      MODIFICATIONS          NODE       QUEUE                           JOB    PRI SESSNO  PROCNO  PDATE      USERNAME     VSES VUPR STP NSEQ
--------------------------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
            C50719-1   DA_US_U_05 ABORTED               06/14/2006 0952 06/14/2006 0952 Operator     RECOVERED    DA_US_U_05 SYS_BATCH                       1931   100         0001879 06/14/2006 univa        000  000  00  0001840
            C50719-1   DA_US_U_05 COMPLETED             06/14/2006 0952 06/14/2006 0952                           DA_US_U_05 SYS_BATCH                       1932   100         0001880 06/14/2006 univa        000  000  00  0001840
#

##################################################################
##################################################################
[STATUS]=H | O | R | S | W | P | E | F | T | A | *

L: waiting for launch,
H: held (disabled),
W: event wait,
O: launch window overrun,
R: launch refused. 


H: Held (disabled),
O: Launch Window overrun,
R: Submission refused at condition check.
S: Condition check in progress (Scheduling),
W: Event waiting,
P: Submission accepted at condition check (Pending),
E: Execution in progress,
F: Completion instructions in progress,
T: Completed,
A: Aborted.
* : all previous statuses including recoveries. 

##################################################################
##################################################################
<< 2006-07-14 14:21:16 0015827/uxioserv        /u_traite_req_client /000000000 - u_send_msg error : Errno syserror 32 : Broken pipe

When a client disconnect from IO server without warning, for example, close GJM during it loading the records. 

When filter changes in GJM, the connection to IO server will reset.

U_SG_LOG=A_file_name 
to trace GJM operation, including  the filter change   
##################################################################
##################################################################
For business view 2 to work. The remote/reference node need to have the same user as tst511a or sup512a 
Then, restart the GCO desktop
##################################################################
##################################################################
The V512 + FX24380 can not be used as a reference node in BVI 2. When a view is saved the IO server on the reference node will die. This has been fixed in V513.
##################################################################
##################################################################
The fmfu file only contains the "previous launches" filiation (what is called pilotages antérieurs), which are the links between the same "laucnhes" for a numlaunch (job exectuion number). 

If this file is reinitialized, the only info lost in the Job monitor is about the link with the "previous launches",  the jobs themselves will stay in the Job monitor.

Here is the description of an u_fmfu article ; this kind of article is written when a job has more than one condition checking by the launcher

2418402               2418404               E             20080413             020052  
Numproc1          Numproc2          State     Date                      Hour

Numproc1 stands for the numproc of the job during a previous condition checking
Numproc2 for the numproc of the job during this condition checking 
The date/hour are the date/hour of this condition checking.
State stands for an internal technical job status used by the launcher.
Note: 2 conditions checkings on the same job are linked through the numprocs of a u_fmfu article.
##################################################################
##################################################################
u_frup50 is used for "uxlst upr"
Both u_frup50 and u_fupr50 are used for the "uxshw upr"

##################################################################
##################################################################
To trace IO server:

export U_IO_TRACE=$UXLEX/uiotrace.log
export U_IO_TRACE_LEVEL=2  

##################################################################
##################################################################
The error message below means that there has been an error somewhere (a job not correctly taken into account) That does not mean that the DQM data files are corrupt though.

<< 2006-11-22 21:12:25 0749904/uxdqmsrv        /UxosEndJobQue       /000000000 - QuePh->JobExe = 0
<< 2006-11-22 21:12:25 0749904/uxdqmsrv        /UxosEndJobQue       /000000000 - QuePh->JobQue = 0

Every time a job is submitted or terminated in DQM, there are statistics to be computed. 

##################################################################
##################################################################
To check date in fmhs
cut -c 137-144 u_fmhs50.dta | grep -a 200
##################################################################
##################################################################
U_DST_IO_ENABLE	: transfer of uproc script via IO servers;Boolean;SPRE0025;Y;not set;uxsetenv* of source and target node			

##################################################################
##################################################################
On HPUX, with FX24430A (for V500), the motif interface may not be able to start, core dump. 
Or, the icons on Motif window may not sure. In this case, it can be fixed by using the old set of the uxpixmap file. 

306 dr-xr-xr-x   2 univsta    univst        2048 Dec 15  2004 uxpixmap
523 dr-xr-xr-x   2 root       sys           2048 Dec 15  2004 uxpixmap_041215
574 dr-xr-xr-x   2 root       sys           2048 Mar 24  2005 uxpixmap_050324

-- When I copy the old *.bm* files from the directory $UXEXE/uxpixmap_041215 then the icons display properly.

##################################################################
##################################################################
The $U lic generator need a license in the file u_licence.txt, no node name, just the license. 
##################################################################
##################################################################
For web console:
After installed the java and tomcat.
Need to go to .../tomcat/conf/tomcat-users.xml, and define the admin user with manager role: 
<?xml version='1.0' encoding='utf-8'?>
<tomcat-users>
  <role rolename="manager"/>
  <role rolename="DollarUniverseAdmin"/>
  <role rolename="standard"/>
  <user username="tomcat" password="tomcat" roles="standard,manager"/>
  <user username="univa" password="univa" roles="DollarUniverseAdmin"/>
  <user username="admin" password="admin" roles="manager"/>
</tomcat-users>

Then, login to the manager page of tomcate to deploy the web consle.
Then, go to the /webapps/wco22/WEB-INF/web.xml, and define the filename for the configuration file:
  <context-param>
    <param-name>config</param-name>
    <param-value>/apps/tomcat/apache-tomcat-6.0.2/webapps/wco22/config.txt</param-value>
    <description>Configuration file</description>
  </context-param>

If the above step is missing, you may get an error popup when trying to save the setting in the "admin" page, something like:

"exception, Null pointer"

Then, restart the browser, and tomcat, 
Then, go to: 
http://casdlsup06.orsypgroup.com:8080/wco22/servlet/admin
to define all of the configuration file names, and file the "services.txt" file with the entries from /etc/services
Then, login to :
http://casdlsup06.orsypgroup.com:8080/wco22/
http://casdlsup06:8080/wco235
http://casplda02.orsypgroup.com:8080/univiewer_webconsole_3.0.10_all_os/

If the user's role "DollarUniverseUser" is not properly defined, the error may show:
Server returned HTTP response code: 403 for URL:
http://casdlsup06.orsypgroup.com:8080/wco22/servlet/init
#######################################################
#######################################################
http://casdlsup06.orsypgroup.com:8080/wco233/
univa:univa

http://casplda02:8080/univiewer_webconsole_v211/
UVMS 2.1.1 with LDAP
frstlsup20
vmstlsup04
http://casplda02:8080/univiewer_webconsole_3.0.00_all_os/
casplda02
http://casplda02:8080/univiewer_webconsole_3.0.00_all_os/servlet/monitoring/

http://casplda02:8080/univiewer_webconsole_3.0.01_all_os/

UVMS with LDAP 3.0.4
[root@vmstlsup20 uvms304]# uname -a
Linux vmstlsup20 2.6.18-238.12.1.el5 #1 SMP Tue May 31 13:23:01 EDT 2011 i686 i686 i386 GNU/Linux
[root@vmstlsup20 uvms304]# pwd
/apps/ORSYP/univiewer_server/uvms304
root/Ors12a90

Port: 4185
admin:admin
#######################################################
To track UVC login:
Please make sure to do the following:

-Please stop your Tomcat, if possible.

-Modify [your_web_app]]/WEB-INF/web.xml by adding the j2ee parameter log.file. This will track of how many users have logged in.
<filter>
<filter-name>loginFilter</filter-name>
<filter-class>com.orsyp.servlet.filter.LoginFilter</filter-class>
<init-param>
<param-name>log.file</param-name>
<param-value>D:\bta\login_file.log</param-value>
</init-param>
</filter>

Specify the absolute path of a log file containing list of the users already logged in anywhere on your file system. For example,
D:\bta\login_file.log.
#######################################################
By default, the command uxshw upr displays the uproc's script if the uproc type is "internal CL". To disable the function (not to display the script), the environment variable U_UPR_SCRIPT_NODISP must be set to "Y" in the current environment.

To force display the internal script:
uxshw upr script ...
#######################################################
#######################################################
BVI2 need the reference side to be V5.2 and later.
The licenses need to store at the reference node.
The $U user used on remote GCO shouls exist on the reference node
#######################################################
#######################################################
On GCO side, with this variable, the distributed script line break at 255 issue is fixed.
FX24451 in V513
FX24450 in V523
U_DST_IO_ENABLE	transfer of uproc script via IO servers	Boolean	SPRE0025	Y	not set	uxsetenv* of source and target node			
#######################################################
#######################################################
In the security.txt file, the "to be forbided" key words should be on the top, for example, the following will forbid RELAUNCH, PURGE and DISABLE for launch object.
# --------------------------------------------------------------
#                      Launch Object
#                      KEY Format (Session;Uproc;MU)
LAUNCH=(*;*;*)
-
RELAUNCH
PURGE
DISABLE
+
CREATE
DISPLAY
UPDATE
DELETE_OBJ
MANAGE_EVENT
MANAGE_EXCHANGEDATA
ENABLE
#

So, the stop job execution function can be controlled by DELETE_OBJ. 

After modifying the security.txt, the $U does not need to restart. IO server check this file before each operation.

The GCO/GJM will need to close/reopen though.

The MANAGE_EVENT will contrrol all operation/display of job event. When disabled, job event can not be displayed, created, updated or deleted...
The permission can not be set to only display no modify ... Everything or nothing.

#######################################################
#######################################################
uxordre considers the $U user on the local system, instead of the local (for example, Windows) system user.
When launching a provoked task on a remote node, the user on local and remote node need to be the same case, for example zwa is not the same as ZWA. 

Proxy is not used in this example.
For example. launch from window GCO node to a Linux node. Windows user map to ZWA $U user with useralias.txt, and there is only a zwa on the Unix $U. The uxordre command won't work:

E:\du\TST511\exec>uxordre upr=C56532_2 mu=CASDLSUP06  node=casdlsup06
Access denied - insufficient rights

If both side $U user is zwa it will work:
E:\du\TST511\exec>uxordre upr=C56532_2 mu=CASDLSUP06  node=casdlsup06
numlanc 0020413

...........
This is normal in V533, for security purpose.
In V513+24707 or in V500, a provoked task could be triggered by the uxordre to run under a user other than the one defined in the task.
For example, in V513, the following task defined the user univa; and I can launch it with the user zwa.

$ uxlst tsk exp ses=C68249 upr=C68249-1 full
 Command : uxlst tsk exp ses=C68249 upr=C68249-1 full

 SESSION    VER UPROC      VER MU           NATURE    START      AT    END        AT    DATRAIT       NATURE    STATUS        CONTROLE     USER
------------------------------------------ --------- -------------------------------------------------------------------------------------------
 C68249     000 C68249-1   000 CASDLSUP06                                                             Provoked                             univa

$ uxordre upr=C68249-1 ses=C68249  exp mu=CASDLSUP06 user=zwa
numlanc 1639545

$ id
uid=238(zwa) gid=500(da) groups=100(users),500(da),502(support),510(daadmin),700(univ)
$

However, it seems that this is not possible any more in V533 (with FX24716 or no patch at all). For example:

[root@casdlsup06 zwa]# uxlst tsk full upr=EXIT0 mu=LOCAL1
 Command : uxlst tsk full upr=EXIT0 mu=LOCAL1

 SESSION    VER UPROC      VER MU           NATURE    START      AT    END        AT    DATRAIT       NATURE    STATUS        CONTROLE     USER
------------------------------------------ --------- -------------------------------------------------------------------------------------------
                EXIT0      000 LOCAL1                                                                 Provoked                             univa


[root@casdlsup06 zwa]# id
uid=0(root) gid=0(root) groups=0(root),1(bin),2(daemon),3(sys),4(adm),6(disk),10(wheel),700(univ)


[root@casdlsup06 zwa]#  uxordre exp upr=EXIT0 mu=LOCAL1 user=root
(Launch not authorized for another user)

#######################################################
#######################################################
With the following, the processing date will be based on the functional period of the uproc, not the rule of a task. 

In order to solve that issue, we asked her to input the following variables in her uxlnmCOMPANY.dat. 
When S_CALC_REP is set to O, the reference/base date for starting the processing date computation is the scheduling date; this is true for a scheduled task with rules. That's why it is not the first day of a month.

/TABLE="LNM_SOCIETE"/NAME="S_CALC_REP"/VALUE="O" 

/TABLE="LNM_[SOCIETE]"/NAME="S_CALC_REP"/VALUE="O"  ???

In V533, this can be done by selecting the daily period for rule, then pick the exact day in the month in "Days in month"; offset-> none. The above line is not needed.
This is because the offset is not considered by the calculator when computing the processing date.
However, before V53, this can not be done. You will need to define the above line in the uxlnmCOMPANY.dat.
#######################################################
#######################################################
uxscv UPR: Defines the current version of a uproc (in the application or integration area only).
#######################################################
#######################################################
How to crash the IO server. It is in fact a regular stop command.
Please use : telnet host IO_Port

And then please type

00001A
#######################################################
#######################################################
To trace the DQM processes, after SPRE0025:
For example for the node chdfapf2 in uxsetenv_ksh;

export U_DQM_LOG=/var/universe/chdfapf2/FDXP01/DQM/dqm.log
export U_DQM_LOG_LEVEL=3	
export U_DQM_TRACE=Y
export U_TRACE_DQM_NET=Y

For 21D:
They should be defined in uxstartdqm.
export TRACE_DQM=Y
export U_DQM_TRACE=Y
export U_TRACE_DQM=Y
The output will be in universe.log.


#######################################################
#######################################################
In the GJM: 
Virtual status means:
Corresponds to a uproc (in a session) which has not yet been launched
#######################################################
#######################################################
to extract profiles:
uxext aut profil=* output=/tmp/prof.ext
#######################################################
#######################################################
56071
A GCO user could use a wrong profile on a Unix node, even the proxy and security file are properly defined on the Unix node; when the GCO is using a wrong $U Company name, but with the same TCP ports.

In another word, on the Windows client side alone, a GCO user can break the security control on a Unix node.
#######################################################
#######################################################
spaces are not allowed in resource's path. 
The work around 
for Unix: to create a soft link for the directory with space

for Windows: use it 8.3 name.
use "dir /x" to get it 8.3 name, and use it:
for example:
07/18/2007  12:03 PM    <DIR>          FINANC~1     financial monthend

Or create a new mount point:
D:\tmp>net use m: "\\USSDMDA007\d$\tmp\financial monthend"
and access it as m:; then unmount it after.
C:\>net use m: /delete

#######################################################
#######################################################
In V513, the creation, update, distribution and insertion of uprocs all done by IO server, so, the ownerhsip should always be univa:univ.

For V500 Companies, when you use the Motif interface, the uproc scripts are created by the ./cuxxmuproc process, not the IO server. Therefore, the uproc scripts will have the same ownership as the ./cuxxmuproc process. To have all of the uproc scripts owned by univa:univ, please try to start the Motif interface with the univa user. 
#######################################################
#######################################################

When they update/synchronize the /etc/passwd, the job running the same time, could abort without any job log. The history trace shows: 
Exit code :  64


_!================================================
_!**
$!** SESSION .... :  IU_MAINT  
$!** EXECUTION .. : 0000146
$!** PROCEDURE .. : IU_MAINT_H
$!** EXECUTION .. : 0001034
$!** M.U. ....... : U_GSPPRT01
_!================================================

07/30/2007 06:00:01 Start Condition Check                                       
                   Processing Date 07/30/2007                                   
07/30/2007 06:00:01 Submitted in BATCH Q: SYS_BATCH                             
                   under ENTRY N°  : 0890                                       
Exit code :  64                                                                 
                                                                                
07/30/2007 08:08:29 *** TASK ENDED ABNORMALLY  ***                              
   Session Number   Uproc      Number  M.U.       Aut.Proc.Dt Date  Time   E    
IU_MAINT   0000145  IU_MAINT_H 0001026 U_GSPPRT01 001 29072007 29072007 060001 T
#######################################################
#######################################################
u_fmlp50: Operating events (status) 
u_fmev50: Awaited events 

fmlp store the events generated after job completion, abort...
fmev store the link between the awaited events (not the acctual events) and the event wait jobs (could be a remote job). An entry in fmev is added when there is an job enters event wait status.
When deleting event, uxdlt evt or the completion instruction, before each event are deleted, the fmev is checked to see if the event has been asked by any event wait job. So, if the fmev is big, it could take longer to delete the events.

When the awaited event is on a remote node, the entry will present on the fmev on both node. If the event wait job is deleted, the entry will be removed from the loca fmev, but not from the remote fmev. So, as a result, if a lot of this kind of event wait jobs are deleted from the fla, all of those event wait entries will remain in the fmev on the remote node.

The event memorization defined in uproc depends on processing day. For example, memorizing all event for 2 days (FP daily), the event will be cleaned after the 1st event generated in the 3rd processing day.  

Here is a more detailed example. A cross node session header and trailer on support6 and middle one on support5. Trailer depends on the middle one; header removes all previous events from C62410-M.  
 ITEMS | ses          : S62410
       | vses         : 000
       | header       : C62410-H
       | links        :
       |
       || NumF | NumS | Path |   Father   |    Son     |   HDP/MU   ||
       || 0001 | 0002 |  OK  | C62410-H   | C62410-M   | DA_US_U_05 ||
       || 0001 | 0003 |  OK  |            | C62410-T   | CASDLSUP06 ||
       |

When trailer is in event wait, the fmev on support 6 looks like the following. If an event has not been sent/satisfied, the entry started with XA.

XR      C62410-H  CASDLSUP06S62410                                             20080630112046000000000000000004                                                                                                 
XA      C62410-M  DA_US_U_05S62410    0000000042061100000000010420611          200806301120470000000000000000050624645EOT2008063020080630C62410-T            S62410    CASDLSUP060101299000000                  
XR      C62410-T  CASDLSUP06S62410                                             20080630112047000000000000000006                                                                                                 
XR      C62410-M  DA_US_U_05S62410                                             20080630112048000000000000000008                                                                                                 
The XA record show that the C62410-T is awaiting for C62410-M on MU DA_US_U_05.

After the C62410-M is completed on support5, the fmev on support 6 looks like the following. If an event has been sent/satisfied, the entry started with XR.
XR      C62410-H  CASDLSUP06S62410                                             20080630112046000000000000000004                                                                                                 
XR      C62410-T  CASDLSUP06S62410                                             20080630112352000000000000000011                                                                                                 
XR      C62410-M  DA_US_U_05S62410                                             20080630112352000000000000000009                                                                                                 

#######################################################
#######################################################
GJM can freeze, which mean that after right click on any records or click on the menu bar, the window freeze,and the following error messgae show:
"Unable to open <display configuration name>"

This issue can be fixed by customize the display configuration.
#######################################################
#######################################################
Missing or corrupted idx file can cause the CDJ server to crash. For example, they have only the inv file, not idx file:
In C:\UNIVERSE\OSCORP\exp\data
08/08/2007  09:26a             163,957 BUILTIN\Administrators u_fmcx50.idx_inv

 The following message shows in the CDJ log:
u_cdj_main               : CDJ init error (synchronization request returns -2) -> CDJ server stopped

The CDJ server will stop in a few seconds.
#######################################################
#######################################################
If there are many file resources with scan frequency 0, it can cause the uxsur to take all of the resources, and finally crash the system. 
#######################################################
#######################################################
Apparently, some patch level of SunOS 5.8  has some problem to shutdown $U, the IO server won't stop.

*********************************
SunOS 5.8
SPRE0025 + FX24293
IO and CDJ shutdown KO
see also 48849 and refer to 47186 from PSA
node: p78003033

We think it's a system related issue similar to the one at PSA, because an OS library has a bug.
Problem solved with SunOS 5.9. 
Customer has a 5.9 and no problem with it.
Customer does not agree because has other SunOS 5.8 which do not encounter this issue.

We should compare the OS patch level (patchadd -p). 
For now we only have the result of patchadd for p78003033

We received the result of patchadd for the following two hosts:

h396980y  
h397000r

The OS patch level is very different from one node to another.
*************************************

There maybe a FAQ for this later.
#######################################################
#######################################################
It seems that the dynamic purge doesn't purge the fmcm, which is an known issue.
#######################################################
#######################################################
How to get the version of an OVO manager:
1.4- What is the version of the manager for HPOVO. Answer can be 2.2 or 3.0. You can know this by checking names of trhe file in 
/var/opt/OV/share/databases/OpC/mgd_node/customer/<OS>/<node>. Files of the manager are of the type UNIV_*_vx where x is the number of the version.
#######################################################
#######################################################
When an external script use a variable as its path, for example
$ssss/text.ksh
the variable has to be available within $U env, for example defined  uxsetenv; if you are using DQM. However, if using the launcher only, the varialbe can be defined in the user's .profile, and the $U do not need to be restarted, if launching the job with that user.


A trick is to change it to:
\$ssss/text.ksh
; then even with DQM, the $ssss need to only be defined in the user .profile but no need to restart $U with that env. 
#######################################################
#######################################################
$U depends on sub-dqm pid to determin the status of a job after reboot. If a job is completed in between the shutdown and reboot; and another process is, then, using the same pid in the system, $U won't abel to tell the different. It will think the job is still running, and keep it in EXECUTING status.
#######################################################
#######################################################
The install shield $U install log is at:
C:\Program Files\InstallShield Installation Information\{357C62B2-63BD-41F6-B7A3-6D0D6C427BC3}
#######################################################
#######################################################
For CA7 Manager issue:
To further analyze this, 

1). Please run the following command on MVS, while the issue still presents:
.................................
The status of the $UNIVERS STC of the Dollar Universe Manager for CA-7 can be displayed with the command:
/f UNI,STATUS
This command will issue a message: $UNIVERS V2.2:ACTIVE,ACCEPTING CONNECTIONS.
The Dollar Universe Manager for CA-7 uses the 2.2 version of the $UNIVERS component.
.................................

2). Send us the following from MVS side:
the syslog and stc log
#######################################################
#######################################################
How to create a launch with user specified processing date.
uxordre ...  DTRAIT=
uxadd fla pdate=

So the event generated can show a different processing date. 
#######################################################
#######################################################
Tracing process tree on Windows
On Windows, jobs are launched through the user services:
UniServUser.exe	\	9760	1028	8	10/5/2007 2:42:28 PM		4	839680	10089	2162688
cmd.exe	\	8816	9760	8	10/11/2007 3:00:04 AM		1	1531904	736	1810432
cmd.exe	\	5184	9760	8	10/11/2007 5:00:01 AM		1	1531904	736	1810432
#######################################################
#######################################################
$UXEXE/uni_msg.txt is a binary file, which is necessary to run any job. It is used to display proper messages/info in the job logs and history traces, for EN or FR.
 
This file need to be accessable/readable by the submission users. Otherwise, the job will abort; the history trace will show "Job aborted or killed during execution"; and no job log.

If the file is corrupted, for example, copy the context and pasted into a text file on Windows then put it back in $UXEXE. All job logs will be in the following format: 
Sometimes could be worse.

Sever ( )
Sever ( )
C00-SUPPORT-SITE DEBUT
C00-SUPPORT-SITE WSPGM-CODNOEUD casdlsup06
Sever ( )
Sever ( )
Sever ( )
_!================================================
_!**
Sever ( )
228           $!** PROCEDURE .. : EXIT0                                         
Sever ( )
303           $!** VERSION .....: 000                                           
Sever ( )
304           $!** EXECUTION .. : 0097681                                       
_!**
_!** PROCESS DATE : 10/26/2007
_!**
_!------------------------------------------------
Sever ( )
309           $!** PARAMETERS. : None                                           
_!------------------------------------------------
_!**  VARIABLES 
var2                :                                                  
Sever ( )
_!================================================
Sever ( )
Sever ( )
Sever ( )
Sever ( )
Sever ( )
Sever ( )
Sever ( )
Sever ( )
Sever ( )
Sever ( )
Sever ( )
Sever ( )
Sever ( )
Sever ( )
Sever ( )
Sever ( )
Sever ( )
Sever ( )
Sever ( )
Sever ( )
Sever ( )
Sever ( )
#######################################################
#######################################################
How to tune the memory usage for tomcat:
First look at java -X to determine what parameters to set. Then you can set them via the environment variable JAVA_OPTS. Read the files catalina.bat or catalina.sh for more information on JAVA_OPTS.
# java -X
  -Xms<size>         set initial heap size
  -Xmx<size>         set maximum heap size
  -Xss<size>         set thread stack size
#
For example:
export JAVA_OPTS="-Xms512M" "-Xmx512M" "-Xss512M"

For Windows:
The java virtual server isn¿t able to reserve enough memory to run. It is required to modify the default values set in the univiewer_console.bat file located in the mgr folder.
cmd /D /C start "UniViewer Console" "%MY_JAVA_HOME%javaw" -Xmx512m -Xms256m -cp  

#######################################################
#######################################################
When a uproc A depend on uproc B's completion in a specific MU, if the MU is not defined in this node, the job will be LAUNCH REFUSED, the history trace looks like:

11/12/2007 15:28:34 Start Condition Check                                       
                    Modified directly in the Engine by                           
                    operator : rhall                                             
                    Processing Date 11/12/2007                                   
                                                                                 
 Dependency    Cond. 03 Prop. 01 :                                               
 Depe. :           -        UPRA_D0216-        A_MANU7PRD 20071112  Missing      
 Dependency    Cond. 07 Prop. 01 :                                               
 No M.U for this level                                                           
  *** Task launch refused  ***

If bypass the condition check, the job will run.
#######################################################
The V500 kit for VMS Itanium is different from the one on VMS AXP. There is only one kit and no additional patches. The kit was built based on V500 + SPRE0025 + FX24334C of VMS AXP.
There is a special IU_RTS for VMS Itanium, but seems doesn't work, hang before it finish.
#######################################################
#######################################################
The following error when running the Windows uxtrace, could means the WMI corruption.

E:\SLEU50\mgr\uxtrace_without_gnu_tools_V4.3.1>echo off
X  9  SCE
E:\SLEU50\mgr\uxtrace_without_gnu_tools_V4.3.1\uxtrace_step2.vbs(26, 1) (null):
0x80041002

To repare the issue:
rundll32 wbemupgd, UpgradeRepository
http://windowsxp.mvps.org/repairwmi.htm

To download the WMI Diagnosis Utility:
http://www.microsoft.com/downloads/details.aspx?familyid=d7ba3cd6-18d1-4d05-b11e-4c64192ae97d&displaylang=en

Download and unpack the WMIDiag.exe, and run from a cmd window:
cscript WMIDiag.vbs

and send us the generated report. 
......................
Rebuilding the WMI Repository

If you experience behavior when using WMI, such as application errors or scripts that used to work are no longer working, you may have a corrupted WMI repository. To fix a corrupted WMI repository, you have to reinstall WMI. Follow these steps:
For Windows XP Service Pack 2

Click Start, Run and type the following command:

    rundll32 wbemupgd, UpgradeRepository

This command is used to detect and repair a corrupted WMI Repository. The results are stored in the setup.log (%windir%\system32\wbem\logs\setup.log) file.

For Windows Server 2003

Use the following command to detect and repair a corrupted WMI Repository:

    rundll32 wbemupgd, RepairWMISetup

On other versions of Windows you can rebuild the Repository by doing the following:

    * Click Start, Run and type CMD.EXE
    * Type this command and press Enter:

        net stop winmgmt

    * Using Windows Explorer, rename the folder %windir%\System32\Wbem\Repository. (For example, %windir%\System32\Wbem\Repository_bad.). %windir% represents the path to the Windows directory, which is typically C:\Windows.
    * Switch to Command Prompt window, and type the following and press ENTER after each line:

        net start winmgmt

        EXIT

Courtesy: The above is excerpted from Microsoft Technet article WMI Isn't Working!
© 2007 Microsoft Corporation. All rights reserved.
Re-registering the WMI components (Ref WMI FAQ)

The .DLL and .EXE files used by WMI are located in %windir%\system32\wbem. You might need to re-register all the .DLL and .EXE files in this directory. If you are running a 64-bit system you might also need to check for .DLLs and .EXE files in %windir%\sysWOW64\wbem.

To re-register the WMI components, run the following commands at the command prompt:

    * cd /d %windir%\system32\wbem
    * for %i in (*.dll) do RegSvr32 -s %i
    * for %i in (*.exe) do %i /RegServer

Note that none of the above two methods restore the missing files related to Windows Management Instrumentation (WMI). So, below is a comprehensive repair procedure that restores all the missing WMI modules. In case of missing WMI modules, you may use the following method.

Comprehensive rebuild method

Important note:  If you've installed a Service Pack, you need to insert your Windows XP CD with Service Pack integration (called as the Slipstreamed Windows XP CD). If you don't have one, you may point to the %Windir%\ServicePackFiles\i386 folder for a recent version of the system files required during WMI repair. Or you may create a slipstreamed Windows XP CD and insert it when prompted.

Click Start, Run and type the following command, and press ENTER:

rundll32.exe setupapi,InstallHinfSection WBEM 132 %windir%\inf\wbemoc.inf

Insert your Windows XP CD into the drive when prompted. Repair process should take few minutes to complete. Then restart Windows for the changes to take effect.
......................
#######################################################
#######################################################
The command "uxlst ctl" outputs a field called "MODIFICATIONS".
empty or "operator RECOVERED" are the only possible values for that field.
#######################################################
#######################################################
If some nodes are defined in the node table, before the 1st time the desktop open , or remove the entries in the registry, then, the nodes will all show in the standard desktop.
Sometimes, in a GCO desktop, each node in standard desktop contains only 3 entries, node, user and profile. To fix this, export a desktop from another GCO which has the full tree structure, and import it to the node concerned; and save the desktop.
Re-open the GCO desktop, the full tree structure will show for every node with the default desktop.
#######################################################
#######################################################
To trace launcher define:
S_U_TRACE=Y
U_TRACE_GATERB33=Y

U_TRACE_GAPROV32 for Y for provocation
U_TRACE_GALANB34 for Y for launcher
S_U_TRACE for Y for launcher
U_TRACE_GAS39P41 -> Y  - launcher condition checking traced


On Unix , also chmod u+x $UXEXE/START_ORD.COM
the output should be in the launcher log.
If enabled, each completed job may generate 3.6K of records. 
#######################################################
#######################################################


- uxcleevt ($UXEXE/uxcleevt COMPANY AREA NODE). This program will clean-up incoherent events which may perturb display and launch functions.

- uxcleprm ($UXEXE/uxcleprm COMPANY AREA NODE). This command purges unused parameters and variables in the u_fmsp50 file.

uxpursb was sent to Cisco, to clear old records after the launcher No. reach 9999999.
To clear record base on Launch No. or processing date?
- uxpursb (uxpursb <COMPANY> <AREA> <node> <DATE> <PARAM>) . This command allows Launches older than a certain date to be purged. The Company must be running to execute the command uxpursb (to access data) but the Engines corresponding to the target Area (<AREA> argument) must be stopped (more info is available in the documentation).

uxpursb FLS530 X casdlsup06 20100401 LIST_NOALL

<COMPANY> : The Dollar Unievrse company name (6 Characters).
<AREA> : The Dollar Universe Target area (One Character, must be 'A' or 'I' or 'S' or 'X')
<node> : The target node
<DATE>: Target date above which the records are not purged, that date should be formatted as "YYYYMMDD".
<DATE> : The target date, record are purged if the date is not greater than, this date is under YYYYMMDD notation.
Notice: This date is checked only if it is numeric and contain 8 digits! Warning: Use this date carefully!
<PARAM> : Optional, 4 values may be used: LIST_NOALL, LIST_ALL, PURGE_NOALL, PURGE_ALL

Notice:
The suffix "NOALL" means that the launch base records which have not Job Control record and no hsitorical records were not purged. fmsb only  
The suffix "ALL" means that these record are purged on the first attempt to launch date.
When the PARAM field is ommitted, LIST_NOALL is used by default.
LIST : This is the list mode, no physical delete operation is made
PURGE: Delete mode, the launch database records are also listed.
Using this mode, the Historical files, Parameter files, Job Control Files, Technical event wait files are synchronized with the launch database

#######################################################
#######################################################
To read a fmsb file:
This is a normal launch with launcher No., uproc No. and date ...

X00RMMLDK3000000X_SAP     RMMLDK3003000531911300053539999999999999910004832270002pfmcsp00  100      X_SAP     20071001PSYS_BATCH                      IMPR  200805051604332008050516041120080505160411T20080505160433000000AN0000000 000000000 000   admineat    00000            N   N20071001RMMLDK3001000RMMLDK30000483227RMMLDK30010005352X_SAP                     200805051604112899299pfmcsp00  RMM                    admineat            N4910    V


This is a scheduled task (the second one) and a lauch it created. Note about the second line, as a scheduled task, it has a date in it. The 001 and 552 in those records seems to correspond to scheduled task and provoked task. The No. could also be 100 ro 998 respectively. the 100, 998,552 are probably author code.


X00          000CASDLSUP06C48197_U  000009858700135799999999999999910000000000000casdlsup06001                20080408DSYS_BATCH                      IMPR  200804081000192008040810000320080408100003T20080408100019000000AN        000000000 000   univa       00000000000000000N   N20080408C48197_U  000          0000000C48197_U  0000000CASDLSUP06              N 200804081000000000000casdlsup06IU_                    univa               N3576    V                                                                                                                                                                                                                                                                                                                                                                                                    
X00          000CASDLSUP06C48197_U  000000000000000009999999999999910000000000000          001                20080408DSYS_BATCH                      IMPR  999999999999990000000000000000000000000000 00000000000000000000AN        000000000 000   univa       00000000000000000N   N20080408C48197_U  000          0000000C48197_U  0000000CASDLSUP06              N 200804081000000000000casdlsup06                                                                                                                                                                                                                                                                                                                                                                                                                                                         
The following are provoked tasks, which does not have date.

X00          000CASDLSUP06EXIT0     000000000000000009999999999999910000000000000          552                00000000PSYS_BATCH                      IMPR  999999990000000000000000000000000000000000 00000000000000000000AN        000000000 000   zwa         00010000000000000N   N00000000EXIT0     000          0000000EXIT0     0000000CASDLSUP06              N 999999999999990000000casdlsup06                                                                                                                                                                                                                                                                                                                                                                                                                                                         
X00          000LOCAL1    EXIT0     000000000000000009999999999999910000000000000          552                00000000PSYS_BATCH                      IMPR  999999990000000000000000000000000000000000 00000000000000000000AN        000000000 000   zwa         00010000000000000N   N00000000EXIT0     000          0000000EXIT0     0000000LOCAL1                  N 999999999999990000000casdlsup06                                                                                                                                                                                                                                                                                                                                                                                                                                                         
This one is a provoked task in a session, note that the 000000000000000009999999999999910000000000001 end with a 1

X00C75087    000CASDLSUP06C75087_1  000000000000000009999999999999910000000000001          402                00000000PSYS_BATCH                      IMPR  999999990000000000000000000000000000000000 00000000000000000000AN        000000000 000   bta         00010000000000000N   N00000000C75087_1  000C75087    0000000C75087_1  0000000CASDLSUP06              N 999999999999990000000casdlsup06           

To find the old records from a fmsb and not a task, use the following command:

 grep -a "   2007" u_fmsb50.dta.20080505.txt |grep -v 000000000000000009999999999999910000000000000 |wc -l
 grep -a "   2007" u_fmsb50.dta.20080505.txt |grep -v 00000000000000000999999999999991000000000000 |wc -l
############################################
############################################
When using DQM load balancing, the directory structures on all involved nodes have to be the same. This directory structure is written in to the DQM data file. So, even create a simbolic link, DQM does not use it.
This could be changed in V5.4
############################################
############################################
 01/15/2007 11:42:29 Start Condition Check
Modified directly in the Engine by
operator : ????????????????????
Processing Date 01/15/2007
01/15/2007 11:42:29 Submitted in BATCH Q: SYS_BATCH
	...
	...
	...
The operator is the system user. If your system user is unknown by Dollar Universe, the ???????????????????? will be displayed.
############################################
############################################
############################################
############################################
To enable coredump on Windows.
http://java.sun.com/javase/6/webnotes/trouble/TSG-VM/html/gbkyy.html

\\HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\AeDebug

The two keys are named "Debugger" and "Auto". The Auto value indicates if the debugger specified in the value of the Debugger entry starts automatically when an application error occurs.


      A value of 0 for Auto means that the system displays a message box notifying the user when an application error occurs.
      A value of 1 for Auto means that the debugger starts automatically.

The value of Debugger is the debugger command that is to be used to debug program errors.

Give "Auto" -> "0" ; so, the debugger does not start automatically.

To install Dr. Watson as the postmortem debugger, run the following command.
drwtsn32 -i

Then, run command "drwtsn32" in cmd window; it will bring up the GUI.  
In the Dr. Watson GUI window, make sure that the Create Crash Dump File checkbox is set and that the crash dump file path and log file path are configured in their respective text fields.


Dr. Watson may be configured to create a full dump using the registry. The registry key is as follows.

System Key: [HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\DrWatson]
Entry Name: CreateCrashDump
Value: (0 = disabled, 1 = enabled)

############################################
############################################
In order to activate this functionality, the environment variable U_FMT_INFO 
must be defined.
It needs to be defined in local Windows node also.
This can take the following values :
- « UxS » : The field INFO consists, in this order, of the Uproc label and the 
            Session label.
- « SxU » : The field INFO consists, in this order, of the Session label AND 
            the Uproc label.
- « S »   : The field INFO consists only of the session label.
- « U »   : The field INFO consists only of the uproc label.
############################################
############################################

To display the node name where the job actually run, you need to define the following management criteria in both the GCO node and all of the load balancing nodes.

In the root directory of a Dollar Universe Company, there is a file, u_ffcg42.txt. Please open it and add the following to the bottom. Please update this file on the GCO node and all of the load balancing nodes.

criterion1:name=PHY_QUEUE,label=Physical queue,LEN=20
criterion2:name=NODE,label=Node,LEN=10


Then add the following to the uprocs, for which you would like to get the information. If you want it for all jobs, you could add it to the %UXMGR%\U_ANTE_UPROC 

%UXEXE%\uxset mgt name=PHY_QUEUE value=%DQM_QUEUE%
%UXEXE%\uxset mgt name=NODE value=%S_NOEUD%


After the jobs are launched, you could add 2 new columns in the GCO job monitor, "PHY_QUEUE" and "NODE". The physical queue and the node that run the job will be displayed.  
############################################
############################################
To have the DQM runs load balancing in round robin mode, define the following:
U_DQM_DISPATCH=Y

Otherwise, it will send jobs to the first answered physical queue, could always be the local queue.
############################################
############################################
Message code unknown : (824188960)
 this means that there is a rights issue like set effective user id not set on uxord
############################################
############################################
ux_raz_fic needs to access this file, $UXMGR/uxunifilesp.dsc to find the file definition and size for data file. Without it, it may give 
$UXMGR/ux_raz_fic u_fbvi50 X
unknown file u_fbvi50
or core dump.
It happened when upgrading from V500 to V513. The uxunifilesp.dsc was not updated during the upgrade; the bvi file is not added in. 
Both razfic and reorg need to read file definition and file structure/size from this file.
############################################
############################################
When launch $UXEXE/UNIVERSE :
./cuxxm: error while loading shared libraries: libXp.so.6: cannot open shared object file: No such file or directory

The above error means the motif packages are not installed.

In Redhat Enterprise they need:
openmotif-2.2.3-5.RHEL3.2
openmotif21-2.1.30-9.RHEL3.6
############################################
############################################
To use gvim in GCO
set    U_EDITEUR_R="E:\Vim\vim71\gvim.exe"
set    U_EDITEUR_W="E:\Vim\vim71\gvim.exe"
############################################
############################################
uxvrfuni UNIV50 X
This command can be used to check the coherence in the datas.
It will check for example, if the uproc defined in a session are present in the uproc table, if the MU used in a dependence is stille present...
############################################
############################################
When configuring email notificaion in GCO in V533, when the local node is not in the "User Desktop", it may not show upr in "Node selection" to config email server.
Add it to the user desktop, it shows up.
############################################
############################################
For this error, so far, we found several reasons:
No Exchanger, physical distribution will be done later
command in error!!

1. The exchanger is really busy? It will come back to do it later. In this case, the model task will be distributed anyway, just shows up the message.

2. When there are multiple model tasks for the same session/upr, different MU, and using mu=* in command:

/opt/universe/FDXD14/exec/uxdst tsk EXP upr=R23H_RERAT vupr=000 ses=R23S_RERAT vses=000 node=aschmeap01 mu=* model tmu=UR_WORAPF3
If specify the MU, the error is gone.
/opt/universe/FDXD14/exec/uxdst tsk EXP upr=R23H_RERAT vupr=000 ses=R23S_RERAT vses=000 node=aschmeap01 mu=UR_WORAPF3 model tmu=UR_WORAPF3


3. There are some data file issue in task definition data files, fmta and fmpl.
Since they are deleting and re-generating(distributing from model task) tasks over and over again, it seems that, this time, the old task was not completely deleted. The following records are related to the uproc R23H_RERAT from their data files, and our data files (after inserting the task to TST511) 

They have a few more records in fmpl, which could be left from the old task.
############################################
############################################
The port definitions (without node name) are necessary for a Windows cluster to communicate with remode nodes. 
For example:
#
FDXP01_IO_X     10740/tcp             <==================ADDED THIS
STANZA FROM HERE
FDXP01_IO_S     10741/tcp
FDXP01_IO_I     10742/tcp
FDXP01_IO_A     10743/tcp
FDXP01_CMD      10744/tcp
FDXP01_CDJ_X    10751/tcp
FDXP01_CDJ_S    10752/tcp
FDXP01_CDJ_I    10753/tcp
FDXP01_CDJ_A    10754/tcp
FDXP01_DQM             10755/tcp      <====================TO HERE
#
#
FDXP01_AMP-CON1_IO      10740/tcp     <====================Original
Stanza starts here
FDXP01_AMP-CON1_IO_X    10740/tcp
FDXP01_AMP-CON1_IO_S    10741/tcp 
FDXP01_AMP-CON1_IO_I    10742/tcp 
FDXP01_AMP-CON1_IO_A    10743/tcp 
FDXP01_AMP-CON1_CMD     10744/tcp 
FDXP01_AMP-CON1_CMD_X   10744/tcp 
FDXP01_AMP-CON1_CMD_S   10744/tcp 
FDXP01_AMP-CON1_CMD_I   10744/tcp 
FDXP01_AMP-CON1_CMD_A   10744/tcp 
FDXP01_AMP-CON1_CDJ_X   10751/tcp 
FDXP01_AMP-CON1_CDJ_S   10752/tcp 
FDXP01_AMP-CON1_CDJ_I   10753/tcp 
FDXP01_AMP-CON1_CDJ_A   10754/tcp 
FDXP01_AMP-CON1_DQM_X          10755/tcp 
FDXP01_AMP-CON1_DQM_S          10755/tcp 
FDXP01_AMP-CON1_DQM_I          10755/tcp 
FDXP01_AMP-CON1_DQM_A          10755/tcp 
#
#
FDXP01_AMPPRDDB_IO      10816/tcp
FDXP01_AMPPRDDB_IO_X    10816/tcp
FDXP01_AMPPRDDB_IO_S    10817/tcp 
FDXP01_AMPPRDDB_IO_I    10818/tcp 
FDXP01_AMPPRDDB_IO_A    10819/tcp 
FDXP01_AMPPRDDB_CMD     10820/tcp 
FDXP01_AMPPRDDB_CMD_X   10820/tcp 
FDXP01_AMPPRDDB_CMD_S   10820/tcp 
FDXP01_AMPPRDDB_CMD_I   10820/tcp 
FDXP01_AMPPRDDB_CMD_A   10820/tcp 
FDXP01_AMPPRDDB_CDJ_X   10827/tcp 
FDXP01_AMPPRDDB_CDJ_S   10828/tcp 
FDXP01_AMPPRDDB_CDJ_I   10829/tcp 
FDXP01_AMPPRDDB_CDJ_A   10830/tcp 
FDXP01_AMPPRDDB_DQM_X          10831/tcp 
FDXP01_AMPPRDDB_DQM_S          10831/tcp 
FDXP01_AMPPRDDB_DQM_I          10831/tcp 
FDXP01_AMPPRDDB_DQM_A          10831/tcp 
#
#################################
For Windows cluster configuration 
#################################
We found many configuration issues, and will try to help you to fix them.

1. Please remove the tabulation characters in both YWIT50.def and UNIVERSE.def from both nodes. The files are located in the %UXEXE% directory.


2. For the uxsrsrv.alias on both nodes, please define as the following.

# 
YWIT50_IO_X   YWIT50_IO_X
YWIT50_IO_S   YWIT50_IO_S
YWIT50_IO_I   YWIT50_IO_I
YWIT50_IO_A   YWIT50_IO_A
# 
YWIT50_CMD_X  YWIT50_CMD_X
YWIT50_CMD_S  YWIT50_CMD_X
YWIT50_CMD_I  YWIT50_CMD_X
YWIT50_CMD_A  YWIT50_CMD_X
# 
YWIT50_CDJ_X  YWIT50_CDJ_X
YWIT50_CDJ_S  YWIT50_CDJ_S
YWIT50_CDJ_I  YWIT50_CDJ_I
YWIT50_CDJ_A  YWIT50_CDJ_A
# 
YWIT50_DQM_X  YWIT50_DQM_X
YWIT50_DQM_S  YWIT50_DQM_S
YWIT50_DQM_I  YWIT50_DQM_I
YWIT50_DQM_A  YWIT50_DQM_A
# 
YWIT50_BVS_X  YWIT50_BVS_X
YWIT50_BVS_S  YWIT50_BVS_S
YWIT50_BVS_I  YWIT50_BVS_I
YWIT50_BVS_A  YWIT50_BVS_A
#
YWIT50_JEE_X  YWIT50_JEE_X
#
YWIT50_BQASQL3_IO_X   YWIT50_BQASQL3_IO_X 
YWIT50_BQASQL3_IO_S   YWIT50_BQASQL3_IO_S
YWIT50_BQASQL3_IO_I   YWIT50_BQASQL3_IO_I 
YWIT50_BQASQL3_IO_A   YWIT50_BQASQL3_IO_A
# 
YWIT50_BQASQL3_CMD_X  YWIT50_BQASQL3_CMD_X 
YWIT50_BQASQL3_CMD_S  YWIT50_BQASQL3_CMD_S
YWIT50_BQASQL3_CMD_I  YWIT50_BQASQL3_CMD_I  
YWIT50_BQASQL3_CMD_A  YWIT50_BQASQL3_CMD_A  
# 
YWIT50_BQASQL3_CDJ_X  YWIT50_BQASQL3_CDJ_X 
YWIT50_BQASQL3_CDJ_S  YWIT50_BQASQL3_CDJ_S
YWIT50_BQASQL3_CDJ_I  YWIT50_BQASQL3_CDJ_I 
YWIT50_BQASQL3_CDJ_A  YWIT50_BQASQL3_CDJ_A 
# 
YWIT50_BQASQL3_DQM_X  YWIT50_BQASQL3_DQM_X
YWIT50_BQASQL3_DQM_S  YWIT50_BQASQL3_DQM_S 
YWIT50_BQASQL3_DQM_I  YWIT50_BQASQL3_DQM_I
YWIT50_BQASQL3_DQM_A  YWIT50_BQASQL3_DQM_A 
# 
YWIT50_BQASQL3_BVS_X  YWIT50_BQASQL3_BVS_X 
YWIT50_BQASQL3_BVS_S  YWIT50_BQASQL3_BVS_S
YWIT50_BQASQL3_BVS_I  YWIT50_BQASQL3_BVS_I 
YWIT50_BQASQL3_BVS_A  YWIT50_BQASQL3_BVS_A 
#
YWIT50_BQASQL4_IO_X   YWIT50_BQASQL4_IO_X 
YWIT50_BQASQL4_IO_S   YWIT50_BQASQL4_IO_S
YWIT50_BQASQL4_IO_I   YWIT50_BQASQL4_IO_I 
YWIT50_BQASQL4_IO_A   YWIT50_BQASQL4_IO_A
# 
YWIT50_BQASQL4_CMD_X  YWIT50_BQASQL4_CMD_X 
YWIT50_BQASQL4_CMD_S  YWIT50_BQASQL4_CMD_S
YWIT50_BQASQL4_CMD_I  YWIT50_BQASQL4_CMD_I  
YWIT50_BQASQL4_CMD_A  YWIT50_BQASQL4_CMD_A  
# 
YWIT50_BQASQL4_CDJ_X  YWIT50_BQASQL4_CDJ_X 
YWIT50_BQASQL4_CDJ_S  YWIT50_BQASQL4_CDJ_S
YWIT50_BQASQL4_CDJ_I  YWIT50_BQASQL4_CDJ_I 
YWIT50_BQASQL4_CDJ_A  YWIT50_BQASQL4_CDJ_A 
# 
YWIT50_BQASQL4_DQM_X  YWIT50_BQASQL4_DQM_X
YWIT50_BQASQL4_DQM_S  YWIT50_BQASQL4_DQM_S 
YWIT50_BQASQL4_DQM_I  YWIT50_BQASQL4_DQM_I
YWIT50_BQASQL4_DQM_A  YWIT50_BQASQL4_DQM_A 
# 
YWIT50_BQASQL4_BVS_X  YWIT50_BQASQL4_BVS_X 
YWIT50_BQASQL4_BVS_S  YWIT50_BQASQL4_BVS_S
YWIT50_BQASQL4_BVS_I  YWIT50_BQASQL4_BVS_I 
YWIT50_BQASQL4_BVS_A  YWIT50_BQASQL4_BVS_A 


3. Please update the "services" file, and make sure it contains only the following entries for DUAS.

YWIT50_IO      10600/tcp 
YWIT50_IO_X    10600/tcp 
YWIT50_IO_S    10601/tcp  
YWIT50_IO_I    10602/tcp  
YWIT50_IO_A    10603/tcp  
YWIT50_CMD     10604/tcp  
YWIT50_CMD_X   10604/tcp  
YWIT50_CMD_S   10604/tcp  
YWIT50_CMD_I   10604/tcp  
YWIT50_CMD_A   10604/tcp  
YWIT50_BVS_X   10605/tcp  
YWIT50_BVS_S   10606/tcp  
YWIT50_BVS_I   10607/tcp  
YWIT50_BVS_A   10608/tcp  
YWIT50_CDJ_X   10611/tcp  
YWIT50_CDJ_S   10612/tcp  
YWIT50_CDJ_I   10613/tcp  
YWIT50_CDJ_A   10614/tcp  
YWIT50_DQM_X          10615/tcp  
YWIT50_DQM_S          10615/tcp  
YWIT50_DQM_I          10615/tcp  
YWIT50_DQM_A          10615/tcp  
#
YWIT50_BQASQL3_IO      10700/tcp 
YWIT50_BQASQL3_IO_X    10700/tcp 
YWIT50_BQASQL3_IO_S    10701/tcp  
YWIT50_BQASQL3_IO_I    10702/tcp  
YWIT50_BQASQL3_IO_A    10703/tcp  
YWIT50_BQASQL3_CMD     10704/tcp  
YWIT50_BQASQL3_CMD_X   10704/tcp  
YWIT50_BQASQL3_CMD_S   10704/tcp  
YWIT50_BQASQL3_CMD_I   10704/tcp  
YWIT50_BQASQL3_CMD_A   10704/tcp  
YWIT50_BQASQL3_BVS_X   10705/tcp  
YWIT50_BQASQL3_BVS_S   10706/tcp  
YWIT50_BQASQL3_BVS_I   10707/tcp  
YWIT50_BQASQL3_BVS_A   10708/tcp  
YWIT50_BQASQL3_CDJ_X   10711/tcp  
YWIT50_BQASQL3_CDJ_S   10712/tcp  
YWIT50_BQASQL3_CDJ_I   10713/tcp  
YWIT50_BQASQL3_CDJ_A   10714/tcp  
YWIT50_BQASQL3_DQM_X          10715/tcp  
YWIT50_BQASQL3_DQM_S          10715/tcp  
YWIT50_BQASQL3_DQM_I          10715/tcp  
YWIT50_BQASQL3_DQM_A          10715/tcp  
#
YWIT50_BQASQL4_IO      10800/tcp 
YWIT50_BQASQL4_IO_X    10800/tcp 
YWIT50_BQASQL4_IO_S    10801/tcp  
YWIT50_BQASQL4_IO_I    10802/tcp  
YWIT50_BQASQL4_IO_A    10803/tcp  
YWIT50_BQASQL4_CMD     10804/tcp  
YWIT50_BQASQL4_CMD_X   10804/tcp  
YWIT50_BQASQL4_CMD_S   10804/tcp  
YWIT50_BQASQL4_CMD_I   10804/tcp  
YWIT50_BQASQL4_CMD_A   10804/tcp  
YWIT50_BQASQL4_BVS_X   10805/tcp  
YWIT50_BQASQL4_BVS_S   10806/tcp  
YWIT50_BQASQL4_BVS_I   10807/tcp  
YWIT50_BQASQL4_BVS_A   10808/tcp  
YWIT50_BQASQL4_CDJ_X   10811/tcp  
YWIT50_BQASQL4_CDJ_S   10812/tcp  
YWIT50_BQASQL4_CDJ_I   10813/tcp  
YWIT50_BQASQL4_CDJ_A   10814/tcp  
YWIT50_BQASQL4_DQM_X          10815/tcp  
YWIT50_BQASQL4_DQM_S          10815/tcp  
YWIT50_BQASQL4_DQM_I          10815/tcp  
YWIT50_BQASQL4_DQM_A          10815/tcp  
#
#######################################################
#######################################################
In GCO, the Job exchange and Distribution exchange are, in fact, the data store in fecl and fecd.
For Distribution exchange, it is for the object distribtuion; one record per line in fecd.
For Job exchange, it is for cross node session or event; the record in fecl contains a number, like below: 1000364, more details contains in fecd.

EMcalpmsup01000364EVENEXECX00          X00U_          000001     casdlsup0600000036420080501150257T     calpmsup01          000   00000400000000000000D                                     

distribution exchange window displays intermediate operations during a distribution. So, it may show information send back and force.
#######################################################
#######################################################
The GJM "Monitoring configuration" settings are saved on the target node in file u_fcml50.dta.

#######################################################
#######################################################
"Message code unknown : (538976305)" in the history trace could mean su failed to change user during launch.

For example: a partition mounted with the parameter "nosuid"
Or 
It could be a swap space full.

Overall, it is normally a fork issue.

The following error in the launcher log, or DQM log
system failed: Resource temporarily unavailable
or
Fork failed: Command[scoterm]System Error was: Resource temporarily unavailable
#######################################################
#######################################################
For Windows, when the logon account for user service is NETWORK SERVICE instead of LOCAL SYSTEM (for example using ISS to provide web services), try the following in the useralias.txt file:

NT_AUTHORITY	 Network Service	 Production

NT_AUTHORITY {tab} Network {space} Service {tab} univa
to use tab as the dilimiter instead of space.
#######################################################
#######################################################
To register a unijob node to a univiewer server, run the following command from unijob.

Define the UVMS server int eh values.xml
load unijob env

unijob -install login=<adminuser>[admin] psw=<adminpassword>[admin]
...........

The following error will who if the username or password is wrong.
 ../app/bin/unijob -install login=univa psw=univa

UniViewer Management Server casdlsup06/port 4184: OK
Response KO, status: [3] message: [org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update]

...........
To register to a remote UVMS server, update the /apps/unijob202/unijob122/support6/data/values.xml
    <var id="SRV_AUT_HOST">HOST=calpmzwa</var>


It is recommended to use the default ports for UNIJOB 52001, 52002 and 52003.
#######################################################
#######################################################
U_NO_SETHDLTERM	Generate a core in case of problem (if core creation allowed at system level)	Boolean	SPRE0025	Y	not set	uxsetenv* should be updated, $U restart required			
U_NO_SETHDLTERM=Y

How to generate a core on linux
1. The binary directory need to be writeable
2. If the process is started by root, it won't work
3. kill -11 PID
4. U_NO_SETHDLTERM=Y

Use of the environment variable "U_AUT_RST_LAN" with value "Y" enables to restart automatically DUAS launcher engine on signal which should defaut on core. 
With U_AUT_RST_LAN, launcher will not generate a core.

core generation for V6 is enabled by default.
#######################################################
#######################################################
uproc condition definition 
       | depcon            : (
                          condno       : 01 
                          dep          : ODS_175__T 
                          dtype        : a
                          pdate        : ( , , )
                          mu           : ODS_US     
                          sess         : any 
                          user         : any 
                          status       : terminated 
                          all            
                          expected       
                          nofatal        
                        )

dtype:  is for processing date offset. It can be a, w, c, h, for calendar day, working day, closed day and holiday respecitively.
"all" , "one":  is used when it depends on many jobs from a MU type or a HDP. it can be "one" or "all".
#######################################################
#######################################################
New online purge:
not activated by default
To enable it:
U_IO_PURGE_ENABLE, set to Y
Both dynamic purge and cyclical purge use the same parameters, defined in u_purge_param.ref, one for each area, in $UXDAP, $UXDEX, etc.
dynamic purge based on fmsb, then purge associated records in u_fmcx, u_fmhs, u_fmph,u_fmfu, u_fmev, u_fmtp, u_fmsp, u_fmer and u_fmeq.
If the purge parameters are changed, the purge date defined in fmsb will also be updated.


For cyclical purge, it use the following reference files:
u_fmsb -- for u_fmtp/u_fmsp/u_fmcm files 
u_fmcx -- for u_fmer/u_fmeq/management criterias files 
u_fmhs -- for u_fmph/u_fmfu files. 

A dedicated IO thread will read the u_purge_param.ref in a regular interval. To force it, use 
loadPurParFic <SOC> <ESP> <NODE> 
Then, the launch will ask IO to check the parameter file; then update the fmsb.

Syntax for u_purge_param.ref:
For the retention time, 000 :00 :00 means an infinite retention time.
PUR_CYC and PUR_HHMM are incompatible; one of the two parameters should be left to --- :-- :-- or -- :-- ;  

If u_purge_param.ref is missing or can not be read, the default value will be used.

If the PUR_LOG parameter is put into Y, a log file is created for the relevant area, named u_purge.log.

The chkPurFicParam <file> binary allows for the verification of the correct syntax of the parameters file

If PUR_CYC is defined, at every load, the non-dynamic purge will start up 1 minute after the load.

V6, once the IO purge start time defined as 12:00, it should run at around that time.
If the retention delay changed from 7 days to 10 hours, the next IO purge will use the 10 hours. However, the dynamic purge from launcher will still use the "P" field in fmsb, which means that the records generated before the change of the retention delay will still be 7 days for dynamic purge. Only the job records generated after the change, will be 10 hours.

#######################################################
#######################################################
file descriptor for IO
UXMAXFD = 4096 
It is also available to SAP manager 441 now.
#######################################################
#######################################################
WCO connect to the remote IO server to get the job event info, but access the remote CDJ for the job monitor. 
#######################################################
#######################################################
To send job log in doc format as email attachment, define this: 

On Windows:
for uxsetenv.bat :
set U_SMTP_LOGATTACH_EXT=doc
for the 2 DEF:
U_SMTP_LOGATTACH_EXT doc

For Unix:
export U_SMTP_LOGATTACH_EXT="doc"
############################################
############################################
For Windows CMD uproc, the following error may show upr, if the command does not exist in the user's PATH variable.
 !!! IMPOSSIBLE TO SUBMIT COMMAND - JOB ABORTED !!! 

To fix it, add the pach for the command to the PATH variable. Even dir command may not be able to run.
run "dir" command like this:
cmd /c dir

For now in V533 and V560, if a uproc is saved as CL_INT, then change to CMD uproc, it can not be saved.
An error will pop up:
UXCDE_PutRemoteFile() returned 134709691
############################################
############################################
To turn on BVI tracing 
Define UX_BV_LOG_LEVEL on BVI local windows in 2 DEF and uxsetenv.bat. No need on remote nodes.

OFF      - The logging system is down
DEFAULT  - The logging system is on, and logs some basic information, e.g.  opening and closure of the interface of BV
MODERATE - The logging system is on, and logs more users' operations, this level also logs default level information
AUDIT    - The logging system is on, and logs users' drag, drop, creation, copy and paste etc. of elements, including moderate level
HIGH     - The logging system is on, and logs all information The values are case insensitive.

Logs will be crated with a new directory "bvi", within $UXLEX, $UXLAP, $UXLSI, $UXLIN.
############################################
############################################
To trace exchanger:
U_DEBUG_NET=Y
The logs go to the exchanger log file.
############################################
############################################
Uproc types are defined in u_fttg50.dta.
One known issue is that after upgrading from V500 to V533, the uproc types can be removed. Then, all uxins upr will fail with:
Fatal error writing the Uproc catalogue

The uproc catalogue here probably means uproc type.
The "uxlst upt" will show the available uproc types. If some missing, add them back with 
uxadd upt  upt=CL_INT ref=CL_INT
############################################
############################################
The following error message shows up when inserting uprocs. It could be that the extraction file is corrupted. For example, transfered in ASCII mode. 
Object (CTW_9254E ,000) has been replaced
Invalid function code (must be  DEB, LEC, EFF or CTL)
############################################
############################################
To test interact with desktop.
Please try to create a uproc with the following script. 

############################################
echo on
echo "type somethere here ..."
set /p reading=[type in something]

echo "you have typed %reading%."

set resexe=0
############################################

Then, launch the uproc with the user univo. It will open a blank CMD window. You can type in the following text: "This is a test for 71390", then "enter".

You should be able to see the text you input in the job log. 
############################################
In earlier version of GCO, eg. V512, when GCO updates a launch of a remote node, the remote command CMD server is used. If the CMD port is not open, the update window will take very long, more than 1 hour to show up. However, updating from command line with uxupd fla node= is not be impacted, still very fast.
############################################
To allow stop a job in RHEL 5.2, define:

enable the following variable U_GPID_COMPAT=A (if you are using DQM) or Y (if no DQM) in the DUAS environment files

Without that variable, jobs launched with root may still able to stop; but launched with univa will stay running in system level. 
when stopping with uxsurjob:
<< 2010-01-18 09:06:59 0010657/uxord           /GAMEMO32            /134451746 - %UNI_-E-U_EGAGETP3312, Execution
<< 2010-01-18 09:06:59 0010657/uxord           /UXOS_EndChld        /134709747 - %UNI_-I-UXOS_EndJobAnormal, Abnormal End of Job
   2010-01-18 09:06:59 0010657/uxord           /UXOS_EndChld        /000000000 -   9718 SIGNAL 15

############################################
the void status disappearing after reopening GJM is normal. Those void and virtual status are not stored in data file; they are just graphical elements. If you close and reopen GJM, DUAS will not remember the void records. 

One of the variables could impact the performance: U_GJM_TRACE_THREAD. I commented that out; GJM is back to normal. Void records for skipped optional task still show up.

You can have void status if a job in EVENT WAIT and got deleted; or for a skipped optional task.
Virtual jobs: when the session header is in launch wait, the rest of the session will be in virutal.

For now, GJM can display void status, but UVC can not.
############################################
uxset info can fill some text into the Information field of the job monitor. If both uxset info and U_FMT_INFO are defined, the uxset info will overwriten the Information column.

U_FMT_INFO=S.U
############################################

launcher on TST530 support5 stopped by support6, the following shows on support5 in universe.log
with uxend
$                     << 2009-08-19 11:06:49 0029161/uxord           /uxord               /137068571 - %UNI_-I-TEXTUXXM000502,   STOPPED

with uxendatm
[univa@support5 log]$ << 2009-08-19 11:23:11 0006456/uxord           /uxord               /137068571 - %UNI_-I-TEXTUXXM000502,   STOPPED

This will show on the node where the command launched (support6)
<< 2009-08-19 12:38:54 0011727/uxendatm        /U_UATM              /134448434 - %UNI_-E-U_CMDARRET, Stopped


uxendatm and "uxend atm"  are not traced in remote (support5) audit trail
uxendatm is not traced in any (local or remote) audit trail
############################################
The uxbck command will give the following error, if the target directory is not exist or not writeable.
[univa@casdlsup06 UXDEX]$ uxbck uni exp soc=FLS530 dir=/tmpss
 Command : uxbck uni exp soc=FLS530 dir=/tmpss timeout=005


Message code unknown : (-1)
command in error!!

The same error above can also be caused by data file problem, an offline reorg can fix it.
......................
For 76061, the point 2 fixed it.
Another possibility:

We can see that this issue is not systematic. 
We found the following error message in the universe.log, when the uxbck command failed:


<< 2009-10-12 04:30:18 0005605/uxioserv        /u_traite_req_client /000000000 - Err Backup: Not Multithread Server
<< 2009-10-12 04:30:18 0005605/uxioserv        /u_io_backup         /000000000 - Backup online request with Err min timeout

In the job log:
 Command : uxbck uni soc=ACNPRD exp dir=/uniacnlog/backup idx timeout=005

Err Backup: Not Multithread Server
Message code unknown : (-1)
command in error!!

We have 3 possible leads now.

1. Was the system load very high on 2009-10-12 at 04:30? We can see you have a lot of oracle/java processes running on this node.
It is possible that IO server could not respond fast enough because of the system load. Do you have a top command result at that moment?

Please try to increase the timeout parameter in the command, for example, make it 60.
uxbck uni soc=ACNPRD exp dir=/uniacnlog/backup idx timeout=060

2. Another possible solution is to define the following in the DUAS environment.

"U_CONNECT_ITER_INTERVAL at 5"
"U_CONNECT_ITER_NBMAX at 5"

U_CONNECT_ITER_NBMAX: Number of retries if a connection to the IO server fails
U_CONNECT_ITER_INTERVAL: Interval between the connection retries to the IO server. (seconds on UNIX and milliseconds on Windows)

In V6 node setting -> "Technical settings": 
Seconds between two network connection attempts: U_CONNECT_ITER_INTERVAL
Maximum number of network conneciton attempts: U_CONNECT_ITER_NBMAX

3. Is the target directory /uniacnlog/backup on a local disk? It is possible it can be temporarily unavailable at 2009-10-12 04:30?
......................
uxbck will call the script $UXMGR/univ_backup. It could also give this error when that script univ_backup fails with core.

Message code unknown : (-1)
commande en erreur!!
############################################
To allow CDJ to display 200000 + 10000 records.  CDJ memory allocation
U_CDJ_NBJOB_INIT a 200000     (indiquant le nombre de job initial)
U_CDJ_NBJOB_ADD a 10000      (indiquant le nombre de job pour l?extension de la table des jobs quand elle est pleine)
############################################
The following message in universe.log could be caused by data file issue, for example corrupted fmhs. (NOT SURE)
<< 2009-09-07 05:25:56 0016300/uxdqmsrv        /UXSR_ReadMessage_Uni/135888923 - message corrompu
<< 2009-09-07 05:25:56 0016300/uxdqmsrv        /UXSR_ReadMessage_Uni/135888923 - message corrompu
 
There could also message in DQM log:
message corrompu premier caractere recu [0]

We could define the variable:
U_CRYPT_LOG should point to a file
U_DQM_LOG And the variable to trace the communication layer. With the output, R&D can check it.

############################################
The following error in history trace could mean network issue. 
Exit code : 141                                                                 
############################################
All job aborted with this, no job log. It is on AIX node.
Exit code :   2                                                                 

            HDTEST     A_ETL1     ABORTED               12/17/2009 194406 12/17/2009 194406 Operator     RECOVERED    aetl1pr    SYS_BATCH                       4909   100         0585653 12/17/2009 devstaff     000  000  00  0575376                                                        

<< 2009-12-17 19:44:06 4403418/uxord           /GAB39A41            /134458554 - %UNI_-E-U_EGASNDJ3302, Error-Job submission

Fixed with uxright script.
...........
Another incident on AIX, WB, all job aborted with this in history trace:
Exit code :   2                                                                 

In DQM, each aborted job wrote an error: 
Cannot get "LOGNAME" variable.

This is a failure of the su command. Probably system user issue. 
...........
It can happen on Windows and Unix, external uproc with SAS command or not, no additional message in job log. The command did not run at all. The reason is that the command line argument "SDS_3201_GREECE.sas" has no path. So, it can not be found.

In job log:

C:\WINDOWS\system32>sas SDS_3201_GREECE.sas 

C:\WINDOWS\system32>set resexe=2 

In history trace:
 Exit code :   2                                                                 

It means that the script "SDS_3201_GREECE.sas " can not be found.
It was fixed by change the SAS script to an internal uproc script. For example:

call E:\universe\some_sas_script.bat
set resexe=%errorlevel%

It should also work if specify the path:

C:\WINDOWS\system32>sas E:\universe\SDS_3201_GREECE.sas 

On Unix:
# perl sdfdsf.pl
Can't open perl script "sdfdsf.pl": No such file or directory
# echo $?
2 

############################################
U_MAJQR_MAXLOOP  If a liberation of a resource quota failed, this variable allow to try it again until 99 times. Number V513, FX24475 and later Between 1 and 99. Recommanded : 99 not set   export U_MAJQR_MAXLOOP=99
############################################
About the CDJ

Upon startup, the CDJ server will synchronize with the local IO server.
The GJM consoles will connect to the local IO server.
Upon connection to a remote node, two other connections will be opened, one to the remote IO server, another to the remote CDJ server.
These connections are permanent
There is currently no keep alive (nor heart beat which is in fact the same) for these connections.
This is a work in progress at R&D. 

About the Exchanger

It will deal with records one at a time.
(In a very specific and uncommon situation an issue can occur that will prevent the exchanger from handling its next records, our R&D is working on this)
############################################
Within node list of univiewer, if a remote node is unreachable, it will show Unkown Status. If the user you used to login univiewer does not have the "Role" to connect to it, you will have the same error.
############################################
We recently encountered cases (such as 75568 PSA or 76059 SODIAAL) where error codes:

141
269
66

Could appear in the job logs.

At the time there where sometimes ¿ although not always - connection errors (number 104 or 111 for example) in the universe.log files.
The issue is random and occurs on jobs that worked before and will work later.
It can happen on all Unix systems
It can happen even when DUAS is stopped.

This is due to a SIGPIPE signal received by a command in a uproc script.
For now the only possible WA ¿ while waiting for a fix ¿ would be to enable the retry for DUAS clients and reduce the production peaks if possible.

If you think you are faced with such an issue please let me know ASAP.

On POSIX-compliant platforms, SIGPIPE is the signal sent to a process when it attempts to write to a pipe without a process connected to the other end. 

So this seems to be an issue with the uproc script.
############################################
We had a few cases recently of jobs randomly aborted with a ¿3¿ in the history trace on a line starting with ¿Exec Unknown¿ or ¿l execution est inconnue¿
(please find two examples below)

Please note the 3 below in the examples.

This issue occurs when the u_fmlp file is locked (by a uxdlt evt for example) and that exactly at the same moment an event has to be 
Written for the uproc being executed. This is a bug of course.

Until a fix is developed the WA is to perform the actions on the events at a time when the production is low.
Please contact a PST for more details (LSU, ABR).

Thanks

Alain



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
_!================================================
_!**
$!** PROCEDURE .. :                                                             
$!** VERSION .....:                                                             
$!** EXECUTION .. :                                                             
_!**
_!** PROCESS DATE : 
_!**
_!------------------------------------------------
$!** PARAMETERS. : None                                                         
_!------------------------------------------------
_!**  VARIABLES 
_!================================================
Exec Unknown            3                    00000000001       00               
Execution  unknown in the history file                                          
Management Unit unknown  :   
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  


Aborted:
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

==================================================
##################################################
==================================================

_!================================================
_!**
$!** SESSION .... :  SES_PRIGPA
$!** EXECUTION .. : 0056506
$!** PROCEDURE .. : ECH_PRIGPA
$!** EXECUTION .. : 0394570
$!** M.U. ....... : YECHXX1GPA
_!================================================

09/28/2009 12:01:04 Start Condition Check                                       
                   Processing Date 09/28/2009                                   
09/28/2009 12:01:04 Submitted in BATCH Q: SYS_BATCH                             
                   under ENTRY N°  : 7069                                       
L'execution est inconnue ECH_PRIGPA3YECHXX1GPASES_PRIGPA000000005620056506000394
- Etape 0                                                                       
Fin anormale de l'UPROC                                                         
Fin anormale du job ou job arrete en cours d'execution                          
                                                                                
09/28/2009 12:01:06 *** TASK ENDED ABNORMALLY  ***                              
*** Abnormal execution of Uproc ***                                             

==================================================
##################################################
==================================================

Also, in the universe.log:
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
<< 2009-07-02 17:03:08 0024038/uxjobinit       /GAI08A33            /134452482 - %UNI_-E-U_EGAI08A3301, Exec Unknown
<< 2009-07-02 17:03:20 0024515/uxjobend        /uxjobend            /000000000 - getenv S_PROCEXE Failed
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


There is a FAQ for this.
############################################
############################################
Is it possible to use double quotes for a variable value in command line?
Unfortunately this is not possible in command mode so far.
Nevertheless, it is posible to use the GUI as a workaround. 
############################################
We have confirmed with R&D. If you would like to open and update a uproc, all uprocs defined as its conditions need to exist on the local node.
However, for uproc execution only, you don't need to have the expected uprocs defined locally. 
As the best practice, we recommend to have all the related uprocs defined locally.  
############################################
In V533 or earlier, the file resource, the first check will be launcher, then later will be uxsur.
For V56, will always be uxsur.
############################################
Variable used by ABC GJM.
U_CDJ_CNX_TIMEOUT=20
U_CDJ_DISABLE=no
U_CDJ_TIMEOUT_CONNECT=30
U_CDJ_TIMEOUT_ITER=600
U_GJM_CHECK_CDJ=Y
U_GJM_REFRESH_CYCLE_CHECK_CDJ=600
U_GJM_TIMEOUT_LOCK_CONNECTION=7
U_GJM_TRACE_THREAD=Y
U_GRAPHIC_NO_DRAWING=Y
############################################
This message could be generated when connecting to DQM server port with a telnet command.
<< 2009-11-05 13:33:29 0017360/uxdqmsrv        /UXSR_ReadMessage_Uni/135888923 - message corrompu
############################################
termj.0391 in DQM directory
Those termj.dddd files can be removed after the DUAS company has been shutdown.

Those are temporary files created when there are a large amount of simultaneous executing jobs. For now, there is no automatic procedure to clean them.
Those related jobs will run as usual. However, they will stay in queue, and takes a job limit slot, until they are deleted. 
############################################
Aborted jobs on Windows virtual machines (random issue)

Error message: failed to create sub process in the history trace

How to make sure that is the issue: the issue is random, the Related user service is well started (Univer$e UserName) and upon relaunch the job ends up correctly. Error messages in the universe.log:
<< 2009-04-27 12:00:00 0002672/UniServord      /UXOS_CallServiceUser/135364667 - CallNamedPipe
   2009-04-27 12:00:00 0002672/UniServord      /UXOS_CallServiceUser/000000231 - \\.\pipe\Univ_schedulatore
<< 2009-04-27 12:00:00 0002672/UniServord      /UXOS_CrtPrcJob      /135364667 ¿ CallServiceUser

Case ID: 71467 

Explanation: the system pipe was busy at the time

A system pipe is a client-server (process) communication but in this specific case, it¿s a communication to a service. It¿s specific to W32.
There is no way to list the pipe status. You can only check the error messages.
error code 231 is ERROR_PIPE_BUSY, it means that the pipe is busy.

Solution: Win DUAS 5.6 with DQM and pipe retry variables
DQM_NB_CALL_PIPE and DQM_TIMER_CALL_PIPE (please check the variables.xls or the wiki for more information, possible values¿)
############################################
FX24750 is the latest accumulative patch for V533. In this patch, the IO server trace mode can be turned on or off with variable. The output will be in the universe.log file.

The following is from the readme.txt:
 
69546 : On UNIX machines :
To activate the trace, the U_TRC_MEM_T_BUF variable must be set:

on UNIX in ksh mode:
- update the $UXMGR/uxsetenv and $UXMGR/uxsetenv_ksh files with:
	U_TRC_MEM_T_BUF=Y
	export U_TRC_MEM_T_BUF

This variable will be taken in account after stop and restart of the company.
This variable is case sensitive.
 

Please apply the patch, and define the variable then reproduce this issue. Once you have sent us the uxtrace result and the core file, you could disable the variable.
...........
Signal 6 is SIGABRT and the kernel can kill a process with this signal if there are resources problems.
So it's not a memory segmentation problem, and the variable cannot give us any more information.
############################################
ld.so.1: uxioserv: fatal: relocation error: file uxioserv: symbol u_set_pipe_fd: referenced symbol not found

It means that the library level is different from the binary (executable) level.
All companies are not at the same patch level.
############################################
Stopping a running job is done via a  kill -15 on the GID (Group ID) 
You could find the GID with the following commands.

On Linux
ps -eo pid,pgrp,psr,stat,vsz,command

On AIX
ps -eo pid,pgid,command
############################################
fix in V533, changed the way reorg checks on IO, it will not check the TCP port any more, it will ask for date/time from IO.
############################################
The CDJ server on this node crash several times a week. This error showed in the universe.log when it happened.

<< 2009-12-15 06:07:23 1802300/uxcdjsrv        /u_create_thread     /000000000 - Thread error: pthread_create returns 11

We have received the core. Here is the dbx output. 

############################################
In V533, this could means thread number is not enough. Try:

increase MAXFD in DUAS environment
check if OS limits regarding thread number limitation (per process, system wide) can be increased.


wbaburp009:/opt/universe/WBPROD/exec> dbx ./uxcdjsrv ./core

Type 'help' for help.

[using memory image in ./core]

reading symbolic information ...

 

Segmentation fault in u_deb_dispatch at 0xd6310d44 ($t1)

0xd6310d44 (u_deb_dispatch+0x58) 90640000         stw   r3,0x0(r4)

(dbx) where

u_deb_dispatch(0x0) at 0xd6310d44

(dbx) where

u_deb_dispatch(0x0) at 0xd6310d44

(dbx)
#################################
Error during unijob installation on Windows
ComponentError returned the following data transfer error.
Setup will now abort.

Media Name: DATA
Component: NewFeature1
File Group:
File:
Error Number: -2147418113


The reason for this error could be that the install attempts to update a file that is locked by another application.

Please try to stop all other applications and try the installation. If you still have this problem, you could try to reboot the Windows server and install it before starting any other applications.

In this case, the reason is that the defult installation directory is C:\ ..., however, there is no C:\... on the node. 
#################################
DUAS process does not display full path in ps output.
Since the IO server and all of the engine processes are running as daemons. They are running as a sub-process of the process you have trigged in your shell. So, it more depends on how the sub-process is launched, not the one you run directly in shell.
#################################
reorg and razfic for unijob


Stop the UNIJOB node
load the env, then:
# pwd
/apps/unijob202/unijob122/support6/app/files
# ./unireorg.ksh


Stop the UNIJOB node

go to the "app/bin" directory, and run

./uxrazfic u_fmcm50 X
./uxrazfic u_fmcx50 X
./uxrazfic u_fmer50 X
./uxrazfic u_fmev50 X
./uxrazfic u_fmfu50 X
./uxrazfic u_fmhs50 X
./uxrazfic u_fmlc50 X
./uxrazfic u_fmlp50 X
./uxrazfic u_fmph50 X
./uxrazfic u_fmpi50 X
./uxrazfic u_fmsb50 X
./uxrazfic u_fmsp50 X
./uxrazfic u_fmtp50 X
./uxrazfic u_fseu50 X
./uxrazfic u_fecl50 X
./uxrazfic u_fecd50 X
./uxrazfic u_fppf50 X
./uxrazfic u_fmpf50 X

cd `./unigetvar UXLEX`
rm -f ./X*


All the history traces of the previously executed jobs will be lost.
The variables of a previously aborted job will be lost, this will impact the relaunch of any job which aborted before the initialization.


# ./unigetvar UXEXE
/apps/unijob202/unijob122/support6/app/bin



(a)	Prerequisites
You need to load the UNIJOB environment 

(b)	Stop the UNIJOB node

(c)	Check that your company is well stopped
No uxioserv processes should remain alive.

(d)	Launch the following commands

./uxrazfic u_fmhs50 X
./uxrazfic u_fmph50 X

(e)	Restart the UNIJOB

#################################
#################################
In V560, if starting the GCO without IO, it will show "proxy memory error", instead of "environment unreachable".
#################################
To trace outage,
set U_TRACE_OUTAGE to Y 
#################################
Update access to the user desktop (menu Desktop) from Dollar Universe Console is disabled if the variable 
U_DESKTOP_SECURE_TREE_USER  is set to "Y" in the <COMPANY>.DEF file.
#################################

Intrenal AIX image. 
ACNPRD

/export/orsyp/du/ACNPRD

Here is the node connection information, maybe you can try to ping the IP address after your lunch. J

node : daphne
ip : 10.2.59.3
OS : aix 5.3 64-bit TL-5300-06
user : root/babel17 (via telnet)

The compilator is installed (/usr/vac/bin/cc).
You can use the file-system /export/orsyp.
#################################
XML desktop can not work PROFDEV 

The reason for this issue is that the security control does not allow the XML user desktop to display.

Please update the following part in the %UXMGR%\security.txt file.

# --------------------------------------------------------------
#
# PROFDEV : Developer profile.
#
PROFILE=PROFDEV
USERNAME=*
#
# --------------------------------------------------------------
#                      Area Object 
#                      KEY Value [A,I,S,X] 
AREA=X*
+        <--------- It was "-", please change it "+"
DISPLAY
#
AREA=S*
-
DISPLAY
#
# --------------------------------------------------------------

Then, the user with PROFDEV should be able to display the XML user desktop.
#################################
WINSOCK Error: Connection reset by peer.

Explanation:

A connection was forcibly closed by a peer. This normally results from a lost connection on the remote socket due to a time-out or a reboot.
<< 2010-01-02 18:07:31 0005232/uxjobend        /u_io_callsrv        /000000000 - u_send_msg error : (WinSock): Connection reset by peer (host [FROAFSICP1.emea.loreal.intra])
<< 2010-01-02 18:07:31 0005232/uxjobend        /CALL_UXIOSRV        /000000000 - u_io_callsrv(on pfsicp1,LOGC_P,X) returns error -1

http://www.sockets.com/err_lst1.htm#WSAECONNABORTED

WSAECONNRESET (10054) Connection reset by peer.

Berkeley description: A connection was forcibly closed by a peer. This normally results from a loss of the connection on the remote socket due to a timeout or a reboot.

WinSock description: Same as Berkeley. On a datastream socket, the connection was reset. This reset could be generated locally by the network system when it detects a connection failure, or it might be received from the remote host (in TCP terms, the remote host sent a RST packet). This error is also possible on a datagram socket; for instance, this error could result if your application sends a UDP datagram to a host, which rejects it by responding with an ICMP Port Unreachable.

User suggestions: Some network systems have commands to report statistics. In this case, it might be possible to check the count of TCP RST packets received, or ICMP Port Unreachable packets. See other suggestions under WSAECONNABORTED. 
#################################

83265
This behavior is normal. Since Dollar Universe's disk usage can be very different from node to node, it cannot be determined during the installation. Windows relies on the Windows installer for the information. Since DUAS can not provide this information during installation, Windows will use some algorithms to estimate the disk space used by DUAS. This algorithms is based on the "words" contained in the application's name. For Dollar Universe, it turns out to be very inaccurate.   

This is only a display issue on Windows, not the real disk usage of the DUAS.
#################################
"could be answer:"
This message appears when a task is blocked following for example a uncorrect closure of DollarUniverse interface.
To solve this issue, open the tasks window and click on 'unlock' on the concerned task (or more).

<< 2006-05-23 08:22:00 0005980/uxcal /GAI81A32 /134455474 - %UNI_-E-U_EGAI81A3202, Item locked in schedule file. Key : ~

It cold also happen when trying uxdlt tsk or uxshw tsk, and the task is locked.
Item locked in schedule file. Key : ~
#################################
<< 2010-01-27 10:40:34 1462314/uxjobend /io_srt_tsk_r /000000000 - u_recv_msg error : Connection closed (host [10.185.19.4BNPPAR_IO_X])

Please be aware that the io_srt_tsk_r function deals with Self Relaunch Task.

<< 2011-05-02 08:10:09 0027560/uxjobend        /io_srt_tsk_r        /000000000 - u_recv_msg error : Errno syserror 4: Interrupted system call (host [reg-dut01.vVITDEV_IO_X])
Could be an IO server can not handle too much requests?
The uxjobend is responsible to trigger the relaunch. It is part of the story.

io_srt_tsk_r is also used for cross node session.
#################################
When the reporter client is installed in a DUAS, there is directory created in the $UXMGR, for example,
     91447 drwxrwxrwx   6 univa    universe      96 Aug 15  2008 reporter2_cli
It won't update the uxversion file.
#################################
U_CALC530_DEBUG to Y to trace the calculator
The trace will be added to the Calculator log file

$UXLEX/.COMPANY_NAME._CAL.AREA..LOG
#################################
A cyclical task with 0 minute launch window and 0 minute frequency can caused calculator to stop with signal 8.

SIGFPE	 8	Core	Floating point exception

       | sun          : (0000,000,00)
       | cyclical     : (every 00000h 00min from 02/06/2010 17:30 during 000h 00min)
       | edate        : ()

<< 2010-03-02 08:45:09 0023735/uxcal           /UXOS_HdlTermProcess /000000000 - execution handler : SIGNAL = (8) PID = (23735) PPID = (1) GPID = (23735)

#################################
The workaround will force the stdin assignement to /dev/null - instead of stdin being assigned to another "random" device.

The commands RSH and REXEC cannot be used in batch mode as Dollar Universe has a specific value for the STDIN (/dev/null).
Actually, the STDIN value depends on the parent process. Consequently, the STDIN canal is closed by default by Dollar Universe, which prevents the correct execution of the previous commands.
Turnaround : You can solve this issue if you redirect the standard entry by using the parameter [-n] while launching the command (STDIN to /dev/nul).
#################################
To access the DUAS from UNC, the UVC login user has to be in DUAS user table or proxy (OS: WEB).
#################################
For now, we can see that the main bottle neck is at the IO server. We would recommend to increase the priority for the 3 main processes: IO server, the launcher engine and the DQM server. Those 3 processes are the ones experiencing performance issue most often.

For example, 
33 for uxioserv
20 for uxord
10 for uxdqmsrv

Please be aware that the priority will be inherited by all the subprocesses. They will have higher priorities than other user background processes.
#################################
After upgrading to v560 from V533 or v513, the proxy table will not work. The IO server won't be able to start. The patch FX24812 is needed to fix the issue. 

74346: on all OSs:
The proxys configuration file is not in an available format when upgrading in version 5.5 and higher
Problem corrected.

73315: on Windows machines: 
Business Views Console 2.6 was unable to open the view created on older BVI servers displaying an error 
message mentioning an licence error.
Problem corrected.

73834: on Windows machines:
This problem occurs when using the Manager for HP OpenView Operations. The uxspv_ito library does not send events when a job status change occurs. This problem is a duplicate of the 73606 on Unix.
Problem fixed.
#################################
The following error in job log, could be that the uproc has some definition problem. 
It could be that the uproc has a wrong version. For example, the uproc was created in EXP and inserted back to APP; and the vupr was not properly set.

The system cannot find the file specified.
'"D:\du\TST530\tmp\AA0000045.bat"' is not recognized as an internal or external command,
operable program or batch file.
Could Not Find D:\du\TST530\tmp\AA0000045.bat
#################################
For error message like:
<< 2010-03-23 17:46:22 0008028/UniServSur      /GAFILE32            /134451602 - %UNI_-E-U_EGAFILE3208, Missing extraction criteria

run this will fix it
$UXMGR/ux_raz_fic u_frrv50
$UXMGR/ux_raz_fic u_fmer50 X

u_frrv50 Resources being supervised
u_fmer50 Expected Resource events
#################################
for VMS, all system users are in upper case, DUAS and GCO user should also be in upper case. 
Otherwise, in job log, you may have error like:

Unknown Username         
#################################
It is a Oracle bug, could show in job log.

Error 45 Initializing In SQL*Plus When Running A Sql Script From OCFS
Doc ID: Note:281450.1


Steps to reproduce are shown by example as follows:

1. Create a test.sql script on OCFS filesystem containing sql:
startup nomount

2. Check that test.sql script is in correct directory:
$ ls -l /ocfs/scripts
total 1
-rw-r--r-- 1 apcluste dba 16 Aug 25 18:11 test.sql

3. Invoke SQL*Plus:
$ sqlplus /nolog

SQL*Plus: Release 10.1.0.2.0 - Production on Wed Aug 25 18:17:41 2004
Copyright © 1982, 2004, Oracle. All rights reserved.

4. Connect to database:
SQL> connect / as sysdba
Connected.

5. Execute script:
SQL> @/ocfs/scripts/test.sql
Error 45 initializing SQL*Plus
Internal error


Cause
The issue is identified as Bug:3039738. This typically reproduces when SQL script file is on a OCFS filesystem created on shared device (for example, SAN storage).

Fix
The only workaround, until bug is fixed, is to copy the SQL script file to a local disk (in case of Linux, a ext3 filesystem).

Note: You can find the filesystem mount points available on system using command "mount".
References
Bug 3039738 - Error 45 Initializing Sql*Plus Running A Shell Script 
#################################
**** BVI commands ****

The are several commands available for Busines View to produce a report on the BVS, which are explained below:
  

1) %UXEXE%\uxbvscli <Company_Name> <Area> <Local_Node> VIEW <BVI Name>

This command will provide a report on a specific Business View. The result will have name of the Business View, the offset, the Criteria and the execution number of the jobs.

For Example:

%UXEXE%\uxbvscli PRE530 X casdwsup07 VIEW TEST4

-----------------------------------------------------
View report for TEST4, 2010031217012400
-----------------------------------------------------
Offset: [-1d,-0h,-0m] -> [+1d,+0h,+0m]

> CRITERIA 0
 .Node         : *         
 .Session      : *         .*  
 .Uproc        : *         .*  
 .MU           : *         
 .Event status : aborted

2 event(s) matching this criteria:
-----------------------------------------------------
(0)--> Numlanc 0301820, area X, Node casdwsup07
(1)--> Numlanc 0301935, area X, Node casdwsup07



2) %UXEXE%\uxbvscli <Company_Name> <Area>  <Local_Node> <Monitored Node>

This command will provide the names of the business view available on the being monitored and the execution number of jobs.

For example:
%UXEXE%\uxbvscli PRE530 X casdwsup07 NODE casdwsup07


-----------------------------------------------------
Node casdwsup07 report, 2010031217034700
-----------------------------------------------------

Offset: [-1d,-0h,-0m] -> [+1d,+0h,+0m]
Jetlag with local: 0 seconds

2 view(s) for this node
-----------------------------------------------------
(C834451_35)-casdwsup07-X
(C834451_53)-casdwsup07-X


2 event(s) for this node
-----------------------------------------------------
X0301484 (aborted): 1 view(s): (C834451_35)-casdwsup07-X 
X0301621 (aborted): 1 view(s): (C834451_53)-casdwsup07-X 


3) %UXEXE%\uxbvscli  <Company_Name> <Area>  <Local_Node> MEMORY

This command will provide memory report for the BVS server of the local node.

For example:

%UXEXE%\uxbvscli PRE530 X  casdwsup07 MEMORY


Memory report for PRE530_BVS_X on node casdwsup07 - 2010031217041400

-------------------------------------------
1 reference node(s) in memory
-------------------------------------------

00 casdwsup07

-------------------------------------------
1 node(s) in memory
-------------------------------------------

000 casdwsup07 1765j/10000 119v/200 1765w/10000

-------------------------------------------
119 view(s) in memory
-------------------------------------------

000 (C834451_35)-casdwsup07-X                          1n 1o 1c
001 (C834451_53)-casdwsup07-X                          1n 1o 1c
002 (C83451_1)-casdwsup07-X                            1n 2o 1c
.
.
.



-------------------------------------------
Technical report
-------------------------------------------
3 running thread(s)
log level is 3
time out is 10 second(s)
monitor time out is 10 second(s)
old CDJ mode: NO
CDJ reconnection time: 15 minute(s)
per node job table: 10000, +1000
per view ses header table: 1000, -100
view table: 200, +10
node table: 100, +50
view idle table: 100, +3
node idle table: 25, +12
thread stack size: 128 Ko



**** BVS variable ****

There's another useful variable called U_TAB_VIEW_NB_INIT. This variable defines the maximum number views to be calculated. By default, the value for this variable is 100 views. Therefore, if you have more than 100 Views created, some VIEWs may stays in "In Progress" status. For example if you have 150 views defined, set it to 200 or 500. However(WARNING), this will increase the memory consumption of BVS process.


-Stop your company and define the variable U_TAB_VIEW_NB_INIT. 

In the %UXMGR%\uxsetenv.bat file:

set U_TAB_VIEW_NB_INIT=200

In the %UXEXE%\UNIVERSE.def and %UXEXE%\<Company_name>.def  files:

U_TAB_VIEW_NB_INIT 200

-Restart your company
#################################
If valorized to Y  , U_FLA_KEEP_RELATIONSHIP environment variable ensures that the uxupd fla command does not break the ¿link¿ between a launch and its origin task; this means that the launch was created from task data and is still considered as created from this task even after the update command.

If U_FLA_KEEP_RELATIONSHIP  is not valorized to Y, then after the uxupd command,  since the launch can have been manually modified then it is no more considered as created from a task.

Relation between task/launch and its impact when performing an action on the launch are detailed in DUAS manuals.
#################################

This command will send an email without attachment 
TestSendMail SUBJECT=test_1 BODY  "to=zwa@orsyp.com"


This one will send an email with attachment /apps/du/530/TST530/mgr/mail_mime.txt.
TestSendMail SUBJECT=test_1 BODY  "to=zwa@orsyp.com" attachment=/apps/du/530/TST530/mgr/mail_mime.txt

From the readme of FX24750

............................................
68087: All OSs:
To configure MIME types, the mail_mime.txt file in the directory UXMGR may be used.

A template file is also mail_mime_template.txt delivered in the directory UXMGR and contains the default options for sending emails.

The template file will have the following contents:

version = "1.0"
subject_charset = "unicode-1-1-utf-7"
subject_encoding = "B"
header_type = "multipart / mixed"
body_type = "text / plain"
body_encoding = ""
body_charset = "unicode-1-1-utf-7"
body_disposition = "inline"
attachment_type = "text / plain"
Transfer_encoding = "quoted-printable"

Syntax option="value" must be respected (including breaks), if an option is not defined the default value is used.

It is recommended to change the default values only if malfunctions concerning the sending of emails are encountered. Knowledge of MIME types is recommended if the options are modified. SMTP servers involved in sending e-mails may have to be configured to handle MIME types. DUAS does not support all MIME types, especially MIME types relating to multimedia content.

The version option allows to define the MIME types version, this value should be "1.0".

"subject_charset" option allows to define the character set used in the subject of the email, it must be valued at a value of character sets supported by MIME types (http://www.iana.org/assignments/character-sets ). The default "unicode-1-1-utf-7" supports the majority of languages.

"subject_encoding" option allows to define an encoding for the subject of the email, it must be valued to "B" (base64 encoding) or to "Q" (quoted-printable encoding) or to "" (no encoding)

"header_type" option allows to define the format of the email, in the context of DUAS, the option "multipart/mixed" is recommended. DUAS does not support the multimedia type options.

"body_type" option allows to define the content of the message body, in the context of DUAS, the "text/plain" is recommended. DUAS does not support the multimedia type options.

"body_encoding" option allows to define an encoding for the body of the email, it must be valued to "B" (base64 encoding) or to "Q" (quoted-printable encoding) or to "" (no encoding).

"body_charset" option allows to define the character set used in the body of the email, it must be valued at a value of character sets supported by MIME types (http://www.iana.org/assignments/character-sets ). The default "unicode-1-1-utf-7" supports the majority of languages.

"body_disposition " option allows to define disposition of the email body. In the context of DUAS, the "inline" option is recommended. DUAS does not support the multimedia type options.

"attachment_type" option allows to define the type of pieces for email attachments. In the context of DUAS, the "text/plain" option is recommended. DUAS does not support the type of multimedia options.

The option Transfer_encoding sets the encoding for the mail attachment. It must be valued to "B" (base64 encoding) or to "Q" (quoted-printable encoding) or to "" (no encoding).

For reference http://fr.wikipedia.org/wiki/Multipurpose_Internet_Mail_Extensions.

The binary TestSendMail (located in the directory UXEXE) can be used to test sending email by DUAS. It is used within the context of a DUAS company and therefore uses the same options than the company DUAS for the SMTP and MIME parameters.

After loading of the environment of the DUAS company, usage is:

TestSendMail SUBJECT = <SUBJECT> BODY <email to = ADDRESS = <ATTACHMENT list> ATTACHMENT FULL path>
SUBJECT = used to define the subject of the email
BODY is a mandatory parameter specifying that the email includes a message body, the content of the message body is defined in the binary test.
"to=" allows to define a list of addresses of recipients of the email (; is the separator)
ATTACHMENT = lets you specify the full path of an attachment to email (watch only the text files are supported)

(There is no online help for this binary test).
............................................
#################################
x64 Windows 2003
 IP Address. . . . . . . . . . . . : 192.168.4.137
administrator: ors12a90
#################################
From the patch FX24812 of v560, it is now possible to trace the execution of the u_batch. The variable U_BATCH_LOG must be defined to Y in $UXMGR/uxsetenv* files. 
#################################
To dump both dta and idx
Load target DUAS env, eg. FLS530, then go to the data files directory and run it.

=================================
sudo su univa
cp mdfaprgb.dta    $UXDIR_ROOT
cp u_ffcg42.txt    $UXDIR_ROOT
cp u_fmqp50.dta    $UXDIR_ROOT
cp u_fmqr50.idx    $UXDIR_ROOT
cp u_frra50.dta    $UXDIR_ROOT
cp u_frre50.idx    $UXDIR_ROOT
cp dffdob50.dta    $UXDIR_ROOT
cp mdfapr50.dta    $UXDIR_ROOT
cp mdfaprgb.idx    $UXDIR_ROOT
cp u_fmeq50.dta    $UXDIR_ROOT
cp u_fmqp50.idx    $UXDIR_ROOT
cp u_fmrl50.dta    $UXDIR_ROOT
cp u_frra50.idx    $UXDIR_ROOT
cp u_frrv50.dta    $UXDIR_ROOT
cp dffdob50.idx    $UXDIR_ROOT
cp mdfapr50.idx    $UXDIR_ROOT
cp u_fmeq50.idx    $UXDIR_ROOT
cp u_fmqr50.dta    $UXDIR_ROOT
cp u_fmrl50.idx    $UXDIR_ROOT
cp u_frre50.dta    $UXDIR_ROOT
cp u_frrv50.idx    $UXDIR_ROOT

cp u_fbvi50.dta    $UXDEX
cp u_fecd50.idx    $UXDEX
cp u_fmcx50.dta    $UXDEX
cp u_fmfu50.idx    $UXDEX
cp u_fmpf50.dta    $UXDEX
cp u_fmpl50.idx    $UXDEX
cp u_fmta50.dta    $UXDEX
cp u_fppf50.idx    $UXDEX
cp u_fbvi50.idx    $UXDEX
cp u_fecl50.dta    $UXDEX
cp u_fmcx50.idx    $UXDEX
cp u_fmhs50.dta    $UXDEX
cp u_fmpf50.idx    $UXDEX
cp u_fmsb50.dta    $UXDEX
cp u_fmta50.idx    $UXDEX
cp u_frup50.dta  $UXDEX
cp u_fbvm50.dta    $UXDEX
cp u_fecl50.idx    $UXDEX
cp u_fmer50.dta    $UXDEX
cp u_fmhs50.idx    $UXDEX
cp u_fmph50.dta    $UXDEX
cp u_fmsb50.idx    $UXDEX
cp u_fmtp50.dta    $UXDEX
cp u_frup50.idx  $UXDEX
cp u_fbvm50.idx    $UXDEX
cp u_fmca50.dta    $UXDEX
cp u_fmer50.idx    $UXDEX
cp u_fmlc50.dta    $UXDEX
cp u_fmph50.idx    $UXDEX
cp u_fmse50.dta    $UXDEX
cp u_fmtp50.idx    $UXDEX
cp u_fseu50.dta  $UXDEX
cp u_fcml50.dta    $UXDEX
cp u_fmca50.idx    $UXDEX
cp u_fmev50.dta    $UXDEX
cp u_fmlc50.idx    $UXDEX
cp u_fmpi50.dta    $UXDEX
cp u_fmse50.idx    $UXDEX
cp u_fmtr50.dta    $UXDEX
cp u_fseu50.idx  $UXDEX
cp u_fcml50.idx    $UXDEX
cp u_fmcm50.dta    $UXDEX
cp u_fmev50.idx    $UXDEX
cp u_fmlp50.dta    $UXDEX
cp u_fmpi50.idx    $UXDEX
cp u_fmsp50.dta    $UXDEX
cp u_fmtr50.idx    $UXDEX
cp u_fupr50.dta  $UXDEX
cp u_fecd50.dta    $UXDEX
cp u_fmcm50.idx    $UXDEX
cp u_fmfu50.dta    $UXDEX
cp u_fmlp50.idx    $UXDEX
cp u_fmpl50.dta    $UXDEX
cp u_fmsp50.idx    $UXDEX
cp u_fppf50.dta    $UXDEX
cp u_fupr50.idx  $UXDEX

=================================
############################################
For DQM it is activated by the following variables:
DQM_NB_CALL_PIPE
DQM_TIMER_CALL_PIPE en secondes
############################################
The message in the attachement is normal.
Following a restart the launcher is trying to synch with jobs that were running at the time of the shutdown.
If they are not present anymore on the system the messages will appear and the jobs will be aborted.

| 2010-04-21 13:49:19 |WARN |LAN|pid=1736.1844| k_ord_vrf_exec            | eventName [0JOBUNIJOBX0000107dcentr-dsadm-01] sync in error [2]
############################################
In u_fupr50.dta, if the uproc has the field, 1Y, it means the email notfication is enabled.
84436-4   000     20100610135553                                                                                                                                                            BCJ01OO N00NNO                                                                   00000 IU_ CL_INT      1Y  

If the $UXPEX/upr_name_000.mail is missing, and the email notification was defined, the uproc extraction will fail.
The first time extract it, it will say. 
Fatal error reading the Uproc's procedure file

If run the same extraction command again, it will say:
(UPR_NAME  , 000) This object has already been extracted
No articles were extracted
#################################
Once it occurs again, please run the following command.

$UXEXE/uxiotrclck PROD50 X mfguniprd

For V6, just this:
$UXEXE/uxiotrclck 


The output will be in $UXLEX. It will generate a file name like: 
trc_lock_io_93_9617_2010090207451100.log
If u_fmsb is present in the output, there is probably an issue.

The output:
=======================================================
command uxiotrclck
=======================================================
============================================================

connected engine 4

id_cli         code    state     wake_date 
32              C      SLEEPING  20100902075000
42              L      SLEEPING  20100901223001
43              E      SLEEPING  20100902074619
46              S      SLEEPING  20100902074624

============================================================
id_cli 32 code C


fichier u_fmpi50
     fichlog u_mmpi04
          numart    1
============================================================
id_cli 42 code L


fichier u_fmpi50
     fichlog u_mmpi04
          numart    3
============================================================
id_cli 43 code E


fichier u_fmpi50
     fichlog u_mmpi04
          numart    5
============================================================
id_cli 46 code S


fichier u_fmpi50
     fichlog u_mmpi04
          numart    7
============================================================
u_fmpi50 : nb_element 

numart         id_cli
7              46
5              43
3              42
1              32


The explanation: 


This utility binary can be used to trace the records (record = article of one of DUAS sequential indexed file) locked by IO server clients.

For an IO server of a given area, output gives first the list of engines connected to the IO server, their state (WORKING, SLEEPING...) and their next wake-up date. 

Then the output givens the locks detained by the started engines of the area.

Finally the output gives a summary of the locks detained by IO clients for DUAS files.

Entry details:

-	id_cli : identifier to identify an IO client (ex: launcher) which detains a locked record
-	code : internal Orsyp code of the client (ex: C=calculator)
-	fichier/ fichlog : physical name and logical name (logical = Orsyp internal) of the DUAS file for which a record is locked
-	numart    : identifier to identify the locked record of the file

Regards

FSO

PS: 

Here the result shows that the 4 engines of the area are sleeping and each has a lock on a different record in the u_fmpi50 file; this seems to be OK.


#################################
To start univiewer console webstart, unpack the kit to "webapps", and update the line in "uvc.jnlp".

<jnlp spec="1.0+" codebase="http://casdlsup06:8080/univiewer_console_webstart_v210" >

When starting UVC from Web Start in Internet Explorer, the log file folder is located in the personal user folder (C:\Documents and Settings\%user%\univiewer_console\logs).
#################################
If you delete the job log itself within the uproc script, for example,

	...
	...
rm -rf $UXLEX/X*

All of the FD will be used soon, and the following messages will show. However, the IO and engines won't die.

The messages are from universe.log and IO log.
<< 2010-07-12 15:55:03 1179660/uxioserv        /u_io_create_thread  /000000000 - u_io_create_thread - System error 11 : thread launch type 0 failed (unable to create new thread), thread_number 8

20100712 162507 - [u_io_create_thread] - not enough ressources, check UXMAXFD environment variables and/or system limits for maximum number of file descriptors/threads/processes per process/user/system wide - system function [pthread_create] error [EAGAIN] - : Not enough space

EAGAIN        Insufficient resources to create another thread, or a system-imposed
              limit on the number of threads was encountered.  The latter case may
              occur in two ways: the RLIMIT_NPROC soft resource limit (set via
              setrlimit(2)), which limits the number of process for a real user ID,
              was reached; or the kernel's system-wide limit on the number of
              threads, /proc/sys/kernel/threads-max, was reached.
#################################
##################################################
==================================================

_!================================================
_!**
$!** PROCEDURE .. : BWPPD00565
$!** EXECUTION .. : 0014939
$!** M.U. ....... : S_BWP_LB  
_!================================================

08/11/2010 22:45:00 Start Condition Check                                       
                   Processing Date 08/11/2010                                   
08/11/2010 22:45:00 Submitted in BATCH Q: SYS_BATCH                             
                   under ENTRY N°  : 8932                                       
Exit code : 113                                                                 
                                                                                
08/11/2010 22:45:00 *** TASK ENDED ABNORMALLY  ***                              

==================================================

This could be an user authorization issue. In DQM log:
Cannot su to "wbuniva" : Authentication is denied.

Because the launcher or the DQM is not root.

#######################################################
You can communicate to the customer that we generated a hot fix that allows Dollar Universe to submit jobs without executing the user profiles.
The patch is the FX24864 and is only available for 5.6 Solaris Sparc. Yilin will upload it on the ftp.
 
As we don¿t have the customer configuration available at ORSYP, we cannot guarantee you that this fix will solve the issue experienced by the customer. This is a targeted attempt based on the information we have, but it may fail. So I would be cautious in the communication as we will only know if we succeeded once you complete the test in the customer environment.
 
I recommend to follow these steps:
1/a/ Stop Dollar Universe
   b/ Define the variable S_SU_JOB to su in the 3 uxsetenv files.
   c/ Restart Dollar Universe.
   d/ Make sure the following line is present in the universe.log
<< 2010-08-24 14:50:19 0009996/uxord           /uxord               /000000000 - Custom su enabled by S_SU_JOB: su
   e/ Submit the a test job, check  if ok.
 
If this is still KO
 
2/a/ Stop Dollar Universe
   b/ Define the variable S_SU_JOB to su in the 3 uxsetenv files.
        Define the variable S_USER_SHELL to csh in the 3 uxsetenv files.
   c/ Restart Dollar Universe.
   d/ Make sure the following lines are present in the universe.log
<< 2010-08-24 14:50:19 0009996/uxord           /uxord               /000000000 - Custom su enabled by S_SU_JOB: su
<< 2010-08-24 16:15:22 0011231/uxord           /uxord               /000000000 - Custom user shell enabled by S_USER_SHELL: csh
   e/ Submit the a test job, check  if ok.


It is also possible to define:
S_SU_JOB="sudo su"
#################################
To trace V540 and later DQM

DQM_NET_TRACE = Y

DQM_FONC_TRACE = Y

DQM_QUELOG_TRACE = Y

The trace for new DQM. 
DQM_CONF_TRACE=Y, then get the DQM log.
#################################
#################################
*  DOLLAR_UNIVERSE:UNI     5                   20201231      ZQZL1HE25DTCDSPA3A
*  DOLLAR_UNIVERSE:GCO     2                   20201231      ZQZL1HE25DTCDS829A
*  DOLLAR_UNIVERSE:REN     2                   20201231      S9TLKJ5X8MFWBWCIMG
*  DOLLAR-UNIVERSE:REP     2     USER=20       20201231      XW4I3WY73M86VCGACLW
*  DOLLAR_UNIVERSE:DEN     2                   20201231      BU47807THDWAYT6EPQ
*  DOLLAR-UNIVERSE:WCO     2     USER=50       20201231      UT2A0TV40J53S9D79FY
*  DOLLAR-UNIVERSE:DOC     2     USER=20       20201231      FEM1LEGQL5RPDVZTVVU
*             DOLLAR_UNIVERSE:BVI         2           20201231      19JNJ5FRKZU3T1UJKD        
#################################
FedEx case  96016, submission for some users staying in PENDING in ctl, but in fact, executing in queue, uxjobinit hang in system. job log created but empty.
 Root cause determined to be automount failing.  The users in question had their home directory mounted by automount.  $U would attempt to su from root to the user and would hang due to home directory not being available.
#################################
This behavior is normal. For parallel launch, a launch is created at the beginning of the current launch window, not the previous one.

You can see the different behavior with this test: 
Create a test to run every 3 minutes with 10 minutes launch window. 

Pay attention to when the launches are created.
The launches are created at 03, 06, 09, 12, instead of 10, 20, 30; and no launches are missed.
#################################
On Windows, the 32bits services have some limitations on 64bits systems:

Some environment variables are different:
%PROGRAMFILES% > c:\program files (x86)\   32bits process
%PROGRAMFILES% > c:\program files\            64bits process

Some directories are transparently redirected:
C:\windows\system32  > c:\windows\syswow64  32bits process
C:\windows\system32  > c:\windows\system32  64bits process

On 64bits system, if a script is running in a 32 bits cmd, he will not see the same path and variables.

Because of that, you can now install user services in 32 or 64 bits.
Using SERVICE32 or SERVICE64 options, the user services are forced in 32 or 64 bits without no check.

With no option, the previous mode is used. When no option was previously used, default mode (32 bits) is selected.


Using a 64 bits installation kit on a 64 bits OS, the SERVICE64 mode is used. 

Implementation Check --
uxversion file examples:
32 bits mode:
echo Start of installation of FX24800 SERVICE32 (07/12/2009 11:48)
echo End of installation of FX24800 SERVICE32 (07/12/2009 11:48)
64 bits mode:
echo Start of installation of FX24800 SERVICE64 (07/12/2009 11:48)
echo End of installation of FX24800 SERVICE64 (07/12/2009 11:48)
If no option are selected during the patch installation, the standard messages will be used.
64bits kit mode:
echo Start of installation of a Dollar Universe Application Server 5.3.3 (installation kit 533 SERVICE64 11-24-2009 18:33:41)
echo End of installation of a Dollar Universe Application Server 5.3.3 (installation kit 533 SERVICE64 11-24-2009 18:34:38)
In Case The Procedure Is Unsuccessful

Should the issue persist please open a new case at DollarAccess mentioning the FAQ #84926
Implementation Procedure

 

Follow the readme instructions and at the following step:

7 Launch install.bat UPDATE_KIT_NAME
(to use the same mode as the previous patch (or kit) installation)

+ to install the user services in 32 bits
install.bat UPDATE_KIT_NAME SERVICE32

+ to install the user services in 64 bits
install.bat UPDATE_KIT_NAME SERVICE64
#################################
If you see pop up message from UVC when accessing unijob, something like:

unauthorized operation ...

It is probably becuase that the user has not proper role created in the UVMS. Create the role for unijob and assign to the user, it should fix it.  
#################################
For this error in UVC:
The access is denied, usually due to security constraints or license restrictions. : univa. The access is denied because the user has no proxy defined on the given environment. 

On the $U side, 
<< 2010-10-28 16:34:47 0005989/uxioserv        /u_traite_req_io_prox/000000000 - username (WEB,calpmzwa,,univa) not in proxy table

[univa@casdlsup06 work]$ setproxy WEB "*" "*" "*" univa
[univa@casdlsup06 work]$ loadproxy_io casdlsup06 TST530 X

Adding the WEB entry fixed it:

[univa@casdlsup06 work]$ lstproxy

SIO proxy file : /apps/du/530/TST530/mgr/u_ioproxy.dta (5 def)

SYSTEM  U_NODE        GROUPNAME            USERNAME              UNIVERSE_USERNAME
----------------------------------------------------------------------------------
REP     *             *                    *                     *SAME (*)
UNX     *             *                    *                     univa
W32     *             *                    *                     *SAME (*)
WEB     *             *                    *                     univa
WIN     *             *                    *                     univa

#################################
For auto-relaunch, if the last uproc goes to TIME OVERRUN, and you expand its launch window to make it run. The auto-relaunch will continue to generate the next round of launch, if the current serious is not finished (still in scheduled window).
In the case of a Session, the Launcher waits for all branches of a Session to finish (completed or aborted) before processing the re-launch.
Manually creating launch from an auto-relaunch task, will not cause the relaunching; only the launch from the scheduled task itself can generate relaunches.
#################################
Windows patch has to installed within the patch directory. Otherwise, it will fail like this:

D:\du\PRE560\mgr>..\..\kit\v560\FX24867\install.bat FX24867
BEGIN OF PROCEDURE
 CHECK ENVIRONMENT OK
FINDSTR: Cannot open input.ref
 CHECK SERVICE REQUEST
 ERROR SHUTDOWN
    Dollar Universe is not stopped
    The following service are still running:


'.\uxcheckservicefix' is not recognized as an internal or external command,
operable program or batch file.


    Please stop Dollar Universe before applying this SP/FX
 PROCEDURE ABORTED
#################################
To start Publisher, don't need to load ENV, go to exec and run:
 ./unistartpub

default port is 10635
#################################
uxvrfuni 

uxvrfuni TST530 X |less

Dollar Universe 5.0 mandatory patch or above on Unix or VMS
This command can be used to check the coherence in the datas.

It will check for example, if the uproc defined in a session are present in the uproc table, if the MU used in a dependence is stille present...
#################################
The FX24882 for Dollar Universe V533 ¿ cumulative fix -  delivers a new workaround. 
This will force the wake up of the launcher (and thus kick of any job that should be running).

pb098197 - bug15007 : On all OSs :
Implementation of a max. idle time for the Launcher (5 minutes)
Product enhancement

pb098197 - bug15007 : On all OSs  :
To activate the maximum idle time for the Launcher (5 minutes), the U_LAN_WAKE_FORCED variable must be set:
U_LAN_WAKE_FORCED=Y
export U_LAN_WAKE_FORCED
This variable will be taken in account after stop and restart of the company.
#################################
CDJ memory usage:
5K records use about 1M memory
#################################

!!!!!!!!!!!!!  Do not recommend the stack size change any more    !!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!  Increase the UXMAXFD to the nofile ulimit value instead   !!!!!!!!!!!!!!!!!!!!
This issue show up after install FX24868 (wrong patch number) on V560. IO may or may not crash, do not response to anything. 
Changing to stack size to 24,414, fixed it.

Also saw it in V533 + 24868

<< 2010-11-18 15:45:32 0016021/uxioserv /u_io_create_thread /000000000 - u_io_create_thread - System error 12 : thread launch type 0 failed (unable to create new thread), thread_number 8 

In IO server log, it could be:
20110325 143030 - [u_io_create_thread] - not enough memory - system function [pthread_create] error [ENOMEM] - : Cannot allocate memory

#################################
To hold a PENDING job within DQM, with the Entry number in DQM. If the job is already EXECUTING in DQM, it can not hold it.
$ ./uxhldjob entry=000002
Completed successfully

After the command, the job shows Hold status. However, in $U, the job still shows in PENDING status.

$ uxshwque que=*
Queue SYS_BATCH
      JobLim 100
      JobQue 2 , JobExe 1 , JobHld 1 , JobPend 0
    Jobname               Entry   Node                                                              User          Prio SecPrio  stat      Date           Mu
XCASDLSUP06SLEEP666000    000001                                                                    univa         100  0000000  Executing 20110302 11:16 CASDLSUP06
XCASDLSUP06ABR000         000002                                                                    univa         100  0000000  Hold      20110302 11:19 CASDLSUP06
Completed successfully
#################################
A uproc script contains only
exit 0 
can abort with random return code.

This happens only on Linux RHEL 5.2, for WB ca096846 and DORMAN ca100954.


Linux edi01 2.6.18-92.1.18.el5 #1 SMP Wed Nov 5 09:00:13 EST 2008 i686
Red Hat Enterprise Linux Server release 5.2 (Tikanga)

Linux wblburdvwas01 2.6.18-92.1.6.el5 #1 SMP Fri Jun 20 02:36:06 EDT 2008 x86_64
Red Hat Enterprise Linux Server release 5.2 (Tikanga)

could solve it with:
#!/bin/ksh
exit 0
#################################
From v560, $UXMGR/uxrecover can used to fix node and user table and avoid reinstall.
Only the specified node and user will be created.

$UXMGR/uxrecover.ksh node
$UXMGR/uxrecover.ksh user 

#################################
vmsinstall universe500 <path>

The symptom is that even a uproc script completes in a few seconds, the job shows in executing in GCO for a hour, then complete.

Found this from ca085321:

The system reboot seems to have fixed the problem. Two of the time
related logicals have changed.

I had tried to change one manually before (SYS$TIMEZONE_DAYLIGHT_SAVING)
however it made no difference. I imagine both (or the one I didn't try)
needed to be changed.

New:

''SYS$TIMEZONE_DAYLIGHT_SAVING'' = ''1''
''SYS$TIMEZONE_DIFFERENTIAL'' = ''-14400''

Old:

''SYS$TIMEZONE_DAYLIGHT_SAVING'' = ''0''
''SYS$TIMEZONE_DIFFERENTIAL'' = ''-18000''


Technically those two logicals (SYS$TIMEZONE_DAYLIGHT_SAVING and
SYS$TIMEZONE_DIFFERENTIAL) are not part of TCPware, rather part of VMS
itself.

I did log a case with Process and they provided a command to add to the
NTP configuration file which should adjust those two logicals at DST
begin/end times automatically. (SET_VMS_LOGICALS in NTP.CONF is the
command, FYI)
#################################
VMS host
https://wiki.ouruniverse.net/confluence/display/SUPPORT/Special+OS+test+environment
OPENVMS:
. ALPHA
Hostname: frsdaxp02
Login: system
Password: ors12a90

Company access: dka00:<000000.TST500>

set def dka100:<000000.support.SUP500.mgr>

. ITALIUM 
Hostname: frsdvita01
Login: system
Password: ors12a90
Company access: dka00:<000000.fininf>

uname -a 

in mgr
@uxversion 

[000000.SUPPORT.SUP500.MGR] sh log "SYS$TIMEZONE_DAYLIGHT_SAVING"
   "SYS$TIMEZONE_DAYLIGHT_SAVING" = "1" (LNM$SYSTEM_TABLE)
[000000.SUPPORT.SUP500.MGR] sh log "SYS$TIMEZONE_DIFFERENTIAL"
   "SYS$TIMEZONE_DIFFERENTIAL" = "7200" (LNM$SYSTEM_TABLE)

[000000.SUPPORT.SUP500.EXP.LOG] uxadd fla upr=AGMU vupr=000 mu=bkssup500 pdate=00000000 user="SYSTEM"

Create/Update a Logical Name:
DEFINE logical .value. [,value2] [/TABLE=table] [/SYSTEM]

Delete a Logical Name:
DEASSIGN logical [/TABLE=table] [/SYSTEM]

To display OS version
sh system

In our environment, I have defined all the aliases in CRE_ALIAS.COM located in exec directory of the company.  Where did you define the following aliases ? 
$U needs to be running before run @uxsetenv and @CRE_ALIAS

To run uxtrace on VMS, 
copy the uxtrace_axp_v2_0_5.zip to the VMS node, 
then unzip it to the "MGR" on the VMS node,
then run @uxtrace.com


VMS recommended quotas for $U
https://na2.salesforce.com/50140000000EU7n
VMS quotas issue: open uprocs may fail, if more than 2 GCO are used

In this ca103675, pb100666, when more than 2 GCO are used, opening uprocs will always fail with different errors. 
The reason could be related to some TCP connection limition.   
To fix it please check both the system quotas for the system account and the quotas in *autopar_xio.dat file in the mgr directory, to make sure all of the quotas are at or above our recommendation.

After updated the quotas, the issue is solved.
......................
the TQELM is one of the most important to increase/check in his case. All info on quotas is to be found in the .famous. VMS training manual. 

Ditto for services, if they use ucx, the command is present. You can try it against our environment, mogin, type ucx, then show service or show service SUP500*. If hey use another tool than UCX, I am not sure of the command (but it should not be too difficult for them to sort it out).

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

UXALR and UXALRJOB are both defined in the company as:

UXALR == "$S_REP_EXEC:UXALRJOB.EXE"
UXALRJOB == "$S_REP_EXEC:UXALRJOB.EXE"
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#################################
To find real limit setting in IO process environment
cat /proc/`ps -ef|grep "uxioserv UNVADV X cia0109" |grep -v grep|tr -s " " " "|cut -f2 -d" "`/limits

for AIX
ls -l /proc/`ps -ef|grep "uxagtsap X WBPROD aurp10" |grep -v grep|tr -s " " " "|cut -f3 -d" "`/fd

#################################
Exchanger may stop sending event across node.
After enable the following variabls:
U_TRACE_SRT=Y
U_TRACE_GAI90F34=Y
In the exchanger log something like this message will show:
AA-RLMAT : 3

or end with 

MAT : 3
AA-RLMAT : 3

the WA could be:

The solution to prevent this issue is to make all node/MU tables consistent:
- No ~ character
- The same MU tables everywhere
- The same Node table everywhere

Also :
U_DEBUG_NET=Y
#################################
Sometimes, $U V560 launcher may generate defunct processes:
Add the following variable to the three $UXMGR/uxsetenv* file:
DQM_TERM_JOB=N
export DQM_TERM_JOB

Comments:
- No restart is needed
- The defunct processes will disapear after the next execution
- This variable is useful even if DQM is not activated
- You need at least to be at patch level FX24880.

This can resolve the "Autorelaunch uproc stopped executing" issue.
In this issue, there are a lot of message in universe.log from uxjobend:
<< 2011-05-02 11:43:54 0007835/uxjobend /io_srt_tsk_r /000000000 - u_recv_msg error : Errno syserror 4: Interrupted system call (host [reg-dut01.vVITDEV_IO_X])
After define that variable, the message stops.
With that variable, the uxjobend may not need to take care of auto relaunch?
The io_srt_tsk_r function deals with Self Relaunch Task; also used for cross node session.

#################################
https://orsypemea.webex.com
Login :
support@orsyp.com
DollarAccess1
...........
orsyp.webex.com
User name : support@orsyp.com
Password: Montreal99
...........
Login : aba@orsyp.com
Pwd : Ors@Sup2011 (case sensitive)
User link : https://orsypemea.webex.com
#################################
VMS user quotas settings:
https://na2.salesforce.com/50140000000EU7n
#################################
Windows test server
vmstm2k322
Ors12a90
#################################
On VMS to display listening port
tcpip  
; then
TCPIP> show service
#################################
To check which library a binary use:
lddy ./cuxxm
#################################
To test IO server, it should give IO version?
telnet frsdaxp02 25500
00001V

000361500
         STD,VER,AUT,TRN,DAT,ENG,FIL,PRX
#################################
If a variable is defined in U_ANTE_UPROC, the variable is avaiable to the generic supervision script; if the variable is defined within uproc script, it will not be.
The output from the generic supervision script, will be written in the job low, for example if you use "set -x -v" within the generic supervision script.
#################################
To unlock a uproc, just like the one on GCO or UVC.
uxrls UPR UPR=*
#################################
When defining mu specific job limit, in between MU list,there shold be no space. For example:
$ ./uxupdque que=test1 addmu="2_L1:22, BTA:33"
Invalid argument value
$ ./uxupdque que=test1 addmu="2_L1:22,BTA:33"
Completed successfully
$ ./uxshwque que=test1
Queue test1  STOPPED
      JobLim 100
      List of Mu Criteria
             Mu       JobLim    JobExe
          2_L1        22        0
          BTA         33        0
      JobQue 0 , JobExe 0 , JobHld 0 , JobPend 0
Completed successfully
#################################
For oracle manager tests:
vmsdlora01
vmsdlora02: oracle mgr 4.0
vmsdlora12: R&D
#################################
I.ve completed the installation and the configuration of VMWare Server 2.0.2 on this server.
You can manage this instance of VMWare Server by using vSphere Client.
Name = https://casplda03.orsypgroup.com:8333
User name = manager
Password = Ors12a90
#################################
SAP manager 441 will stop submitting jobs, but not crash, with this message:

2011-13-07 03:50:39 # agt_create_func_thread # Error: unable to create new thread
2011-13-07 03:50:39 # agt_srv_thread_main # No more thread available: request ignored (error 11)

This could be a memory leaking issue. Check its memory usage.
#################################
The message could mean that the uxord try to submit to a queue in DQM. However, the queue does not exist.
<< 2011-07-25 16:21:00 1904660/uxord           /UXDQM_SndJob        /134709267 - ret CALL_SrvBch Sndfonc (3001)
<< 2011-07-25 16:21:00 1904660/uxord           /ADDJOB              /000000000 - Numproc 1223610 Numentry 0 GASNDJ_STATUS 134709267 GASNDJ_IOSB_01 134709267
<< 2011-07-25 16:21:00 1904660/uxord           /GAB39A41            /134458554 - %UNI_-E-U_EGASNDJ3302, Error-Job submission
#################################
Trace mode for UVC webconsole.

Our R&D would like to get the log in trace mode. 

1. For the local PC:

-In the file C:\Documents and Settings\<username>\univiewer_console\default\log4j.xml, please modify the words INFO to TRACE in the following lines.


                <category name="com.orsyp" additivity="false">
                                <level value="INFO"/>                  
                                <appender-ref ref="UNIJOB_SIZE_LIMITER"/> 
                                <appender-ref ref="STDOUT"/>
                </category>
                
                
                <root>
                                <level value="INFO" />
                                <appender-ref ref="STDOUT" />                              
                </root>

-Save the file and launch UVC WebConsole.


2. On the WEB server side:
-Please set the log mode of the Univiewer WebConsole to TRACE. Please backup the file <UVC_WEBConsole>\WEB-INF\conf\log4j.xml.

-Modify the following lines in <UVC_WEBConsole>\WEB-INF\conf\log4j.xml by changing the word INFO to TRACE and save the file.

<category name="com.orsyp" additivity="false">
<level value="INFO"/>
<appender-ref ref="UNIJOB_SIZE_LIMITER"/>
<appender-ref ref="STDOUT"/>
</category>

<root>
<level value="INFO" />
<appender-ref ref="UNIJOB_SIZE_LIMITER"/>
<!-- <appender-ref ref="STDOUT" /> -->
</root>



3. Please then reproduce this issue again, and send us the following:

-The univiewer_server.log and it's archives taken from <UVC_WEBConsole>\WEB-INF\logs
-The univiewer.log and its archive taken from C:\Documents and Settings\<username>\univiewer_console\logs
-All the Tomcat web server log files(ex. catalina.out).
#################################
Creating task from command line:
./uxadd tsk mu=AUBP10 upr=EXIT0 TECHINF TYPE=S USER=univa

./uxupd tsk mu=AUBP10 upr=EXIT0  time DALW=2000,000,00

./uxupd tsk mu=AUBP10 upr=EXIT0  IMPL add rule="((TV4_J,01/01/2011))"
############################################
Indeed, with UJ 1.3.5 the restrictions have changed (asked by PAETEC) . but normally, if the customer does not change the default values of the new variables (U_MASK.), it should work well, because UniJob is running under the .root. account.

The changes in v1.3.5 are the following:

-	umask has been removed (from unienv)

-	Log file is .pre-created. by the launcher (in /data/log directory) before launching any job, and owner of the log file is set to the Sub. Account.
(because only root can now create a file in the /log directory). Once done, the log file is accessible to the batch (that will fill it as usual).

-	/upr directory permissions can be adjusted with U_MASK_UPR variable; the default value (rwxr-xr-x) should be OK
Only the IO server creates or deletes Job script (command) or Job files, and it.s running with .root..

-	unijob.log file permissions can be adjusted with U_MASK_LOG variable; the default value (rw-rw-rw-) should be OK. 
-	/temp directory permissions can be adjusted with U_MASK_TEMP variable; default value rwxrwxrwx

-	All the indexed files have been restricted to: owner .root., permissions rw-------
It should not have any impact; because only Unijob (the IO server) needs to read those files! That.s why I don.t understand the issue:
The log below:
| 2011-09-14 17:38:02 |WARN |IO |pid=16085156.2863| u_scan_sb_add_rep         | Unable to create RE article for numproc 0000000 code ret:15 (3)
Seems to indicate that the IO server (running with root) cannot read the indexed file! (u_fmre50)
#################################
To control uxpurge to work, put the following in the current shell. No need to restart $U.

export S_NBDAYS_HIST=60
#export S_NBDAYS_HIST=0 to remove all records
export S_NBDAYS_CTRL=60
export S_NBDAYS_LAUN=60

export U_PURGE_NOLAUNCH=Y
export U_PURGE_DISABLE=Y
export U_PURGE_PREFX=Y
#################################
unibackup.ksh -s -b /backup/ORSYP/MY_NODE 
#################################
HPUX itanium node:
-	HP-UX casthpi2 B.11.31 U ia64 0361283308 unlimited-user license
-	HP-UX frsdhpi2 B.11.23 U ia64 2560335236 unlimited-user license
#################################
For unijob:
/apps/unijob135/vmstlsup04/app/bin/unihld job -job TEST -target VMSTLSUP04
/apps/unijob135/vmstlsup04/app/bin/unirls job -job TEST -target VMSTLSUP04
#################################
FAQ
|2011-10-21 13:20:13,728|ERROR||pool-3-thread-96|com.orsyp.std.bv.BviFileFactory|IO Connection problem - ServerException - read [UNIBPO/tsdacc/S]
|2011-10-21 13:20:13,744|FATAL||pool-3-thread-96|com.orsyp.std.bv.BusinessViewStdImpl|Impossible to get environment features to check IO BVS compliance
|2011-10-21 13:18:32,263|ERROR||pool-3-thread-94|com.orsyp.kmeleon.environment.ExceptionManager|An error occured on ENVIRONMENT: (node = tsdacc environment = [UNIBPO/tsdacc/S]) java.lang.NullPointerException
at com.orsyp.kmeleon.swing.businessviews.model.BVModel.init(BVModel.java:118)

https://na2.salesforce.com/50140000000eIuk

#################################
The purpose of BVS service could be logging and reporting of business view.
#################################
on Windows machines: U_GJM_STATUS_LOG=Y 

At the left bottom of status bar, GJM displays current activities information which it is taking alively. It also displays the connections' status.
If environment variable U_GJM_STATUS_LOG is set to Y/y, all the information which was displayed will also be logged in log files in directories: %UXLEX%\gjm, %UXLAP%\gjm, %UXLIN%\gjm, %UXLSI%\gjm. These directories are created automatically.

When Graphic Job Monitor finishes initial loading or updates records, a message indicating how many records are loaded or updated is logged in log file in directory: 
%UXLEX%\gjm, %UXLAP%\gjm, %UXLIN%\gjm, %UXLSI%\gjm. 
These directories are created automatically.

A new column 'Alive Records' is added in Connected Nodes View to indicate users how many records on each node alively.

GJM system information and user actions are logged in log file in directory: %UXLEX%\gjm, %UXLAP%\gjm, %UXLIN%\gjm, %UXLSI%\gjm. It makes users easily to trace reasons after GJM accidently crash happens.
#################################
UVC4.0, UVMS4.0
http://vmstlcems4:8080/univiewer_webconsole_4.0.00_all_os/
https://wiki.ouruniverse.net/confluence/display/SUPPORT/How+to+install+UVMS+4
UVMS: vmstlcems4 
univa:univa
#################################
UVC web console or web start, can not run, with the following error:
Unable to launch the application

explanation:
http://publib.boulder.ibm.com/infocenter/director/v6r1x/index.jsp?topic=/director.tbs_6.1/fqm0_r_tbs_lic_unable_to_launch_the_application.html
#################################
In GCO, if user's profile on the target node does not have this 2 lines in the "User Object", when creating a launch in the GCO/GJM and click on the "Advance" button, the launch creating window will disappear, and a windows error will pop up to send report to M$.
USE_WITHIN_LAUNCH
USE_WITHIN_TASK
#################################
Only in V533 Unix, so far, not in V560
pb072807 - bug00000 : All unix OSs :
The uxlstech command displays the network provocations that are stored in the Dollar Universe exchange files. This network provocations are in the to be processed list of the exchanger.  Product enhancement.
#################################
- According to core files: possible prbm of thread stack size so it think that this problem might be fixed by DMA's correction in FB11628/ pb101280
- ERO specified in FB that it's in FX24965.
- about the correction: it 's basically the use of variable U_IO_THREAD_STACK_SIZE which allows to define a higher stack size for threads.

FX24965 is currently scheduled to be released on February 27th
On available in Windows.
Default value, if not defined, 128K
#################################
UNI_LOCALADDR_DISABLE=no
For Windows, V533 and V560, to use loopback when enginges connect to the local IO. Avoid DNS and network access for local IO connections. 
#################################
In 6.0, to identify a uproc's script,  
# ./universe -getid -type upr -name EXIT11
U000000004

# ./universe -getid -type upr -name EXIT11
U000000004
T1

The link between the name and the uproc script ID is store in the base data directory in 
u_fxup60.dta; for uproc
u_fxse60.dta for session;
u_fxta60.dta for task 
u_fxre60.dta for resource
u_fxru60.dta for rule
u_fxcl60.dta for class
u_fxla60.dta for labels
...........not to dump
u_fxno60.dta for node 
u_fxsa60.dta for submission account 
u_fxmu60.dta for MU 
u_fxap60.dta for APPL 
u_fttg60.dta
u_ftts60.dta
u_alertrules.dta
u_sync.dta
version.dat
phrase.key
...........not to dump

u_fmat60.dta audit trail, area specific

universe -group Administrators
universe -role  "DUAS TST600/I Administrators"

For V6 to check version:
$UXEXE/universion -version
./universion -history
#################################
In 6.0, system resource,

To use CPU resource, define one, then within uproc condition, define what's the CPU usage percentage to trigger the job. Before CPU reach that it will be in EVENT WAIT.

To use script resource, define a script, /tmp/script_resource.sh, and define a resource to associate with it. In uproc condition, define to the return code of the resource script needs to have.
Then, run the uproc, it will be in event wait, then the eep will launch the script resource. If it gives the expected return code, the job will change from EVENT WAIT to PENDING and run. 
Both the log of the script resource and the job log will be in the log/exp directory. For example:
-rw-rw-r-- 1 univa univ  514 Feb 17 16:52 XC000000001U000000009RES.0000018
-rw------- 1 univa univ  473 Feb 17 16:52 XC000000001U000000009.0000024
                                           ^         ^          ^
                                           MU        uproc      nupr
-rw------- 1 univa univ  518 Feb 16 16:24 XS0000000010000003C000000001U000000001.0000013
-rw------- 1 univa univ  518 Feb 17 17:15 XS0000000010000004L000000002U000000001.0000028
                                           ^         ^      ^         ^          ^
                                           session   nses   MU        uproc      nupr

There are also special .log files for sessions in UXLEX. For example: X0002243.log, recording the flow of the whole session.
[14/03/2012] [16:08:15] [i] Session BACKUP_S510 - Uproc BACKUP_S510_H000 
[14/03/2012] [16:08:15] [i] Mode : Execution 
[14/03/2012] [16:08:15] [ ]   
[14/03/2012] [16:08:15] [i] Uproc termine en succes. 
[14/03/2012] [16:08:17] [i] Session BACKUP_S510 - Uproc BACKUP_S510_U010 
[14/03/2012] [16:08:17] [i] Mode : Execution 
[14/03/2012] [16:08:17] [i] Commande : call "D:\Program Files\Veritas\NetBackup\bin "\bpbackup  -i -t 15 -w -c SQL-SAP-DAILY--DBTRLOG_VP3 -h eusdp021.dc.intra-global.net 
[14/03/2012] [16:09:55] [i] Session BACKUP_S510 - Uproc BACKUP_S510_U010 
[14/03/2012] [16:09:55] [i] Mode : Execution 
[14/03/2012] [16:09:55] [i] Commande : call "D:\Program Files\Veritas\NetBackup\bin "\bpbackup  -i -t 15 -w -c SQL-SAP-DAILY--DBTRLOG_TP3 -h eusdp019.dc.intra-global.net 
	...
	...
[14/03/2012] [16:32:54] [ ]   
[14/03/2012] [16:32:54] [i] Uproc termine en succes. 
#################################
To change the UVMS from Derby to external DB.
using the uniexportdb command : 
.	Prepare the external database: create a database user, grant permissions and create the UVMS tables and index
.	Run uniexportdb with the right parameters.
.	Restart UVMS

The documentation itself is currently reviewed, because the command arguments changed since the very first release (it has been changed in 4.0.03).
Otherwise it.s in UVC_40_adm manual, and yes you can .
#################################
UVMS will give UVC authentication for 24 hours. Even UVMS down, UVC probably still have access to $U6 for a few hours.
Different $U companies on the same UVMS can extract and deploy package. When they are on different UVMS, extract packages, move it to the target UVMS and import it. 
Package can go back to APP from EXP.
.................................
UVC standalone, no license
UVC web start is downloaded via a web browser, and accessing directly from local PC; it requires the WEB license.
UVC web console is running on the WEB server, the connections to $U are from web server also, so no license needed. 
#################################
Applicaiton code missing could impact task distribution to this node.
#################################
In V6 Windows, only IO_X has a service, IO in other areas have no services.
In OS, IO_X has process name UniServIO.exe, for other area, uxioserv.exe
A new process (from unijob?) interactive desktop: UniServDesktop.exe

These 3 server has the same process name:
publisher: Ojw.exe
reporter: Ojw.exe
UVMS: Ojw.exe
#################################
Before importing cron or unijob jobs into V6, you can run them as Inventory. Define an internal scheduler within UVMS node settings as V6; then, go to Design mode -> Inventory to creat a inventory template. Then, run the inventory template. All of the cron and unijob jobs will run.  
In task -> tools to  import jobs from cron or unijob to V6, 
After, importing a cron or unijob job into V6 as a task, run the inventory again, the job will not be there anymore.
#################################
For web console, when the security.txt updated on the server side, for the UVC webconsole to see the change, the following section in web.xml on tomcat has to be enabled. The 600 is in seconds.

  <context-param>
        <param-name>security.cache.retention</param-name>
        <param-value>600</param-value>
        <description>Refresh period for the security file. If this parameter is not set
        the security file will be reloaded only at the restart of the server</description>
  </context-param>
#################################
To use space in object name in command line:
\"OBJECT NAME\"
#################################
UVMS commands:

uniadd login -login "db admin" -pwd "passwd"
uniadd group -group "dba"

unilst login
unilst audit ; only for UVMS

unidlt nodeview -nodeview "ORA SYSTEMS"
#################################
V6 Node registration to UVMS, $U needs to be stopped before running the registration.

unims -register -mshost sdfsdf -msport 4184 -login admin -pwd admin -Xservers "IO=10600,BVS=10605,CDJ=10611,DQM=10615,EEP=10604"
You don't need to define the ports, it will read it from the data/values.xml.
unims -unregister -mshost sdfsd -msport 4184 -login admin -pwd admin -node casplda02
unims -update
To enable APP area
unims -update -areaA
#################################
UVMS backup can be configured with node setting
unibackup - unirestore
#################################
To list exception
uxlst oex 
#################################
1. Have you turned on the "Auto-registration of LDAP Users in the UVMS"?

2. Once it is enabled, you should not need to create the accounts defined in the LDAP manually. It should be automatically created.  
Have you restarted UVMS after enabling it?

3. Please go to the bin directory of the UVMS and send us the following command results.

unigetvar AUTO_REGISTRATION    # define in the variables.xml

unigetvar AUTHENTICATION_MODE  # defined in the values.xml

After changing the ldap.xml, for unicheckldap to using the new config, UVMS does not need to be restarted.
app/bin/unicheckldap

[root@vmstlsup20 bin]# ./unicheckldap
UVMS configured with LDAP authentication.

Loading ldap.xml with authentication: false
********************
ldap.xml loaded. 1 configuration(s) found(s)
********************

Checking configuration: [LDAP Repository@orsyp.com]:
Host: 10.1.1.35 Port: 389  SSL: false

---------------------------------------------
supported SASL mechanisms:
  + GSSAPI
  + GSS-SPNEGO
  + EXTERNAL
  + DIGEST-MD5
DIGEST-MD5 mechanism supported.
---------------------------------------------
SUCCESS Host: 10.1.1.35 configuration is OK
        SearchFilter: (&(objectclass=Person)(samaccountname=!login!)) Referral: true
********************

D:\du\univiewer_server\calpmzwa_MgtServer\app\bin>unicheckldap.bat -login duadmin -password duadmin
UVMS configured with LDAP authentication.

Loading ldap.xml with authentication: true
********************
ldap.xml loaded. 1 configuration(s) found(s)
********************

Checking configuration: [LDAP Repository]:
Host: cavpldnt01 Port: 389  SSL: false

---------------------------------------------
supported SASL mechanisms:
---------------------------------------------
SUCCESS Host: cavpldnt01 configuration is OK
        SearchFilter: (uid=!login!) Referral: false
SUCCESS Login: duadmin authentication successful
********************
.................................
For UVMS LDAP, 
If the both AUTO_REGISTRATION=Y and AUTHENTICATION_MODE=L defined, LDAP users should be automatically created. 
If it is not, and when they tried to create the domain login in UVMS, got this erro:
"Create login xxx error:Login xxx not found on LDAP server"

maybe their user search is not defined properly in ldap.xml.

      <usersSearchBase>ou=People,dc=qa,dc=orsypgroup,dc=com</usersSearchBase>
      <usersSearchFilter><![CDATA[(uid=!login!)]]></usersSearchFilter>
      <usersSearchDepth>SUBTREE_SCOPE</usersSearchDepth>

CDATA: means the content is character data, not non-printable char, for exmaple \n.
Maybe the search base are defined wrong. If leave the search base empty, the user may not be found.
Modify in the ldap.xml, require to restart the UVMS.

This part is the user used to login LDAP server. Needs to login first, then check any objects (users).
      <securityPrincipal>CN=s-orsyp-adreader,OU=DOLLAR UNIVERSE,OU=COMMUN,OU=APPLICATIFS,DC=imatech,DC=intra</securityPrincipal>
      <clearCredential>YES</clearCredential>
      <securityCredential><![CDATA[#adreader-125#]]></securityCredential>

.................................
For LDAP:
http://static.springsource.org/spring-security/site/docs/3.0.x/reference/ldap.html
http://quark.humbug.org.au/publications/ldap/ldap_tut.html
uid: User id 
cn: Common Name 
sn: Surname 
l: Location 
ou: Organisational Unit 
o: Organisation 
dc: Domain Component 
st: State 
c: Country 

.................................
When the domain controller does not hold the object itself, but it may exist in other part of the object tree.
An LDAP referral is a domain controller's way of indicating to a client application that it does not have a copy of a requested object (or, more precisely, that it does not hold the section of the directory tree where that object would be, if in fact it exists) and giving the client a location that is more likely to hold the object, which the client uses as the basis for a DNS search for a domain controller. 
......................
Filter applied to find the user from his/her Login. 
For example: 
LDAP: (&(objectclass=Person)(uid=!login !)) 

or for Active Directory: 
(&(objectclass=Person)(samaccountname=!login!)) 
The !login! variable will be replaced automatically by UVMS with the login string provided by the connected user. 

or
((samaccountname=!login!)), and define the followReferral to YES 
.................................
.................................
<1> LDAP SSL error, the error below is a java configuration issue.  -
<2> Or a UVMS config issue, missing certificate?  check the other discussion below -

[lit-vaorsm-p001:/prod/orsyp/univiewer_server/orsmp001/data]$ ./unicheckms  --

------------------------------------------------------- 
UniViewer Management Server check procedure 
------------------------------------------------------- 


UVMS version: 4.0.14 

Status of engine AUT is: STARTED 
Status of engine ALM is: STARTED 


Loading ldap.xml with authentication: false 
******************** 
ldap.xml loaded. 1 configuration(s) found(s) 
******************** 

Checking configuration: [LDAP Repository]: 
Host: lit-ad01-p001 Port: 636 SSL: true 
cannot connect to ldap server: javax.naming.CommunicationException: simple bind failed: lit-ad01-p001:636 [Root exception is javax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty] 
FAILURE Host: lit-ad01-p001 configuration is KO 
................................. --

It just means that your JDK has not been able to locate the trustStore.

Use this command in "bin" to check keystore:

keytool -list
If it shows like this, 
keytool error: java.lang.Exception: Keystore file does not exist: /home/zwa/.keystore

A simple fix for this can be to copy your default keystore supplied by java into your profile.
For windows: ---
copy %JAVA_HOME%\jre\lib\security\cacerts %USERPROFILE%\.keystore
For Unix: ---
By default, the OpenJDK build creates an empty trusted certificate authority keystore ($JAVA_HOME/jre/lib/security/cacerts), so if you attempt to do anything that would use those trusted certificates (e.g.  SSL, for certificate chain validations), it will fail with the "java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty" exception. I've run into this issue before during the build when using OpenJDK as a bootstrap for another OpenJDK build [1]. I'd suggest you look at importing the appropriate certificates into your cacerts via keytool, or use the javax.net.ssl.trustStore system property to point at an existing valid keystore.  

APPLE_JAVA_6_HOME=`/usr/libexec/java_home -v 1.6`
CACERTS_FILE=${APPLE_JAVA_6_HOME}/lib/security/cacerts
-Djavax.net.ssl.trustStore=${CACERTS_FILE}

[1] http://mail.openjdk.java.net/pipermail/macosx-port-dev/2011-July/000585.html

For example, I see this from my OpenJDK 7 build from earlier this month:

$ keytool -list -keystore
/Users/david/dev/jdk7u-dev/build/macosx-amd64/j2sdk-image/1.7.0.jdk/Contents/Home/jre/lib/security/cacerts
-storepass changeit

Keystore type: JKS
Keystore provider: SUN

Your keystore contains 0 entries

Meanwhile, the Apple provided JDK ():

$ keytool -list -keystore
/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/security/cacerts
-storepass changeit

Keystore type: JKS
Keystore provider: SUN

Your keystore contains 183 entries

<2> -
For UVMS SSL, in "bin" directory
1. it need to create a keystore, 
./unissl GENSTORE -pwd unissl

It will be data/security/keystore

2. the create the key and put in the key store, 
./unissl genkey -dn "CN=casplda02" .pwd unissl

3. then create a certificate request (CSR) and send to CA, certificate authority

4. after get the certificate, import it.
 ./unissl import -type TRUSTEDCACERT -file /apps/uvms/uvms4/casplda02_MgtServer/data/security/keyStore -pwd unissl -alias ECA


Check with the following command
./unissl list -type serverkey -pwd unissl 
./unissl list -type SERVERCERT  -pwd unissl
./unissl list -type TRUSTEDCACERT  -pwd unissl
#################################
To check the node settings of which area to start:
$ unigetvar UNI_STARTUP_X
IO
CDJ
BVS
LAN
EXC
CAL
SUR
DQM
EEP
SYN
ALM
$ unigetvar UNI_STARTUP_A
IO
$ unigetvar UNI_STARTUP_I

$
During node setting operation, the "startup and shutdown" can become read only, for expmaple for APP.
The variables are defined in both "data/values.xml" and "bin/variables.xml"
This is because the paragraph in "data/values.xml" are missing. Add back, then, the UVC node setting become update-able again. 
#################################
Be aware that, unlike UPROCS return code management, the Resource return code management is slightly different on WindowsUsually, set resexe =0 is used in uproc scripts.
With a Resource script,  you must set it to: "exit 0" (just like on LINUX)
#################################
After updating the group/role on UVMS side, if the $U side does not see the udpate, ($U side is not updated), try this:
delete data/u_sync.dta, wait 30 seconds, and check again 
#################################
A lot of cmd.exe process can block further windows job execution, new jobs could stay in PENDING then abort.
All those cmd.exe process are from the same parent process, the uxord. Kill them all with wmic and fix it.
#################################
$U 6 installation will create $U as service in Unix, /etc/rc.d/init.d on Linux.
/sbin/service DUAS_TST600_casplda02 stop
/sbin/service DUAS_TST600_casplda02 start

On AIX, it will be in /etc/rc.d/rc2.d
#################################
pb103587 - bug17115 : On AIX machines:
To avoid reccurent CDJ crashes, we brought a fix to change the default thread stack size.
it's controlled by a new variable U_CDJ_THREAD_STACK_SIZE (if not provided, it's set to 1280).
#################################
In V6.0, DQM is not root anymore. However, it will call a user with SUID bit. 
univa     1791     1  0 Mar12 ?        00:00:17 uxdqmsrv TST600 X casplda02

That will be root but only temporarily.
-r-sr-xr-x 1 root  univ 5137870 Feb 16 15:57 uxdqmlan
#################################
For V6, $U audit trail saved in data/u_fmat60, not have the log file anymore. It can be access from UVC, but not local command line.

......................
The error message will show up when the reporter tries to extract the job log, which does not exist. 
It can also show up when you try to relaunch an aborted job, which did not generate a job log.

| 2012-03-22 16:57:05 |WARN |X|IO |pid=1785.-597701744| u_read_file               | File not found: /apps/du/600/TST600_casplda02/log/log/exp/XC000000001U000000019.0000132
| 2012-03-22 16:57:05 |WARN |X|IO |pid=1785.-597701744| encodeFileResponse        | unable to read file [/apps/du/600/TST600_casplda02/log/log/exp/XC000000001U000000019.0000132]
| 2012-03-22 16:57:06 |WARN |X|IO |pid=1785.-597701744| u_read_file               | File not found: /apps/du/600/TST600_casplda02/log/log/exp/XC000000001U000000019RES.0000092

......................
These mesages should be from generic queues. Stopping a job in generic queue?
| 2012-03-05 12:20:54 |ERROR|X|DQM|pid=7992.9020| u_dqm_trt_que             | u_dqm_trt_que_generique returns -1 [G_BACKUP_SAP_DBTRLOG                GD0000020000000000000000000000000000000000000999001000001000000N                                ]
| 2012-03-05 12:25:12 |ERROR|X|DQM|pid=7992.6464| owls_dqm_job_end          | u_dqm_end_job returns -1

#################################
During UVMS upgrade, the following message normally means the root directory is  wrong. It should be /apps/uvms/uvms4.

UniViewer Management Server root directory            [/var/opt/ORSYP/univiewer_server] : /apps/uvms/uvms4/casplda02_MgtServer

UniViewer Management Server node name                 [casplda02_MgtServer] :
Node does not exist or has a unavailable structure.
Please confirm the node name.
#################################
To submit jobs outside $U through DQM.
$UXDQM/uxsubjob  queue=SYS_BATCH cmd=/tmp/test.ksh log=/tmp/tmp.log

You can even submit to a logical queue contains a remote physical queue. So, the job will run on a remote server. 

For example, on casplda02, logical queue L1 has a physical queue on vmstlsup04. 
$ uxshwque que=L1
Queue Generic L1
      JobLim 999999
      List of physical queues
          vmstlsup04 : SYS_BATCH
      Base priority 1
      Maximum priority 999
      JobQue 0 , JobExe 0 , JobHld 0 , JobPend 0
Completed successfully

create a uproc TEST on both node, then run it. The remote script will run.
uxsubjob  queue=L1 cmd=$UXPEX/TEST.000 log=/tmp/tmp.log

$ cat /tmp/tmp.log
this is on 04
#################################

U_IO_DETECT_LOOP = Y or N
This variable works with the variable U_IO_NB_OPE_MAX.
If you put it to Y, you need to valorize U_IO_NB_OPE_MAX to a value.

U_IO_NB_OPE_MAX represents the maximum number of operation IO server can do.
If U_IO_DETECT_LOOP is put to Y, everytime the client requests IO server for an operation create/update/delete/etc etc, a counter of operation is incremented, and when it overtakes U_IO_NB_OPE_MAX, it will trace it in universe.log.
I think the goal of it is just to give an idea of the activity of IO
I guess it helped to identify the freeze problem pb024584

#################################
To import an autopatch package manually on UVMS.
./uniimp PKG -pkgfile ../../data/autopatch/DUAS-UPDATE-LINUX-6.0.05_linux_26.unipkg
.../app/bin/unilst pkg -full
#################################
For windows UVMS, JAVA env is defined in the unienv.bat.
#################################
pb104042 - bug17177 : On all -
During system shutdown if the IO servers are suddenly stopped, a files reorganization may be necessary.

Now  the IO server creates a flag file when it starts and deletes it when it ends : So the persistence of this file after the server end indicates an abnormal termination.
The file is called 'companyname'_'area'_'nodename'.txt under U_TMP_PATH directory.
#################################
This error message could be caused by corrupted u_namnod.dta. It can prevent IO server from starting.
<< 2012-02-13 15:11:17 3137680/uxioserv /u_io_srv_main /000000000 - IO server X init error: u_io_load_ext_name returns -1

Delete the file, it will be recreated during startup. 
#################################
In V6, Node variable will be defined as part of uproc script.

In u_batch, it first generates a temporary file that contain all the node variables and uprcos, in line 50, it runs it.
   . $s_numproc_file

Then in line 53, the temporary file is removed. Comment out this line to check the temporary file.
   rm -f ${s_numproc_file}

In the temporary file generated, node variabls will be on top. For example:
 
set -a
U_UPR_SCRIPT_NODISP="Y"	<--- node variable
node_var1="tttttttttt" 	<--- node variable
node_var2="1100"	<--- node variable
S_SIBATCHNP="0"

If the node variable was defined in wrong syntax, for example, windows syntax on Linux node, the following error could show in jog log.
./s_numproc_file.sh: line 62: unexpected EOF while looking for matching `"'
./s_numproc_file.sh: line 64: syntax error: unexpected end of file

Or

C00-SUPPORT-SITE DEBUT
C00-SUPPORT-SITE WSPGM-CODNOEUD zas3ussav01
_!================================================
_!**
$!** PROCEDURE .. : TNB_TOTO
$!** VERSION .....: 000
$!** EXECUTION .. : 0000010
_!**
_!** DATE TRAIT.. : 06/04/2012
_!**
_!------------------------------------------------
$!** PARAMETRES.. : AUCUN
_!------------------------------------------------
_!** VARIABLES
_!================================================
/outils/orsyp/TASUNI/bin/u_batch[50]: .: erreur de syntaxe àa ligne 62: `"' inéléou
/outils/orsyp/TASUNI/bin/u_batch[336]: if": non trouvéAucun fichier ou rértoire de ce type]
/outils/orsyp/TASUNI/bin/u_batch: ligne 336: erreur de syntaxe àa ligne 337: `then' inattendu 
#################################
To apply patch without verifying anythning

install.ksh NOVERIFY
#################################
in UVC 4.0.03, you may see message like "String length invalid: 261", when trying to access "Node Settings". Upgrade to 4.0.04, the issue is gone.
#################################
For UVC, it only uses the following registry directory:
[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\ORSYP S.A.]

#################################
This message in history trace could means that the user defined in the task does not exist, or no user defined.
Author Code 301 unknown
It could happen when a task moved to a different node and on the target node the submission user does not exist.

To update all the task:
$UXEXE/uxupd tsk upr=* ses=* mu=* TECHINF user=univa
$UXEXE/uxupd tsk upr=* ses=* mu=* TECHINF QUEUE=SYS_BATCH
#################################
In history trace, that could mean that one was trying to launch a session from a uproc in the middle from command line.
Exit code : 162
#################################
To avoid starting engines during $U 6 startup. 
1. UVC node settings
2. command line
$ ./unigetvar UNI_STARTUP_X
IO
CDJ
BVS
LAN
EXC
CAL
SUR
DQM
EEP
SYN
ALM
$

$ ./unisetvar UNI_STARTUP_X IO,CDJ,BVS,DQM,EEP,SYN,ALM
UNI_STARTUP_X list changed successfully.

$ ./unigetvar UNI_STARTUP_X
IO
CDJ
BVS
DQM
EEP
SYN
ALM

To disable history trace
U_HISTORIC 
#################################
For silent install:
/apps/du/600/v6_kit/unirun -i -s -f /home/zwa/home/pj31_dudmp_v6/work.install.file

This error could means that the response file is not from the same version of the kit. In this case, the response file is from 6.0.05. All newer version of V6 kit will have this error.

./unims -connectclear -login admin -pwdfile /tmp/cpf_25680 -mshost casplda02 -msport 4188
Error -1 decoding password
Unable to get password in file: /tmp/cpf_25680
#################################
To install a V6 node again, after removing it, has to remove this directory also /var/opt/ORSYP/.Installer/DUAS/FDRDUS_altaixprd
#################################
To test email notification use SMTP
192.168.115.9
#################################
To install UVMS on Windows 7
univiewer_server_v4.<m.bb>_windows.exe -nocheck
#################################
For uxrights in V6

#--------------------------------------------------
# Starting DUAS uxrights tool with success.
# --------------------------------------------------


    DUAS set instance files rights / assign instance to a administration user.
    This tool is used to :
          - restrict an instance to a specific owner/administrator (jobs will only be executed with that user).

How does it work? Does it change the ownership of uxdqmlan to that user?
[Roy Eric] yes it does, if you have installed instance with root user, it will re-affect fully the items instance to the lambda user And you lose the multi-account submission mode (because uxdqmlan is now owned by lambda user)

          - grant an instance to be able to executed jobs with any user.

How does it work? Does it change the ownership of uxdqmlan to SUID root?
[Roy Eric] yes that.s what it does: need to be root to do that so.


          - restore the standard file acces rights of the current instance (without changing of owner of the instance).

What is the standard file access right?
[Roy Eric] that restores the default access rights of all the items instance (the ones set by default during installation).


          - assign an instance to a specific owner (without changing file acces rights of the instance), this action includes the "grant" action (jobs can be executed by any user).

How does it work? What does it do?
[Roy Eric] nearly the same that case 1 + 2, i.e.:
if you have installed instance with root user, it will re-affect fully the items instance to the lambda user And you keep the multi-account submission mode (because uxdqmlan is owned by root with setuid bit set) need to be root to do that so.
#################################
For V6 non-root installation, or sudo submission:
1. $UXEXE/uxrights -m restrict
change the owner of /apps/du/600/INT600_casplda02/bin/uxdqmlan to univa

2. Update the sudo file
/usr/sbin/visudo

lambda ALL = (root) NOPASSWD: /bin/su - duas *
lambda ALL = (root) NOPASSWD: /bin/su - lambda * 

3. To submit jobs for any user (in addition to the sudo configuration), the value of the U_MASK_JOB_LOG variable must be set to u=rw, g=rw, o=rw.

4. Then update the Dollar Universe node setting "Custom su command used during submission" (S_SU_JOB variable) in the Advanced Settings category and set it to: 
/usr/bin/sudo /bin/su ¿

If after defining that above the jobs still stay in PENDING then abort, check this settingin /etc/sudoers 

#Defaults    requiretty

comment that out.
#################################
V6 $U Windows install log:
C:\Program Files\InstallShield Installation Information\{B801D14E-99C1-42A9-892F-DC0FB624A4EF}

More detailed install log is in  %TEMP%, for example:
C:\Users\Administrator\AppData\Local\Temp\1\DUAS_6_ISS_installation.log

For Windows V6 silent install:
To record response file
du_as_6.0.06_windows.exe /r /f1"c:\temp\duas60.iss"

To use response file
du_as_6.0.11_windows64.exe /s /f1"c:\6011_customer.iss" /f2"c:\temp\duas60.log"
du_as_6.0.12_windows64.exe /S /f1"C:\du\duas6012_typical.iss" /f2"C:\du\duas6012_typical.log"
#################################
Job chain definitions are in UXDEX, saved as *.JC.BVI .
#################################
"Delay in milliseconds to allow proper synchronization of DQM and W32 events when killing a job"
From the DOC:
On certain Windows 32 systems, system events are sometimes released late; in this case the Launcher has problems synchronizing when killing a job from the user interface.  Consequently the job continues to be displayed as .Running. even though it has been effectively killed at system level.  This variable can be set to avoid this problem.  This setting should only be modified when advised by technical support.

However, it can also be that the job in DQM (saw it for logical queue) showing aborted, and the job processes stay in the (physical queue) OS.
#################################
For V6, job log archive:
Archive job and resource logs : U_ARCH_JOBLOGS_KEEP
Job log and resource log archiving happens during the cyclical purge by the IO server (at the beginning). 
By default retention delay is the ones of the history; if corresponding HS records to the job log/resource log is not found, then launch retention delays are used. If SB records are not found, default retention delay is used.
#################################
In V6, the supervisor function is done by IO and EEP.
The eep will check the file resource in system, and IO will communicate. 
#################################
V6, runbook is in .../data/u_fmrb60.dta
uxlst book
uxupd book
uxext book book=* output=/tmp/book.ext
#################################
The following message could cause the reorg to fails to run. 
| 2013-02-05 01:31:18 |WARN |X|IO |pid=26149556.4113| o_lock_engines_during_pur | Purge timeout occured (10 min.).
| 2013-02-05 01:31:18 |WARN |X|IO |pid=26149556.4113| o_lock_engines_during_pur | Module Supervisor still busy.
| 2013-02-05 01:31:18 |ERROR|X|IO |pid=26149556.4113| o_io_on_purge             | u_trt_req_rgz not executed (lock timeout)
To fix it,  
$UXEXE/uxrazfic u_frrv60 X
Should be fixed by 6013
#################################
V6 a uproc script may have this:

drwx------ 2 univa univ 4096 Dec  6 17:04 U000000008_000  <--- This is for "Files associated with the Uproc"
-rwxrwxr-x 1 univa univ    6 Dec  6 17:04 U000000008.000
-rw-rw-r-- 1 univa univ  291 Dec  6 17:04 U000000008_000.mail

The directory does not need to exist for the uproc to run. 
Files associated with the Uproc will be copied to this directory and deployed with the Uproc.
#################################
unistart_aix_dem
This  tools is mandatory to start $U as a service/daemon on AIX.
The way services/daemons are managed on that OS needs to have a persistent process running.
$U is started (in background), and script waits until this service/daemon is stopped (stopsrc .s <PRODUCT_NAME>_<COMPANY_NAME>_<NODE_NAME>)

But it is not well implemented because if $U is stopped by another way than the stop service/daemon command, it stays alive infinitely.

We must add a check to stop it if $U is stopped .manually..

Workaround is so to stop the service to stop the process or simply kill it.

It seems that the script does not always exist even on AIX 6013.
#################################
MU offset is for display purpose only, does not change the execution time on server. 
#################################
To setup email notification in public network:
I found an external smtp server that can be configured to use IP validation rather than smtp authentication (ID/PWD).

I created an account on www.jangosmtp.com (free for low volume).   
-Changed jangosmtp settings to use IP validation
-Determined the correct external (home office network) IP using http://www.whatismyip.com/
-Added the IP from above to my account settings in jangosmtp
Updated my Node Settings/ SMTP/SMTP Server Host to relay.jangosmtp.net
And SMTP Server Port to 2525 (this number may change, probable values are 25, 2525, 587, 465)

I will add a product enhancement request to support SMTP authentication (ID/PWD based). 

#################################
To access associated file list:
cat $S_DIR_UPROC/tt.txt
#################################
In $U 6, ORA and SAP license are in u_fali01.txt in $U, not in UVMS.
