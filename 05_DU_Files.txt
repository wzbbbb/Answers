-- Reinitialization :
-.- fmpi reinit
In case you have some issue with some engines status, I would recommend you to reinitialize this file.
This manipulation will reinitialize the status of the engines and not impact your production.
$UXMGR/ux_raz_fic u_fmpi50 X
%UXEXE%\uxrazfic u_fmpi50 X

-.- fmhs reinit
In case your production is not running I would recommend you to reinitialize this file.
The impact of this manipulation will be the deletion of all the previous history traces of your production.
$UXMGR/ux_raz_fic u_fmhs50 X
$UXMGR/ux_raz_fic u_fmph50 X
%UXEXE%\uxrazfic u_fmph50 X
%UXEXE%\uxrazfic u_fmhs50 X

-.- fmhs/fmcx reinitialization
This manipulation will delete all the previous records in the Job Monitor/Graphic Job Monitor for the exploitation area of this node.
All the previous history traces will also be deleted.
$UXMGR/ux_raz_fic u_fmhs50 X
$UXMGR/ux_raz_fic u_fmph50 X
$UXMGR/ux_raz_fic u_fmcx50 X
$UXMGR/ux_raz_fic u_fmfu50 X
%UXEXE%\uxrazfic u_fmph50 X
%UXEXE%\uxrazfic u_fmhs50 X
%UXEXE%\uxrazfic u_fmcx50 X
%UXEXE%\uxrazfic u_fmfu50 X

-.- fmlc reinit
All the incompatibility classes previously locked will be unlocked.
If a launch is in event wait due to a incompatibility (before the reinitialization) you will have to update the launch to force it to run once you restart your Dollar Universe Company.

-.- fecd/fecl reinit
All previous exchange information will be lost (distribution, events sent remotly, etc).
$UXMGR/ux_raz_fic u_fecl50 A
$UXMGR/ux_raz_fic u_fecd50 A
$UXMGR/ux_raz_fic u_fecl50 I
$UXMGR/ux_raz_fic u_fecd50 I
$UXMGR/ux_raz_fic u_fecl50 S
$UXMGR/ux_raz_fic u_fecd50 S
$UXMGR/ux_raz_fic u_fecl50 X
$UXMGR/ux_raz_fic u_fecd50 X

-.- fmsb reinit
The impact of this manipulation will be the deletion of the previous launches.
The launches generated to a scheduled task will be recreated.
The manual launches or the launches generated by an uxordre will have to be manualy recreated.
$UXMGR/ux_raz_fic u_fmsb50 X
$UXMGR/ux_raz_fic u_fmsp50 X
$UXMGR/ux_raz_fic u_fmtp50 X
%UXEXE%\uxrazfic u_fmsb50 X
%UXEXE%\uxrazfic u_fmsp50 X
%UXEXE%\uxrazfic u_fmtp50 X

-.- dffdob reinit
L'impact de cette manipulation sera la suppresssion de l'historique de distribution des 4 espaces.
Ceci n'aura aucun impact sur les distributions en cours.
$UXMGR/ux_raz_fic dffdob
%UXEXE%\uxrazfic dffdob


-.- Razfic dyn
The impact of this manipulation will be the deletion of all the dynamic production datas : Launches, job monitor, history traces.
The launches generated to a scheduled task will be recreated.
The manual launches or the launches generated by an uxordre will have to be manualy recreated.
The configuration objects won't be impacted : uprocs sessions, management units etc ..
$UXMGR/ux_raz_fic u_fmcm50 X
$UXMGR/ux_raz_fic u_fmcx50 X
$UXMGR/ux_raz_fic u_fmer50 X
$UXMGR/ux_raz_fic u_fmev50 X
$UXMGR/ux_raz_fic u_fmfu50 X
$UXMGR/ux_raz_fic u_fmhs50 X
$UXMGR/ux_raz_fic u_fmlc50 X
$UXMGR/ux_raz_fic u_fmlp50 X
$UXMGR/ux_raz_fic u_fmph50 X
$UXMGR/ux_raz_fic u_fmpi50 X
$UXMGR/ux_raz_fic u_fmsb50 X
$UXMGR/ux_raz_fic u_fmsp50 X
$UXMGR/ux_raz_fic u_fmtp50 X
$UXMGR/ux_raz_fic u_fseu50 X
$UXMGR/ux_raz_fic u_fecl50 X
$UXMGR/ux_raz_fic u_fecd50 X
$UXMGR/ux_raz_fic u_fppf50 X
$UXMGR/ux_raz_fic u_fmpf50 X
rm -f $UXDEX/*.dump
rm -f $UXDEX/*.jnl
rm -f $UXLEX/X* 


%UXEXE%\uxrazfic u_fmcm50 X
%UXEXE%\uxrazfic u_fmcx50 X
%UXEXE%\uxrazfic u_fmer50 X
%UXEXE%\uxrazfic u_fmev50 X
%UXEXE%\uxrazfic u_fmfu50 X
%UXEXE%\uxrazfic u_fmhs50 X
%UXEXE%\uxrazfic u_fmlc50 X
%UXEXE%\uxrazfic u_fmlp50 X
%UXEXE%\uxrazfic u_fmph50 X
%UXEXE%\uxrazfic u_fmpi50 X
%UXEXE%\uxrazfic u_fmsb50 X
%UXEXE%\uxrazfic u_fmsp50 X
%UXEXE%\uxrazfic u_fmtp50 X
%UXEXE%\uxrazfic u_fseu50 X
%UXEXE%\uxrazfic u_fecl50 X
%UXEXE%\uxrazfic u_fecd50 X
%UXEXE%\uxrazfic u_fppf50 X
%UXEXE%\uxrazfic u_fmpf50 X
del %UXDEX%\*.dump
del %UXDEX%\*.jnl
del %UXLEX%\X* 

-- On Unix
To do so, please load the Dollar Universe environment and log on as the Dollar Universe administrator.
(More information regarding the User & Environment is available at the bottom of this e-mail.)
-.- Stop your Dollar Universe Company:
${UXMGR}/uxshutdown

-.- Check that your company is well stopped:
Type the following unix command:
ps -ef | grep ux | grep -v cuxxm | grep -v grep
No uxioserv processes should remain alive for this company.

-.- Launch the following commands

-.- Restart your Dollar Universe Company
${UXMGR}/uxstartup

-- On Unix
Veuillez charger l'environnement Dollar Universe et connectez vous en tant qu'administrateur Dollar Universe.
-.- Arretez la societe Dollar Universe
${UXMGR}/uxshutdown

-.- Verifiez que la societe soit bien arretee
Avec la commande :
ps -ef | grep ux | grep -v cuxxm | grep -v grep
Vous ne devez pas avoir de process uxioserv demarre au titre de la societe en question

-.- Executez les commandes suivantes :

-.- Redemarrez votre societe Dollar Universe :
${UXMGR}/uxstartup

-- On Windows
To do so, please load the Dollar Universe environment and log on as the Dollar Universe administrator.
(More information regarding the User & Environment is available at the bottom of this e-mail.)
-.- Stop your Dollar Universe Company:
%UXMGR%\uxshutdown

-.- Check that your company is well stopped:
In the Windows services panel or through a netstat please check if your
 Univer$e <Company Name>_IO_<area> services are well stopped.

-.- Launch the following commands

-.- Restart your Dollar Universe Company
%UXMGR%\uxstartup

1.4.1	UNIX
$UXMGR/ux_raz_fic u_fmcm50 X
$UXMGR/ux_raz_fic u_fmer50 X
$UXMGR/ux_raz_fic u_fmev50 X
$UXMGR/ux_raz_fic u_fmlc50 X
$UXMGR/ux_raz_fic u_fmlp50 X
$UXMGR/ux_raz_fic u_fseu50 X
$UXMGR/ux_raz_fic u_fecl50 X
$UXMGR/ux_raz_fic u_fecd50 X
$UXMGR/ux_raz_fic u_fppf50 X
$UXMGR/ux_raz_fic u_fmpf50 X
rm $UXDEX/*.dump
rm $UXDEX/*.jnl
1.4.2	NT
%UXEXE%\uxrazfic u_fmcm50 X
%UXEXE%\uxrazfic u_fmer50 X
%UXEXE%\uxrazfic u_fmev50 X
%UXEXE%\uxrazfic u_fmlc50 X
%UXEXE%\uxrazfic u_fmlp50 X
%UXEXE%\uxrazfic u_fseu50 X
%UXEXE%\uxrazfic u_fecl50 X
%UXEXE%\uxrazfic u_fecd50 X
%UXEXE%\uxrazfic u_fppf50 X
%UXEXE%\uxrazfic u_fmpf50 X
del %UXDEX%\*.dump
del %UXDEX%\*.jnl

-- File Backup
-1- You send us a copy of your u_fmcx50.dta file so we can implement it in one of our Dollar Universe company and check if we reproduce your issue.

To do so, please load the Dollar Universe environment and log on as the Dollar Universe administrator.
(More information regarding the User & Environment is available at the bottom of this e-mail.)

<Target Directory> will be a directory where you have enough place to copy and compress the u_fmcx50.dta file from xxx/exp/data.
cp ${UXDEX}/u_fmcx50.dta <Target Directory>/u_fmcx50.dta
compress <Target Directory>/u_fmcx50.dta
Send us the generated <Target Directory>/u_fmcx50.dta.Z file.

-- Reorganization launched during the startup
Concerning your incident number 23927, our analysis has led to the following solution :
Having the reorganization launched during the startup depends of your context and your priorities.

-- When launch the reorganization 
Please find the possible configuration with their advantages and inconveniences :

-1- Reorganization not executed at the startup :
-1.1- Advantages 
The startup will be executed, and there is no risk of issue during the startup if the reorganization script aborts.
During the execution of the IU_RTSCIS, the Dollar Universe datafile will only be reorganize once instead of 2 (reorganization launched by the IU_RTSCIS and reorganization launched by the startup).

-1.2- Inconveniences
If the IU_RTSCIS is not scheduled, and if the reorganization is not launched manualy, the Dollar Universe data files will never been reorganized.

-2- Reorganization executed at the startup :
-2.1- Advantages 
If the IU_RTSCIS is not scheduled, and if the reorganization is not launched manualy, the Dollar Universe data files will be at least reorganized at the startup of the Dollar Universe Company.

-2.2- Inconveniences
If the reorganization aborts before the startup, the Dollar Universe will not start.
During the execution of the IU_RTSCIS, the Dollar Universe datafile will be reorganize twice (reorganization launched by the IU_RTSCIS and reorganization launched by the startup) and if the second reorganization aborts, the Dollar Universe company won't restart.

-3- Conclusion
We recommend to comment out the reorganization at the startup (solution -1-) on the critical production hosts because we suppose that the maintenance session are regularly scheduled, and the impact of a non restart of the Dollar Universe Company would have a high impact on the production.
We recommend to uncomment the reorganization at the startup (solution -2-) on the tests hosts and non monitored production hosts because the maintenance session may not be regularly scheduled on these hosts, and having possible non restart of the Dollar Universe company does not have the same impact.

Please notice that it is higly recommended to reorganize your Dollar Universe datafiles after the restoration of a backup of the Dollar Universe Company.

-- MPE reaorgnization (21670) :
This looks good, you have the new reorganization script.
Now it is a bit tricky :
-1- With a MPE connection and the Dollar Universe environment, stop the company :
!UXMGR/SHUTDOWN
-2- Check is the company is well stopped :
showjob
If some jobs remains alive stop them with the abortjob command.
-3- Once the company is well stopped, start a POSIX session :
sh
-4- Check that your environment is well loaded :
echo $UXMGR
Should return you the patch of your mgr directory (if it does not, please load you environment)
-5- Launch the reorganization script :
!UXMGR/ux_vrf_rgz_rst
-6- Check if you have any error messages.
-7- Exit the Posix environment
exit
-8- Restart your Dollar Universe company.


-- Recustomization of the reorganization
We see also that no reorganization was provided after the maintenance of the unix host.
Message in the REOR.log file : 
Node parameter is  missing
Server IO_X is not stopped
unable to restore /mfg-apps/universe/PROD50/dffdob50

So we think that this issue occurs because of a non reorganisation of the Dollar Universe files before the restart of the Company and after a reboot of the unix host.

The reorganisation failed because the shared memory was not loaded (due to the reboot of the unix host).
So to avoid this in the futur we propose you to :
- Load the shared memory before launching the reorganisation script.
- Test the return code of the reorganisation procedure.

-- How implement these modifications
In the uxstartup_gen file you have now :
================================================================
echo "Processing data integrity check..."
${UXMGR}/ux_vrf_rgz_rst > ${UXLEX}/REORG.log
if [ $? -ne 0 ]
then
	echo "Warning, data integrity check ended with an error!!!"
else
 	echo "Data integrity check completed."
fi
sleep 5
================================================================

Please modify it to get :
================================================================
loc_date=`date +%Y%m%d-%H%M%S`
# -------------  Logical Reference loading
   $UXEXE/uxlnmlod uxlnm$SOCIETE.dat >/dev/null 
echo "Processing data integrity check..."
echo "Warning : Do not abort this procedure under any reason"
${UXMGR}/ux_vrf_rgz_rst > ${UXLEX}/reorg_${loc_date}.log
if [ $? -ne 0 ]; then
	echo "Warning, data integrity check ended with an error!!!"
	exit 1
else
 	echo "Data integrity check completed."
fi
sleep 5
================================================================


And then you can comment out the line 53 of your uxstartup_gen script.
   $UXEXE/uxlnmlod uxlnm$SOCIETE.dat >/dev/null 

--WARNING
This modification will cause the startup procedure to abort if the reorganization procedure failed.
This can be dangerous in case your are automaticaly stop and restarting Dollar Universe with a mainteance uproc.

To avoid that you can test if the startup is submitted from a uproc by testing the value of the PROCESS_MODE variable.
If this variable is defined, and it value is equal to BATCH, you do not launch the reorganisation (because you already launched it in the maintenance job).
If this variable is not defined, or it value is not equal to BATCH, you launch the reorganisation.
PROCESS_MODE=BATCH


